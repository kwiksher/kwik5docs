<!doctype html><html><head><title>Kwik</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=revised content="2023-06-13T13:30:07 UTC"><title>Adding A Component :: Kwik</title><link rel="shortcut icon" href=/kwik5docs/images/favicon.png type=image/x-icon><link href=/kwik5docs/css/nucleus.css rel=stylesheet><link href=/kwik5docs/css/font-awesome.min.css rel=stylesheet><link href=/kwik5docs/css/featherlight.min.css rel=stylesheet><link href=/kwik5docs/css/auto-complete.css rel=stylesheet><link href=/kwik5docs/theme-flex/style.css rel=stylesheet><link rel=stylesheet href=/kwik5docs/css/bootstrap.min.css><meta name=description content></head><body data-url=/kwik5docs/implementation/adding_component/><header><div class=logo><a class=baselink href=https://kwiksher.github.io/kwik5docs/>Kwik</a></div><div class=burger><a href=javascript:void(0); style=font-size:15px>&#9776;</a></div><nav class=shortcuts><li role><a href=https://github.com/kwiksher/ rel=noopener><i class='fa fa-github'></i> <label>Github repo</label></a></li><li role><a href=https://github.com/vjeantet/hugo-theme-docdock/archive/master.zip rel=noopener><i class='fa fa-cloud-download'></i> <label>Download</label></a></li><li role><a href=https://gohugo.io/ rel=noopener><i class='fa fa-bookmark'></i> <label>Hugo Documentation</label></a></li><li role><a href=/kwik5docs/credits rel=noopener><i class='fa fa-bullhorn'></i> <label>Credits</label></a></li></nav></header><article><aside><ul class=menu><li data-nav-id=https://kwiksher.github.io/kwik5docs/introduction/ class=dd-item><div><a href=/kwik5docs/introduction/>Introduction</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/ class="dd-item haschildren"><div><a href=/kwik5docs/get_started/>Get Started</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/step1/ class=dd-item><div><a href=/kwik5docs/get_started/step1/>Step 1 - UXP
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/step2/ class=dd-item><div><a href=/kwik5docs/get_started/step2/>Step2 - Solar2D
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/naming_rule/ class=dd-item><div><a href=/kwik5docs/get_started/naming_rule/>PSD Naming Rule
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/components/ class=dd-item><div><a href=/kwik5docs/get_started/components/>Components
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/events/ class=dd-item><div><a href=/kwik5docs/get_started/events/>Commands & Events
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/custom_class/ class=dd-item><div><a href=/kwik5docs/get_started/custom_class/>Custom Class
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/import_component/ class=dd-item><div><a href=/kwik5docs/get_started/import_component/>Import component Layer
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/tools/ class="dd-item haschildren"><div><a href=/kwik5docs/get_started/tools/>Tools</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/tools/httpyac/ class=dd-item><div><a href=/kwik5docs/get_started/tools/httpyac/>httpYac REST API
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/tools/unittest/ class=dd-item><div><a href=/kwik5docs/get_started/tools/unittest/>Unit Test
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/tools/vscode/ class=dd-item><div><a href=/kwik5docs/get_started/tools/vscode/>Visual Studio Code
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/ class="dd-item haschildren"><div><a href=/kwik5docs/design/>Design</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/architecture/ class=dd-item><div><a href=/kwik5docs/design/architecture/>Architecure
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/ class="dd-item haschildren"><div><a href=/kwik5docs/design/project_model/>Project Model</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/photoshop/ class=dd-item><div><a href=/kwik5docs/design/project_model/photoshop/>Photoshop File
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/icons/ class=dd-item><div><a href=/kwik5docs/design/project_model/icons/>Icons Launch/Splash screens
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/content/ class=dd-item><div><a href=/kwik5docs/design/project_model/content/>Content X Structure
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/commands/ class="dd-item haschildren"><div><a href=/kwik5docs/design/project_model/commands/>Commands</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/commands/editor/ class=dd-item><div><a href=/kwik5docs/design/project_model/commands/editor/>action editor
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/commands/ui/ class=dd-item><div><a href=/kwik5docs/design/project_model/commands/ui/>UI
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/commands/canvas/ class=dd-item><div><a href=/kwik5docs/design/project_model/commands/canvas/>canvas
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/commands/screenshot/ class=dd-item><div><a href=/kwik5docs/design/project_model/commands/screenshot/>screenshot
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/ class="dd-item haschildren"><div><a href=/kwik5docs/design/project_model/components/>Components</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/image/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/image/>Layer
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/animation/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/animation/>Animation
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/audio/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/audio/>Audio
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/button/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/button/>Button
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/canvas/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/canvas/>Canvas
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/group/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/group/>Group
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/particles/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/particles/>Particles
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/spritesheet/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/spritesheet/>Spritesheet
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/sync_audio_text/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/sync_audio_text/>Sync Audio&Text
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/timer/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/timer/>Timer
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/settings/ class="dd-item haschildren"><div><a href=/kwik5docs/design/project_model/settings/>Settings</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/settings/ios/ class=dd-item><div><a href=/kwik5docs/design/project_model/settings/ios/>iOS
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/settings/android/ class=dd-item><div><a href=/kwik5docs/design/project_model/settings/android/>android
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/settings/macos/ class=dd-item><div><a href=/kwik5docs/design/project_model/settings/macos/>macOS
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/settings/tvos/ class=dd-item><div><a href=/kwik5docs/design/project_model/settings/tvos/>tvOS
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/settings/win32/ class=dd-item><div><a href=/kwik5docs/design/project_model/settings/win32/>Win32
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/settings/html5/ class=dd-item><div><a href=/kwik5docs/design/project_model/settings/html5/>HTML5
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/settings/linux/ class=dd-item><div><a href=/kwik5docs/design/project_model/settings/linux/>Linux
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/template/ class=dd-item><div><a href=/kwik5docs/design/project_model/template/>Template strurcture
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/template_model/ class=dd-item><div><a href=/kwik5docs/design/project_model/template_model/>Template Model
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/tools/ class="dd-item haschildren"><div><a href=/kwik5docs/design/tools/>Tools</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/tools/builder/ class=dd-item><div><a href=/kwik5docs/design/tools/builder/>Command line Build
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/tools/plugins/ class=dd-item><div><a href=/kwik5docs/design/tools/plugins/>UXP Plugins
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/tools/editor/ class=dd-item><div><a href=/kwik5docs/design/tools/editor/>Editor
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/tools/rest_server/ class=dd-item><div><a href=/kwik5docs/design/tools/rest_server/>REST Server
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/tools/utilities/ class=dd-item><div><a href=/kwik5docs/design/tools/utilities/>Utilities
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/workflow/ class="dd-item haschildren"><div><a href=/kwik5docs/design/workflow/>Workflow</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/workflow/lua/ class=dd-item><div><a href=/kwik5docs/design/workflow/lua/>Lua Code
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/workflow/workflow/ class=dd-item><div><a href=/kwik5docs/design/workflow/workflow/>REST API
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/class/ class="dd-item haschildren"><div><a href=/kwik5docs/design/class/>Class Diagrams</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/class/class_animation/ class=dd-item><div><a href=/kwik5docs/design/class/class_animation/>Animation Editor
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/class/class_group/ class=dd-item><div><a href=/kwik5docs/design/class/class_group/>Group Editor
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/class/class/ class=dd-item><div><a href=/kwik5docs/design/class/class/>Timer Editor
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/sample-projects/ class=dd-item><div><a href=/kwik5docs/design/sample-projects/>Sample Projects</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/new_features/ class=dd-item><div><a href=/kwik5docs/design/new_features/>New Features
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/ class="dd-item haschildren"><div><a href=/kwik5docs/bookstore/>Bookstore</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/components/ class=dd-item><div><a href=/kwik5docs/bookstore/components/>Components
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/steps/ class=dd-item><div><a href=/kwik5docs/bookstore/steps/>Steps
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/server/ class=dd-item><div><a href=/kwik5docs/bookstore/server/>Book Server
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/simulator/ class=dd-item><div><a href=/kwik5docs/bookstore/simulator/>Simulator
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/versions/ class=dd-item><div><a href=/kwik5docs/bookstore/versions/>Book Versions
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/implementation/ class="dd-item haschildren"><div><a href=/kwik5docs/implementation/>Implementation</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/implementation/audio_editor/ class=dd-item><div><a href=/kwik5docs/implementation/audio_editor/>Audio Editor
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/implementation/adding_component/ class=dd-item><div><a href=/kwik5docs/implementation/adding_component/>Adding A Component
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/implementation/btree/ class=dd-item><div><a href=/kwik5docs/implementation/btree/>Behavior Tree
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/implementation/selectors/ class=dd-item><div><a href=/kwik5docs/implementation/selectors/>Selectors
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/implementation/rest_server/ class=dd-item><div><a href=/kwik5docs/implementation/rest_server/>REST Server
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/implementation/rest_api/ class=dd-item><div><a href=/kwik5docs/implementation/rest_api/>REST API
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/all/ class=dd-item><div><a href=/kwik5docs/all/>all</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul><section></section></aside><section class=page><div class=nav-select><center>Navigation :
<select onchange="location.href=this.value"><option value=/kwik5docs/introduction/>
Introduction</option><option value=/kwik5docs/get_started/>
Get Started</option><option value=/kwik5docs/design/>
Design</option><option value=/kwik5docs/bookstore/>
Bookstore</option><option value=/kwik5docs/implementation/>
Implementation</option><option value=/kwik5docs/implementation/audio_editor/>- Audio Editor</option><option value=/kwik5docs/implementation/adding_component/ selected>- Adding A Component</option><option value=/kwik5docs/implementation/btree/>- Behavior Tree</option><option value=/kwik5docs/implementation/selectors/>- Selectors</option><option value=/kwik5docs/implementation/rest_server/>- REST Server</option><option value=/kwik5docs/implementation/rest_api/>- REST API</option><option value=/kwik5docs/all/>
all</option></select></center></div><div><div class=searchbox><input data-search-input id=search-by type=text placeholder></div></div><div align=right>Last Modified: 2023-05-08</div><h2 id=how-to-add-a-component>how to add a component</h2><p>editor/index.lua and baseTable.lua handles user&rsquo; selection from xxxTable
commands/selectors/selectXXX.lua reads a json</p><p>selectors.lua handles to read values of UI.scene.model.components for xxxTable.</p><ol><li><p>editor/models.lua</p><p>this defines layer related components. it does not include audio, group, timer, variables and action.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>models</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Animations&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>icon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;toolAnim&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>tools</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span><span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Linear&#34;</span><span style=color:#111>,</span> <span style=color:#111>icon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;animLinear&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span><span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Blink&#34;</span><span style=color:#111>,</span> <span style=color:#111>icon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;animBlink&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span><span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Bounce&#34;</span><span style=color:#111>,</span> <span style=color:#111>icon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;animBounce&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span><span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Pulse&#34;</span><span style=color:#111>,</span> <span style=color:#111>icon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;animPulse&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span><span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Rotation&#34;</span><span style=color:#111>,</span> <span style=color:#111>icon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;animRotation&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span><span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Shake&#34;</span><span style=color:#111>,</span> <span style=color:#111>icon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;animShake&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span><span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Switch&#34;</span><span style=color:#111>,</span> <span style=color:#111>icon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;animSwitch&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span><span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Filter&#34;</span><span style=color:#111>,</span> <span style=color:#111>icon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;animFilter&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span><span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Path&#34;</span><span style=color:#111>,</span> <span style=color:#111>icon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;animPath&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>id</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;animation&#34;</span>
</span></span><span style=display:flex><span>     <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>...</span>
</span></span></code></pre></div><p>editor/index.lua loads it. The id is used to load a module for editing a component like</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>animation</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;editor.animation.index&#34;</span><span style=color:#111>)</span>
</span></span></code></pre></div><p>For audio, group, timer and variables, the icons and the modules are loaded with their table.lua for instance, <strong>groupTable.lua</strong></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>parent</span> <span style=color:#f92672>=</span> <span style=color:#111>name</span><span style=color:#111>:</span><span style=color:#111>match</span><span style=color:#111>(</span><span style=color:#d88200>&#34;(.-)[^%.]+$&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>Props</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;group&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>anchorName</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;selectGroup&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>icons</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;Groups&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;Trash&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>id</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;group&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>M</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#111>parent</span><span style=color:#f92672>..</span><span style=color:#d88200>&#34;baseTable&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#111>Props</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>M</span>
</span></span></code></pre></div><p>action&rsquo; icon/module ared loaded with <strong>action/index.lua</strong>. It is called by editor/index.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>actionIcon</span> <span style=color:#f92672>=</span> <span style=color:#111>muiIcon</span><span style=color:#111>:</span><span style=color:#111>create</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#111>icon</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;actions_over&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;actions_over&#34;</span><span style=color:#111>,</span><span style=color:#d88200>&#34;actions_over&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>text</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;action-icon&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>x</span> <span style=color:#f92672>=</span> <span style=color:#111>display.contentCenterX</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>42</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>y</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>2</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>-- y = (display.actualContentHeight - display.contentHeight)/2 -2,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>width</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>22</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>height</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>22</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>fontSize</span> <span style=color:#f92672>=</span><span style=color:#ae81ff>16</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>listener</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>    <span style=color:#111>self.isVisible</span> <span style=color:#f92672>=</span> <span style=color:#f92672>not</span> <span style=color:#111>self.isVisible</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#111>self.isVisible</span> <span style=color:#00a8c8>then</span>
</span></span><span style=display:flex><span>      <span style=color:#111>self</span><span style=color:#111>:</span><span style=color:#111>show</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>else</span>
</span></span><span style=display:flex><span>        <span style=color:#111>self</span><span style=color:#111>:</span><span style=color:#111>hide</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>end</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>fillColor</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#ae81ff>1.0</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>  <span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>actionIcon</span> <span style=color:#f92672>=</span> <span style=color:#111>actionIcon</span>
</span></span></code></pre></div></li><li><p>editor/index.lua</p><p>Add {name = &ldquo;selectXXX&rdquo;, btree= &ldquo;load xxx&rdquo;}</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>M.commands</span> <span style=color:#f92672>=</span> <span style=color:#111>{{</span><span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;selectApp&#34;</span><span style=color:#111>,</span> <span style=color:#111>btree</span><span style=color:#f92672>=</span><span style=color:#00a8c8>nil</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>{</span><span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;selectBook&#34;</span><span style=color:#111>,</span> <span style=color:#111>btree</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;load book&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>{</span><span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;selectPage&#34;</span><span style=color:#111>,</span> <span style=color:#111>btree</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;load page&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>{</span><span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;selectLayer&#34;</span><span style=color:#111>,</span> <span style=color:#111>btree</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;load layer&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>-- {name=&#34;selectAction&#34;, btree=&#34;&#34;},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>{</span><span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;selectTool&#34;</span><span style=color:#111>,</span> <span style=color:#111>btree</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;editor component&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>-- {name=&#34;selectActionCommand&#34;, btree=&#34;&#34;}</span>
</span></span><span style=display:flex><span>  <span style=color:#111>{</span><span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;selectAudio&#34;</span><span style=color:#111>,</span> <span style=color:#111>btree</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;load audio&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>{</span><span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;selectGroup&#34;</span><span style=color:#111>,</span> <span style=color:#111>btree</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;load group&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>-- {name=&#34;selectTimer&#34;, btree=&#34;load timer&#34;},</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>-- {name=&#34;selectVariable&#34;, btree=&#34;load variable&#34;},</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>-- {name=&#34;selectVideo&#34;, btree=&#34;load video&#34;},</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></li><li><p>new xxxTable out of baseTable.lua</p><p>write like this</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>parent</span> <span style=color:#f92672>=</span> <span style=color:#111>name</span><span style=color:#111>:</span><span style=color:#111>match</span><span style=color:#111>(</span><span style=color:#d88200>&#34;(.-)[^%.]+$&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>Props</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;group&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>anchorName</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;selectGroup&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>icons</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;Groups&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;Trash&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>id</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;group&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>M</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#111>parent</span><span style=color:#f92672>..</span><span style=color:#d88200>&#34;baseTable&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#111>Props</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>M</span>
</span></span></code></pre></div><p>this baseTable fires &ldquo;load xxx&rdquo; with a selected entry in xxxTable when user clicks it</p><p>baseTable.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>  <span style=color:#111>tree.backboard</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>show</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>class</span> <span style=color:#f92672>=</span> <span style=color:#111>target.class</span>
</span></span><span style=display:flex><span>  <span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#111>tree.backboard</span><span style=color:#111>[</span><span style=color:#111>self.name</span><span style=color:#111>]</span> <span style=color:#f92672>=</span> <span style=color:#111>target</span><span style=color:#111>[</span><span style=color:#111>self.name</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#111>tree</span><span style=color:#111>:</span><span style=color:#111>setConditionStatus</span><span style=color:#111>(</span><span style=color:#d88200>&#34;select component&#34;</span><span style=color:#111>,</span> <span style=color:#111>bt.SUCCESS</span><span style=color:#111>,</span> <span style=color:#00a8c8>true</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#111>tree</span><span style=color:#111>:</span><span style=color:#111>setActionStatus</span><span style=color:#111>(</span><span style=color:#d88200>&#34;load &#34;</span><span style=color:#f92672>..</span><span style=color:#111>self.name</span><span style=color:#111>,</span> <span style=color:#111>bt.RUNNING</span><span style=color:#111>,</span> <span style=color:#00a8c8>true</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#111>tree</span><span style=color:#111>:</span><span style=color:#111>setConditionStatus</span><span style=color:#111>(</span><span style=color:#d88200>&#34;select &#34;</span><span style=color:#f92672>..</span><span style=color:#111>self.name</span><span style=color:#111>,</span> <span style=color:#111>bt.SUCCESS</span><span style=color:#111>)</span>
</span></span></code></pre></div><p>then next, this tree action (load xxx) is called back. It is linked to selectXXX command by editor/index.lua. commands/selectors/selectXXX to load a json of a selected entry</p></li><li><p>selectors.lua</p><blockquote><p>this is a view model. You see each command to be displayed as a button. It is a anchorName to xxxTable</p></blockquote><p>Add set store name &ldquo;xxxTable&rdquo; and btree = &ldquo;select component&rdquo;</p><p>M:create(UI)</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>  <span style=color:#111>self.componentSelector</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    <span style=color:#111>selectorBase.new</span><span style=color:#111>(</span>
</span></span><span style=display:flex><span>    <span style=color:#111>UI</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>-</span><span style=color:#ae81ff>2</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span>
</span></span><span style=display:flex><span>      <span style=color:#111>{</span><span style=color:#111>label</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Layer&#34;</span><span style=color:#111>,</span> <span style=color:#111>command</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;selectLayer&#34;</span><span style=color:#111>,</span> <span style=color:#111>store</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;layerTable&#34;</span><span style=color:#111>,</span> <span style=color:#111>filter</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span> <span style=color:#111>btree</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;select layer&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>{</span><span style=color:#111>label</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Audio&#34;</span><span style=color:#111>,</span> <span style=color:#111>command</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;selectAudio&#34;</span><span style=color:#111>,</span> <span style=color:#111>store</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;audioTable&#34;</span><span style=color:#111>,</span> <span style=color:#111>btree</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;select component&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>{</span><span style=color:#111>label</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Group&#34;</span><span style=color:#111>,</span> <span style=color:#111>command</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;selectGroup&#34;</span><span style=color:#111>,</span> <span style=color:#111>store</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;groupTable&#34;</span><span style=color:#111>,</span> <span style=color:#111>btree</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;select component&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>{</span><span style=color:#111>label</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Timer&#34;</span><span style=color:#111>,</span> <span style=color:#111>command</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;selectTimer&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>{</span><span style=color:#111>label</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Var&#34;</span><span style=color:#111>,</span> <span style=color:#111>command</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;selectVariable&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>{</span><span style=color:#111>label</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Action&#34;</span><span style=color:#111>,</span> <span style=color:#111>command</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;selectAction&#34;</span><span style=color:#111>,</span> <span style=color:#111>store</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;actionTable&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;toolLayer&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>selectLayerFilter</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>propsTable</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>propsButtons</span>
</span></span><span style=display:flex><span>  <span style=color:#111>)</span>
</span></span></code></pre></div><p>M:didShow()</p><p>Add xxxStore:set</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>    <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>layerStore</span><span style=color:#111>:</span><span style=color:#111>set</span><span style=color:#111>({})</span>
</span></span><span style=display:flex><span>    <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>audioStore</span><span style=color:#111>:</span><span style=color:#111>set</span><span style=color:#111>({})</span>
</span></span><span style=display:flex><span>    <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>actionStore</span><span style=color:#111>:</span><span style=color:#111>set</span><span style=color:#111>({})</span>
</span></span><span style=display:flex><span>    <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>groupStore</span><span style=color:#111>:</span><span style=color:#111>set</span><span style=color:#111>({})</span>
</span></span><span style=display:flex><span>    <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>timerStore</span><span style=color:#111>:</span><span style=color:#111>set</span><span style=color:#111>({})</span>
</span></span><span style=display:flex><span>    <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>variableStore</span><span style=color:#111>:</span><span style=color:#111>set</span><span style=color:#111>({})</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>--</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#111>storeTable</span> <span style=color:#00a8c8>then</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>-- should we show the last secection?</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>if</span> <span style=color:#111>storeTable</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#34;layerTable&#34;</span> <span style=color:#00a8c8>then</span>
</span></span><span style=display:flex><span>        <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>layerStore</span><span style=color:#111>:</span><span style=color:#111>set</span><span style=color:#111>(</span><span style=color:#111>UI.scene</span><span style=color:#111>.</span><span style=color:#111>model.components</span><span style=color:#111>.</span><span style=color:#111>layers</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>elseif</span> <span style=color:#111>storeTable</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#34;audioTable&#34;</span> <span style=color:#00a8c8>then</span>
</span></span><span style=display:flex><span>        <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#111>storeTable</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>        <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>audioStore</span><span style=color:#111>:</span><span style=color:#111>set</span><span style=color:#111>(</span><span style=color:#111>UI.scene</span><span style=color:#111>.</span><span style=color:#111>model.components</span><span style=color:#111>.</span><span style=color:#111>audios</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>elseif</span> <span style=color:#111>storeTable</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#34;groupTable&#34;</span> <span style=color:#00a8c8>then</span>
</span></span><span style=display:flex><span>        <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#111>storeTable</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>        <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>groupStore</span><span style=color:#111>:</span><span style=color:#111>set</span><span style=color:#111>(</span><span style=color:#111>UI.scene</span><span style=color:#111>.</span><span style=color:#111>model.components</span><span style=color:#111>.</span><span style=color:#111>groups</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>elseif</span> <span style=color:#111>storeTable</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#34;actionTable&#34;</span> <span style=color:#00a8c8>then</span>
</span></span><span style=display:flex><span>        <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>actionStore</span><span style=color:#111>:</span><span style=color:#111>set</span><span style=color:#111>(</span><span style=color:#111>UI.scene</span><span style=color:#111>.</span><span style=color:#111>model.commands</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>  <span style=color:#111>...</span>
</span></span></code></pre></div></li><li><p>commands/selector/selectXXX</p><p>write code to read json and set it to propsTable</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>command</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span> <span style=color:#111>(</span><span style=color:#111>params</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>UI</span>    <span style=color:#f92672>=</span> <span style=color:#111>params.UI</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>xxx</span> <span style=color:#f92672>=</span>  <span style=color:#111>params.xxx</span> <span style=color:#f92672>or</span> <span style=color:#d88200>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>path</span> <span style=color:#f92672>=</span> <span style=color:#111>system.pathForFile</span><span style=color:#111>(</span> <span style=color:#d88200>&#34;App/&#34;</span><span style=color:#f92672>..</span><span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>currentBook</span><span style=color:#f92672>..</span><span style=color:#d88200>&#34;/models/&#34;</span><span style=color:#f92672>..</span><span style=color:#111>UI.page</span> <span style=color:#f92672>..</span><span style=color:#d88200>&#34;/audios/&#34;</span><span style=color:#f92672>..</span><span style=color:#111>params.class</span><span style=color:#f92672>..</span><span style=color:#d88200>&#34;/&#34;</span><span style=color:#f92672>..</span><span style=color:#111>xxx</span><span style=color:#f92672>..</span><span style=color:#d88200>&#34;.json&#34;</span><span style=color:#111>,</span> <span style=color:#111>system.ResourceDirectory</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>decoded</span><span style=color:#111>,</span> <span style=color:#111>pos</span><span style=color:#111>,</span> <span style=color:#111>msg</span> <span style=color:#f92672>=</span> <span style=color:#111>json.decodeFile</span><span style=color:#111>(</span> <span style=color:#111>path</span> <span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#f92672>not</span> <span style=color:#111>decoded</span> <span style=color:#00a8c8>then</span>
</span></span><span style=display:flex><span>      <span style=color:#111>print</span><span style=color:#111>(</span> <span style=color:#d88200>&#34;Decode failed at &#34;</span><span style=color:#f92672>..</span><span style=color:#111>tostring</span><span style=color:#111>(</span><span style=color:#111>pos</span><span style=color:#111>)</span><span style=color:#f92672>..</span><span style=color:#d88200>&#34;: &#34;</span><span style=color:#f92672>..</span><span style=color:#111>tostring</span><span style=color:#111>(</span><span style=color:#111>msg</span><span style=color:#111>),</span> <span style=color:#111>path</span> <span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>else</span>
</span></span><span style=display:flex><span>      <span style=color:#111>print</span><span style=color:#111>(</span> <span style=color:#d88200>&#34;props is decoded!&#34;</span> <span style=color:#111>)</span>
</span></span><span style=display:flex><span>      <span style=color:#111>UI.editor</span><span style=color:#111>.</span><span style=color:#111>propsStore</span><span style=color:#111>:</span><span style=color:#111>set</span><span style=color:#111>(</span><span style=color:#111>decoded</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>      <span style=color:#111>propsButtons</span><span style=color:#111>:</span><span style=color:#111>show</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>end</span>
</span></span></code></pre></div></li><li><p>for controllers for components are registered either in index.lua or selectors.lua or buttons.lua</p><p>for instance, action/selectors.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>M.commands</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;selectAction&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;selectActionCommand&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>---</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>M</span><span style=color:#111>:</span><span style=color:#75af00>init</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>,</span> <span style=color:#111>toggleHandler</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>app</span> <span style=color:#f92672>=</span> <span style=color:#111>App.get</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>for</span> <span style=color:#111>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#f92672>#</span><span style=color:#111>self.commands</span> <span style=color:#00a8c8>do</span>
</span></span><span style=display:flex><span>    <span style=color:#111>app.context</span><span style=color:#111>:</span><span style=color:#111>mapCommand</span><span style=color:#111>(</span>
</span></span><span style=display:flex><span>      <span style=color:#d88200>&#34;editor.action.&#34;</span> <span style=color:#f92672>..</span> <span style=color:#111>self.commands</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>      <span style=color:#d88200>&#34;editor.action.controller.&#34;</span> <span style=color:#f92672>..</span> <span style=color:#111>self.commands</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>    <span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>  <span style=color:#111>self.togglePanel</span> <span style=color:#f92672>=</span> <span style=color:#111>toggleHandler</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span></code></pre></div><p>for animation/buttons.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>M.commands</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;create&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;delete&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;save&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;cancel&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;copy&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;paste&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>---</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>M</span><span style=color:#111>:</span><span style=color:#75af00>init</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>,</span> <span style=color:#111>toggleHandler</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>app</span> <span style=color:#f92672>=</span> <span style=color:#111>App.get</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>for</span> <span style=color:#111>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#f92672>#</span><span style=color:#111>self.commands</span> <span style=color:#00a8c8>do</span>
</span></span><span style=display:flex><span>    <span style=color:#111>app.context</span><span style=color:#111>:</span><span style=color:#111>mapCommand</span><span style=color:#111>(</span>
</span></span><span style=display:flex><span>      <span style=color:#d88200>&#34;editor.anim.&#34;</span> <span style=color:#f92672>..</span> <span style=color:#111>self.commands</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>      <span style=color:#d88200>&#34;editor.animation.controller.&#34;</span> <span style=color:#f92672>..</span> <span style=color:#111>self.commands</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>    <span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>  <span style=color:#111>self.togglePanel</span> <span style=color:#f92672>=</span> <span style=color:#111>toggleHandler</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span></code></pre></div></li></ol><div class=chevrons><div id=navigation><a class="nav nav-prev" href=/kwik5docs/implementation/audio_editor/ title="Audio Editor"><i class="fa fa-chevron-left"></i><label>Audio Editor</label></a>
<a class="nav nav-next" href=/kwik5docs/implementation/btree/ title="Behavior Tree" style=margin-right:0><label>Behavior Tree</label><i class="fa fa-chevron-right"></i></a></div></div></section></article><footer><div class=footline><div class=date><i class='fa fa-calendar'></i> 08/05/2023</div><div class=github-link><a href=https://github.com/vjeantet/hugo-theme-docdock/edit/master/exampleSite/content/implementation/adding_component.md target=blank><i class="fa fa-code-fork"></i></a></div></div><div></div></footer><script src=/kwik5docs/js/jquery-2.x.min.js></script>
<script type=text/javascript>var baseurl="https://kwiksher.github.io/kwik5docs/"</script><script src=/kwik5docs/js/clipboard.min.js></script>
<script src=/kwik5docs/js/featherlight.min.js></script>
<script type=text/javascript src=/kwik5docs/js/lunr.min.js></script>
<script type=text/javascript src=/kwik5docs/js/auto-complete.js></script>
<script type=text/javascript src=/kwik5docs/js/search.js></script>
<script src=/kwik5docs/theme-flex/script.js></script>
<script src=https://kwiksher.github.io/kwik5docs/js/scripts.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.2.3/mermaid.min.js crossorigin=anonymous></script>
<script>mermaid.init(void 0,".language-mermaid")</script></body></html>