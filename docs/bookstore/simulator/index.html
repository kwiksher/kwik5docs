<!doctype html><html><head><title>Kwik</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=revised content="2022-12-01T11:26:51 UTC"><title>Simulator :: Kwik</title><link rel="shortcut icon" href=/kwik5docs/images/favicon.png type=image/x-icon><link href=/kwik5docs/css/nucleus.css rel=stylesheet><link href=/kwik5docs/css/font-awesome.min.css rel=stylesheet><link href=/kwik5docs/css/featherlight.min.css rel=stylesheet><link href=/kwik5docs/css/auto-complete.css rel=stylesheet><link href=/kwik5docs/theme-flex/style.css rel=stylesheet><link rel=stylesheet href=/kwik5docs/css/bootstrap.min.css><meta name=description content></head><body data-url=/kwik5docs/bookstore/simulator/><header><div class=logo><a class=baselink href=https://kwiksher.github.io/kwik5docs/>Kwik</a></div><div class=burger><a href=javascript:void(0); style=font-size:15px>&#9776;</a></div><nav class=shortcuts><li role><a href=https://github.com/kwiksher/ rel=noopener><i class='fa fa-github'></i> <label>Github repo</label></a></li><li role><a href=https://github.com/vjeantet/hugo-theme-docdock/archive/master.zip rel=noopener><i class='fa fa-cloud-download'></i> <label>Download</label></a></li><li role><a href=https://gohugo.io/ rel=noopener><i class='fa fa-bookmark'></i> <label>Hugo Documentation</label></a></li><li role><a href=/kwik5docs/credits rel=noopener><i class='fa fa-bullhorn'></i> <label>Credits</label></a></li></nav></header><article><aside><ul class=menu><li data-nav-id=https://kwiksher.github.io/kwik5docs/introduction/ class=dd-item><div><a href=/kwik5docs/introduction/>Introduction</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/ class="dd-item haschildren"><div><a href=/kwik5docs/get_started/>Get Started</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/step1/ class=dd-item><div><a href=/kwik5docs/get_started/step1/>Step 1 - UXP
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/step2/ class=dd-item><div><a href=/kwik5docs/get_started/step2/>Step2 - Solar2D
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/naming_rule/ class=dd-item><div><a href=/kwik5docs/get_started/naming_rule/>PSD Naming Rule
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/components/ class=dd-item><div><a href=/kwik5docs/get_started/components/>Components
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/events/ class=dd-item><div><a href=/kwik5docs/get_started/events/>Commands & Events
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/get_started/tools/ class=dd-item><div><a href=/kwik5docs/get_started/tools/>Tools
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/ class="dd-item haschildren"><div><a href=/kwik5docs/design/>Design</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/architecture/ class=dd-item><div><a href=/kwik5docs/design/architecture/>Architecure
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/ class="dd-item haschildren"><div><a href=/kwik5docs/design/project_model/>Project Model</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/photoshop/ class=dd-item><div><a href=/kwik5docs/design/project_model/photoshop/>Photoshop File
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/icons/ class=dd-item><div><a href=/kwik5docs/design/project_model/icons/>Icons
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/content/ class=dd-item><div><a href=/kwik5docs/design/project_model/content/>Content X Structure
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/ class="dd-item haschildren"><div><a href=/kwik5docs/design/project_model/components/>Components</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/image/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/image/>Layer
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/animation/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/animation/>Animation
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/audio/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/audio/>Audio
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/button/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/button/>Button
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/group/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/group/>Group
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/spritesheet/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/spritesheet/>Spritesheet
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/components/sync_audio_text/ class=dd-item><div><a href=/kwik5docs/design/project_model/components/sync_audio_text/>Sync Audio&Text
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/template/ class=dd-item><div><a href=/kwik5docs/design/project_model/template/>Template strurcture
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/project_model/template_model/ class=dd-item><div><a href=/kwik5docs/design/project_model/template_model/>Template Model
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/tools/ class="dd-item haschildren"><div><a href=/kwik5docs/design/tools/>Tools</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/tools/plugins/ class=dd-item><div><a href=/kwik5docs/design/tools/plugins/>UXP Plugins
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/tools/editor/ class=dd-item><div><a href=/kwik5docs/design/tools/editor/>Editor
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/tools/webapp/ class=dd-item><div><a href=/kwik5docs/design/tools/webapp/>REST Server
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/tools/utilities/ class=dd-item><div><a href=/kwik5docs/design/tools/utilities/>Utilities
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/workflow/ class="dd-item haschildren"><div><a href=/kwik5docs/design/workflow/>Workflow</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/workflow/lua/ class=dd-item><div><a href=/kwik5docs/design/workflow/lua/>Lua Code
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/workflow/workflow/ class=dd-item><div><a href=/kwik5docs/design/workflow/workflow/>REST API
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/sample-projects/ class=dd-item><div><a href=/kwik5docs/design/sample-projects/>Sample Projects</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/design/new_features/ class=dd-item><div><a href=/kwik5docs/design/new_features/>New Features
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/ class="dd-item haschildren"><div><a href=/kwik5docs/bookstore/>Bookstore</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i></div><ul><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/components/ class=dd-item><div><a href=/kwik5docs/bookstore/components/>Components
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/steps/ class=dd-item><div><a href=/kwik5docs/bookstore/steps/>Steps
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/server/ class=dd-item><div><a href=/kwik5docs/bookstore/server/>Book Server
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/simulator/ class=dd-item><div><a href=/kwik5docs/bookstore/simulator/>Simulator
</a><i class="fa fa-circle-thin read-icon"></i></div></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/bookstore/versions/ class=dd-item><div><a href=/kwik5docs/bookstore/versions/>Book Versions
</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul></li><li data-nav-id=https://kwiksher.github.io/kwik5docs/all/ class=dd-item><div><a href=/kwik5docs/all/>all</a><i class="fa fa-circle-thin read-icon"></i></div></li></ul><section></section></aside><section class=page><div class=nav-select><center>Navigation :
<select onchange="location.href=this.value"><option value=/kwik5docs/introduction/>
Introduction</option><option value=/kwik5docs/get_started/>
Get Started</option><option value=/kwik5docs/design/>
Design</option><option value=/kwik5docs/bookstore/>
Bookstore</option><option value=/kwik5docs/bookstore/components/>- Components</option><option value=/kwik5docs/bookstore/steps/>- Steps</option><option value=/kwik5docs/bookstore/server/>- Book Server</option><option value=/kwik5docs/bookstore/simulator/ selected>- Simulator</option><option value=/kwik5docs/bookstore/versions/>- Book Versions</option><option value=/kwik5docs/all/>
all</option></select></center></div><div><div class=searchbox><input data-search-input id=search-by type=text placeholder></div></div><div align=right>Last Modified: 2022-08-27</div><h1 id=simulator--device-build>Simulator & Device Build</h1><h2 id=run-with-simulator>Run with Simulator</h2><ul><li>loading main.lua of BookShelfEmbedded with Corona Simulator, clicking purchase text will show up the IAP dialog</li><li>Files > Show Project Sandbox, you find downloaded zip and bg.png.</li><li>If you want to refresh the state beginning, delete the files from the Sandbox folders. TemporaryFiles must be cleared because the files from Internet are cached there.</li></ul><h2 id=build-for-device>Build for device</h2><p>After everything all right with simulator, turn off debug mode IAP.lua and set the valid product IDs of apple, google or amazon in the following lua files of BookShelfTOC project. You may edit the files in App/TOC.</p><ul><li>App/TOC/components/store/IAP.lua</li><li>App/TOC/components/store/model.lua</li></ul><p>components/store/IAP.lua</p><ul><li>iapOptions.salt change it as your own text</li><li>iapOptions.debugMode false for device build</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>M</span><span style=color:#111>:</span><span style=color:#75af00>init</span><span style=color:#111>(</span><span style=color:#111>catalogue</span><span style=color:#111>,</span> <span style=color:#111>restoreAlert</span><span style=color:#111>,</span> <span style=color:#111>purchaseAlert</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;iap init&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>self.catalogue</span>       <span style=color:#f92672>=</span> <span style=color:#111>catalogue</span>
</span></span><span style=display:flex><span>    <span style=color:#111>self.restoreAlert</span>  <span style=color:#f92672>=</span> <span style=color:#111>restoreAlert</span>
</span></span><span style=display:flex><span>    <span style=color:#111>self.purchaseAlert</span> <span style=color:#f92672>=</span> <span style=color:#111>purchaseAlert</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>iapOptions</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>catalogue</span>         <span style=color:#f92672>=</span> <span style=color:#111>catalogue</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>filename</span>          <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;episodes_inventory.txt&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>--Salt for the hashing algorithm</span>
</span></span><span style=display:flex><span>        <span style=color:#111>salt</span>              <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;something tr1cky to gue55!&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>failedListener</span>    <span style=color:#f92672>=</span> <span style=color:#111>failedListener</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>cancelledListener</span> <span style=color:#f92672>=</span> <span style=color:#111>failedListener</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>--Once the product has been purchased, it will remain in the inventory.  Uncomment the following line</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>--to test the purchase functions again in future.  It&#39;s also useful for testing restore purchases.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>--doNotLoadInventory=true,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>debugMode</span>        <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>}</span>
</span></span><span style=display:flex><span>    <span style=color:#111>iap.init</span><span style=color:#111>(</span><span style=color:#111>iapOptions</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;iap init end&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span></code></pre></div><p>components/store/model.lua</p><ul><li>productNames.apple, productNames.google, productNames.amazon to be set for device build. If not used, make it empty string as ""</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>M.catalogue</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>products</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>Episode02</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>productNames</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>apple</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode02_apple&#34;</span><span style=color:#111>,</span> <span style=color:#111>google</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode02_googgle&#34;</span><span style=color:#111>,</span> <span style=color:#111>amazon</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode02_amazon&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>            <span style=color:#111>productType</span>  <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;non-consumable&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>            <span style=color:#111>onPurchase</span>   <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span> <span style=color:#111>IAP.setInventoryValue</span><span style=color:#111>(</span><span style=color:#d88200>&#34;unlock_Episode02&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>            <span style=color:#111>onRefund</span>     <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span> <span style=color:#111>IAP.removeFromInventory</span><span style=color:#111>(</span><span style=color:#d88200>&#34;unlock_Episode02&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>},</span>
</span></span><span style=display:flex><span>            <span style=color:#111>Episode03</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>productNames</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>apple</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode03_apple&#34;</span><span style=color:#111>,</span> <span style=color:#111>google</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode03_googgle&#34;</span><span style=color:#111>,</span> <span style=color:#111>amazon</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode03_amazon&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>            <span style=color:#111>productType</span>  <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;non-consumable&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>            <span style=color:#111>onPurchase</span>   <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span> <span style=color:#111>IAP.setInventoryValue</span><span style=color:#111>(</span><span style=color:#d88200>&#34;unlock_Episode03&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>            <span style=color:#111>onRefund</span>     <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span> <span style=color:#111>IAP.removeFromInventory</span><span style=color:#111>(</span><span style=color:#d88200>&#34;unlock_Episode03&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>inventoryItems</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>unlock_Episode02</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>productType</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;non-consumable&#34;</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>            <span style=color:#111>unlock_Episode03</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>productType</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;non-consumable&#34;</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><div class=chevrons><div id=navigation><a class="nav nav-prev" href=/kwik5docs/bookstore/server/ title="Book Server"><i class="fa fa-chevron-left"></i><label>Book Server</label></a>
<a class="nav nav-next" href=/kwik5docs/bookstore/versions/ title="Book Versions" style=margin-right:0><label>Book Versions</label><i class="fa fa-chevron-right"></i></a></div></div></section></article><footer><div class=footline><div class=date><i class='fa fa-calendar'></i> 27/08/2022</div><div class=github-link><a href=https://github.com/vjeantet/hugo-theme-docdock/edit/master/exampleSite/content/bookstore/simulator.md target=blank><i class="fa fa-code-fork"></i></a></div></div><div></div></footer><script src=/kwik5docs/js/jquery-2.x.min.js></script>
<script type=text/javascript>var baseurl="https://kwiksher.github.io/kwik5docs/"</script><script src=/kwik5docs/js/clipboard.min.js></script>
<script src=/kwik5docs/js/featherlight.min.js></script>
<script type=text/javascript src=/kwik5docs/js/lunr.min.js></script>
<script type=text/javascript src=/kwik5docs/js/auto-complete.js></script>
<script type=text/javascript src=/kwik5docs/js/search.js></script>
<script src=/kwik5docs/theme-flex/script.js></script>
<script src=https://kwiksher.github.io/kwik5docs/js/scripts.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.12.0/mermaid.min.js crossorigin=anonymous></script>
<script>mermaid.init(void 0,".language-mermaid")</script></body></html>