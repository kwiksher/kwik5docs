<!doctype html><html lang=en><head><meta charset=utf-8></head><body><div class=row><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/categories/>Categories</small></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/tags/>Tags</small></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/>Home</small><p>TOC</p><nav id=TableOfContents><ul><li><a href=#section-1>section 1</a></li><li><a href=#section-2>section 2</a><ul><li><a href=#2-1>2-1</a></li></ul></li></ul></nav><h2 id=section-1>section 1</h2><p>注釈のようなことを実現可能です<sup><a href=#note1>1</a></sup></p><h2 id=section-2>section 2</h2><p>before</p><pre tabindex=0><code>-
  - Header 1
  - Header 2
  - Header 3
-
  - Column 1-1
  - Column 1-2
  - Column 1-3
-
  - Column 2-1
  - Column 2-2
  - Column 2-3
</code></pre><table><thead><tr><th style=text-align:left>Header 1</th><th style=text-align:left>Header 2</th><th style=text-align:left>Header 3</th></tr></thead><tbody><tr><td style=text-align:left>Column 1-1</td><td style=text-align:left>Column 1-2</td><td style=text-align:left>Column 1-3</td></tr><tr><td style=text-align:left>Column 2-1</td><td style=text-align:left>Column 2-2</td><td style=text-align:left>Column 2-3</td></tr></tbody></table><h3 id=2-1>2-1</h3><p>これは<span style=color:red>赤文字</span>です</p><h4 id=2-1-1>2-1-1</h4><ul><li>これは<em>イタリック</em>です</li><li>これは<strong>ボールド</strong>です</li><li>これは<em><strong>イタリック＆ボールド</strong></em>です</li><li>これは<del>打消し線</del>です</li><li>これは<sup>上付き</sup>です</li><li>これは<sub>下付き</sub>です</li></ul><p><small id=note1>1. 無理やりですが</small></p></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/all/>all</small></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/>Design</small><h1 id=design>Design</h1><p>Project model</p><ul><li>robotlegs</li><li>template<ul><li>components</li><li>commands</li></ul></li></ul><p>Tools</p><ul><li><p>image exporter</p><p>PS/XD UXP</p></li><li><p>visual editor (frontEnd)</p><p>React</p><ul><li>uxp plugin for Ps or XD</li><li>web app</li></ul><p>Solar2D</p><ul><li>live editor</li></ul></li><li><p>REST server</p><ul><li><p>pegasus-harness</p></li><li><p>pegasus-launcher</p><p>frontEnd app sends REST API requests to harness of pegasus lua server</p><p>this server offers the renderer of .lua for components and commands</p></li></ul></li><li><p>other tools</p><ul><li>generate_scene_index</li></ul></li></ul><p>Sample projects</p><hr><p>Image Exporter plugin for Adobe Photoshop</p><img src=./img/2022-05-18-13-25-58.png width=360><hr><p>Project Model</p><blockquote><p>sample-projects/Pegasus</p></blockquote><img src=./img/2022-05-31-11-13-26.png width=360><blockquote><p>/kwik5/sandbox/Ps/react-uxp-styles/Project/Solar2D</p></blockquote><img src=./img/2022-05-18-13-20-45.png width=360><hr><p>Visual Editor(React)</p><p>{{webview html panel}}</p><ul><li>UXP</li><li>Browser</li></ul><hr><p>Visual Live Editor(Solar2D)</p><img src=./img/2022-05-18-13-15-45.png width=800><hr><p>Tools</p><ul><li><p>develop/Solar2D/tools/pegasus-harness</p></li><li><p>develop/Solar2D/tools/pegasus-launcher</p><p>REST API requests from httpYac are sent to pegasus</p></li></ul><img src=./img/2022-05-18-13-37-14.png width=600><p>generate_scene_index</p><img src=./img/2022-05-18-13-39-54.png width=600></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/architecture/>Architecure</small><h2 id=architecure>Architecure</h2><p>html panel</p><ul><li>browser</li><li>uxp panel</li><li>webview</li></ul><pre tabindex=0><code class=language-mermaid data-lang=mermaid>flowchart LR

Designer((fas:fa-user Designer))
Developer((fas:fa-user Developer))

subgraph Photoshop
	graphics
	UXP
end

subgraph Editor[Editor]
	subgraph App
		assets[(assets/images&lt;br&gt;models/json)]
		lua[(Source .lua)]
	end
	tools(renderer&lt;br&gt;scafolder)
	httpServer
	GUI(GUI&lt;br&gt;transform&lt;br&gt;animation)
	GUI -.- tools
end

subgraph htmlPanel[REST API]
	form(Properties &lt;br&gt; CRUD)
end

subgraph VSCode
	httpYac(httpYac)
end

Photoshop -.img/json.-&gt; assets
htmlPanel &lt;-.img/json.-&gt; httpServer
httpServer &lt;-.-&gt; assets
httpServer -.- tools
tools -.- App

Browser-.- htmlPanel
httpYac -.- htmlPanel
VSCode -.- lua

GUI -.- assets

Designer --- GUI
Designer --- Photoshop
Designer --- Browser

Developer --- VSCode
</code></pre><p>rest api</p><blockquote><p>pegasus is runningin Editor</p></blockquote><ol><li><p>run Editor</p></li><li><p>upload an image to pegasus server</p><ul><li>save it assets/images/book/</li><li>create display.object</li><li>.json</li></ul></li></ol><p>uxp</p><blockquote><p>indirect, async</p></blockquote><ol><li><p>outputs images/json to App</p><blockquote><p>offline</p></blockquote></li><li><p>run Editor</p></li></ol><pre tabindex=0><code class=language-mermaid data-lang=mermaid>flowchart LR

Designer((fas:fa-user Designer))
Developer((fas:fa-user Developer))
User((fas:fa-user User))

subgraph Photoshop
	graphics
	UXP
end

subgraph VisualStudioCode
	httpYac(httpYac .http &lt;br&gt; CRUD)
	coding(coding src/properties)
end

subgraph Editor[Editor]
	subgraph App[ Application]
		src(lua files &lt;br&gt;layerX.json&lt;br&gt;layerX_animation.json&lt;br&gt;)
		assets(images, audios ...)
		runtime(Runtime&lt;br&gt; data)
		GUI(GUI &lt;br&gt; material widgets for Solar2D? &lt;br&gt; Or webview?)
		webview
		setter
	end
	subgraph renderer
		parser(parser&lt;br&gt;lua/json/yaml)
		writer(writer)
		templates[(templates)]
	end
	subgraph httpServer
		doGet
		doPost
	end
	subgraph htmlPanel[html panel]
	form(Properties &lt;br&gt; CRUD)
end

end


parser -.- writer
writer -.- templates
setter -.- runtime
GUI    -.- writer
GUI    -.- setter

coding -.-&gt; src


UXP -.- graphics
UXP -.-&gt; assets

doPost -.-&gt; parser
writer -.-&gt; src

form -.-&gt; httpServer
doGet -.- src
doGet -.- assets

httpYac -.-&gt; httpServer

webview -.- form
GUI -.- webview

User -.- GUI
Designer -.-&gt; Photoshop
Designer -.-&gt; htmlPanel

Developer -.-&gt; htmlPanel
Developer -.-&gt; VisualStudioCode
</code></pre></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/new_features/>New Features</small><h2 id=new-features>New Features</h2><p>Solar2D API to be included</p><ul><li><p>Audio</p><ul><li>seek</li><li>rewind</li><li>cross fade function</li></ul></li><li><p>Social</p><ul><li>twitter</li><li>facebook</li><li>instagram</li></ul></li><li><p>transition.*</p><ul><li>chaining them</li></ul></li><li><p>mesh</p></li><li><p>2.5D — Perspective and Depth</p></li><li><p>game controllers</p></li></ul><p>Solar2D video texture</p><ul><li><a href=https://github.com/ANSH3LL/plugin_movie>https://github.com/ANSH3LL/plugin_movie</a></li></ul><p>Tiled</p><ul><li><p><a href=https://forums.solar2d.com/t/smooth-scrolling-of-top-down-tiled-map/150199/2>https://forums.solar2d.com/t/smooth-scrolling-of-top-down-tiled-map/150199/2</a></p><p>&ldquo;cull based on a 3x3 area of sub-screens centered around player. "</p></li><li><p><a href=https://gamedev.stackexchange.com/questions/83253/is-there-any-way-to-load-pieces-of-a-tile-map-as-and-when-needed-and-not-the-en>https://gamedev.stackexchange.com/questions/83253/is-there-any-way-to-load-pieces-of-a-tile-map-as-and-when-needed-and-not-the-en</a></p></li><li><p><a href=https://www.dynetisgames.com/2018/02/24/manage-big-maps-phaser-3/>https://www.dynetisgames.com/2018/02/24/manage-big-maps-phaser-3/</a></p><ul><li>A tool to split an existing Tiled tilemap into chunks</li><li>How to reason about chunks based on their ID’s and the world dimensions</li><li>How to load and destroy them on the fly using Phaser 3</li></ul></li></ul><p>Texture atlas function in kwik?</p><ul><li><p><a href=https://github.com/shama/atlaspack>https://github.com/shama/atlaspack</a></p></li><li><p><a href=http://free-tex-packer.com/>http://free-tex-packer.com/</a></p></li><li><p><a href=https://github.com/odrick/free-tex-packer>https://github.com/odrick/free-tex-packer</a></p></li><li><p><a href=https://github.com/richardjdare/Atlasmaker>https://github.com/richardjdare/Atlasmaker</a></p></li><li><p><a href=https://github.com/soimy/atlasify>https://github.com/soimy/atlasify</a> ⭐️</p><ul><li><a href=https://github.com/soimy/maxrects-packer>https://github.com/soimy/maxrects-packer</a></li></ul></li></ul><p>Audio sprites?</p><ul><li><a href=https://medium.com/game-development-stuff/how-to-create-audiosprites-to-use-with-howler-js-beed5d006ac1>https://medium.com/game-development-stuff/how-to-create-audiosprites-to-use-with-howler-js-beed5d006ac1</a></li></ul><hr><p>Interactive</p><ul><li>texture atlas &ndash; Spine</li><li>spritesheet &ndash; Adobe Animate</li><li>movie &ndash; Adobe Animate</li></ul><p>Lottie ts to lua? ⭐️</p><ul><li><a href=https://github.com/bytedance/lottiefy>https://github.com/bytedance/lottiefy</a></li><li><a href=https://github.com/airbnb/lottie-web>https://github.com/airbnb/lottie-web</a></li><li><a href=https://github.com/LottieFiles>https://github.com/LottieFiles</a></li><li><a href=https://lottiefiles.com/what-is-lottie>https://lottiefiles.com/what-is-lottie</a></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/>Project Model</small><h2 id=project-model>project Model</h2><p>sandbox/Ps/react-uxp-styles/Project/Solar2D/src</p><pre tabindex=0><code>.
├── App
│   ├── contentX // See Content X Structure
|
├── Images.xcassets
├── LaunchScreen.storyboardc
├── assets
|   └── kwik
├── build.settings
├── commands
│   ├── contentX
│   │   └── pageX
│   │       └── injectedAction.lua
│   ├── app
│   └── kwik
├── components
│   ├── contentX
│   │   └── pageX
│   │       └── injectedLayer.lua
│   ├── tiledmap
│   ├── crossword
│   └── store
│   └── kwik
├── config.lua
├── controller
│   ├── Application.lua
│   ├── contexts
|   |     ├── ApplicationContext.lua
|   |     ├── ApplicationMediator.lua
|   |     ├── ApplicationUI.lua
|   |     ├── componentEventHandler.lua
|   |     ├── mediator.lua
|   |     ├── scene.lua
|   |     └── sceneEventHandler.lua
│   ├── mediators
│   └── index.lua ⭐️
├── en.lproj
├── extlib
├── jp.lproj
└── main.lua  ⭐️
</code></pre><blockquote><p>main.lua in App/bookXXX is removed. src/controller handles to load an App context</p></blockquote></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/components/>Components</small><h2 id=components>Components</h2></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/components/audio/>Audio</small><h3 id=audio>Audio</h3><ul><li><p>components/pageX/audios</p><ul><li>sounds/soundOne.lua</li><li>streams/songOne.lua</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-.lua data-lang=.lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>Props</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span>     <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;soundOne&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>type</span>     <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;sound&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>autoPlay</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>channel</span>  <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>Props</span>
</span></span></code></pre></div></li><li><p>scenes/pageX/index.lua</p><pre tabindex=0><code>{
    name = &#34;pageX&#34;,
    layers = {
        {background={}},
    },
    components = {
        {audios = {
            {name=&#34;soundOne&#34;, type=&#34;sound&#34;},
            {name=&#34;songOne&#34;, type=&#34;stream&#34;}
        }},
        {others = {
            {nanostores={}}
        }}
    },
    events = {},
}
</code></pre></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/components/image/>Image</small><h3 id=image>Image</h3><ul><li><p>scenes/pageX/background.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_K</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span> <span style=color:#d88200>&#34;Application&#34;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_M</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;components.kwik.layer_image&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.weight</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>Props</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span><span style=color:#111>blendMode</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;normal&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>height</span>    <span style=color:#f92672>=</span> <span style=color:#ae81ff>520</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>width</span>     <span style=color:#f92672>=</span> <span style=color:#ae81ff>1000</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>kind</span>      <span style=color:#f92672>=</span> <span style=color:#111>pixel</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>name</span>      <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bg&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>x</span>         <span style=color:#f92672>=</span> <span style=color:#ae81ff>1000</span>  <span style=color:#f92672>-</span><span style=color:#ae81ff>1000</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>y</span>         <span style=color:#f92672>=</span> <span style=color:#ae81ff>520</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>alpha</span>     <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span><span style=color:#f92672>/</span><span style=color:#ae81ff>100</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.imageWidth</span>  <span style=color:#f92672>=</span> <span style=color:#111>Props.width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.imageHeight</span> <span style=color:#f92672>=</span> <span style=color:#111>Props.height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.mX</span><span style=color:#111>,</span> <span style=color:#111>_M.mY</span>   <span style=color:#f92672>=</span> <span style=color:#111>_K.ultimatePosition</span><span style=color:#111>(</span><span style=color:#111>Props.x</span><span style=color:#111>,</span> <span style=color:#111>Props.y</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.randXStart</span>  <span style=color:#f92672>=</span> <span style=color:#111>_K.ultimatePosition</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.randXEnd</span>    <span style=color:#f92672>=</span> <span style=color:#111>_K.ultimatePosition</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.dummy</span><span style=color:#111>,</span> <span style=color:#111>_M.randYStart</span> <span style=color:#f92672>=</span> <span style=color:#111>_K.ultimatePosition</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.dummy</span><span style=color:#111>,</span> <span style=color:#111>_M.randYEnd</span>   <span style=color:#f92672>=</span> <span style=color:#111>_K.ultimatePosition</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.infinityDistance</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#111>parseValue</span><span style=color:#111>()</span> <span style=color:#f92672>or</span> <span style=color:#ae81ff>0</span><span style=color:#111>)</span><span style=color:#f92672>/</span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>....</span>
</span></span><span style=display:flex><span><span style=color:#111>....</span>
</span></span><span style=display:flex><span><span style=color:#111>....</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>localVars</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>localPos</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>didShow</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>toDispose</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span>  <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>toDestory</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>_M</span>
</span></span></code></pre></div><blockquote><p>&lsquo;_M.weight = num&rsquo; controlls the order of display objects for <strong>kwik-genereate-index</strong> tool that outputs scenes/pageX/index.lua</p></blockquote></li><li><p>scenes/pageX/groupOne/index.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>_M</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.weight</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- this index.lua is for kwik-generate-model</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- you may put additional code here</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>_M</span>
</span></span></code></pre></div></li><li><p>scenes/pageX/groupOne/imageOne.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_K</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span> <span style=color:#d88200>&#34;Application&#34;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_M</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;components.kwik.layer_image&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.weight</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>Props</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>...</span>
</span></span><span style=display:flex><span>    <span style=color:#111>....</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></li><li><p>scenes/pageX/groupOne/imageTwo.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_K</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span> <span style=color:#d88200>&#34;Application&#34;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_M</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;components.kwik.layer_image&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.weight</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>Props</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>...</span>
</span></span><span style=display:flex><span>    <span style=color:#111>....</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></li><li><p>scenes/pageX/index.lua</p><blockquote><p>Bottom to Top order</p></blockquote><pre tabindex=0><code>{
    name = &#34;pageX&#34;,
    layers = {
        {background={}},
        {groupOne = {
            {imageTwo},
            {imageOne},
        }},
    },
    components = {},
    events = {},
}
</code></pre></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/content/>Content X Structure</small><h3 id=content-x-structure>Content X Structure</h3><p>sandbox/Ps/react-uxp-styles/Project/Solar2D/src/App/contentX</p><p>(TODO clean the tree structure below)</p><pre tabindex=0><code>.
├── assets
│   ├── audios
│   │   ├── sounds
│   │   │   └── ballsCollide.mp3
│   │   ├── streams
│   │   │   ├── Gentle-Rain.mp3
│   │   │   └── Tranquility.mp3
│   │   └── sync
│   │       ├── en
│   │       │   ├── cat.mp3
│   │       │   ├── kwik.mp3
│   │       │   └── narration.mp3
│   │       ├── jp
│   │       │   ├── cat.mp3
│   │       │   ├── kwik.mp3
│   │       │   └── narration.mp3
│   │       ├── pageX_Text1.mp3
│   │       ├── pageX_Text1.txt
│   │       ├── page02_Text1.mp3
│   │       └── page02_Text1.txt
│   ├── images
│   │   └── pageX
│   │       ├── Loading.png
│   │       ├── Loading@2x.png
│   │       ├── Loading@4x.png
│   │       ├── bg.png
│   │       ├── bg@2x.png
│   │       ├── bg@4x.png
│   │       └── sidepanel
│   │           ├── layersList.png
│   │           ├── layersList@2x.png
│   │           ├── layersList@4x.png
│   │           ├── topbar.png
│   │           ├── topbar@2x.png
│   │           └── topbar@4x.png
│   ├── kwik
│   │   ├── kAudio.png
│   │   ├── kAudioHi.png
│   │   ├── shutter.mp3
│   │   └── thumbnails
│   ├── particles
│   │   ├── kaboom_393.json
│   │   └── kaboom_393.png
│   ├── sprites
│   │   └── butflysprite.png
│   ├── videos
│   │   └── kwikplanet.mp4
│   └── www
├── components
│   └── pag01
│       ├── audios
│       ├── groups
│       ├── others
│       │   ├── page_IAP.lua
│       │   ├── page_ads.lua
│       │   ├── page_ext_lib_code.lua
│       │   ├── page_navigation.lua
│       │   ├── page_parallax.lua
│       │   └── page_shake.lua
│       ├── timers
│       └── variables
├── models
│   ├── assets
│   │   ├── audios
│   │   │   ├── sounds
│   │   │   ├── streams
│   │   │   └── sync
│   │   ├── index.json
│   │   ├── particles
│   │   ├── sprites
│   │   ├── videos
│   │   └── www
│   ├── pageX
│       ├── components
│       │   └── audios
│       ├── events
│       │   └── doDistanceModel.json
│       ├── index.json
│       └── layers
│           ├── Loading.json
│           ├── Loading_animation.json
│           ├── Loading_button.json
│           ├── Loading_properties.json
│           ├── bg.json
│           └── sidepanel
│               ├── layersList.json
│               └── topbar.json
└── scenes
    └── pageX
        ├── Loading.lua
        ├── Loading_animation.lua
        ├── Loading_button.lua
        ├── bg.lua
        ├── index.lua
        └── sidepanel
            ├── index.lua
            ├── layersList.lua
            └── topbar.lua
</code></pre></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/icons/>Icons</small><p><a href=https://forums.solar2d.com/t/new-icon-size-for-ios/354492>https://forums.solar2d.com/t/new-icon-size-for-ios/354492</a></p><ul><li>114x114</li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/photoshop/>Photoshop File</small><h2 id=photoshop-file>Photoshop File</h2><p><a href=https://www.ios-resolution.com/>https://www.ios-resolution.com/</a></p><p>iPhone 13 Pro Max 1284x2778</p><img src=../img/2022-05-21-11-26-54.png width=1080><ul><li><p>iPad Pro 2048 x 2732</p></li><li><p>iPhone X 1125 x 2436</p></li><li><p>iPhone 11 Pro 1242 x 2688</p><p><a href=https://forums.solar2d.com/t/iphone-11-pro-max-screen-shots-in-simulator/151266/11>https://forums.solar2d.com/t/iphone-11-pro-max-screen-shots-in-simulator/151266/11</a></p></li></ul><p>Kwik4 Ulitimate Config</p><ul><li><p>1280 x 1920</p><p><a href=https://kwiksher.com/doc/getting_startted/guidelines/blend_mode/>https://kwiksher.com/doc/getting_startted/guidelines/blend_mode/</a></p><p><a href=https://kwiksher.com/doc/getting_startted/guidelines/screenshot/>https://kwiksher.com/doc/getting_startted/guidelines/screenshot/</a></p></li><li><p>background</p><p>1440 x 2280</p><p>iPhone X 1440 × 2772</p><p><a href=https://forums.solar2d.com/t/how-to-define-application-working-area-on-the-screen/351066/11>https://forums.solar2d.com/t/how-to-define-application-working-area-on-the-screen/351066/11</a></p><p><a href=https://forums.solar2d.com/t/safe-area-on-iphone-x-and-11-problem/353608>https://forums.solar2d.com/t/safe-area-on-iphone-x-and-11-problem/353608</a></p><blockquote><p><a href=https://github.com/SpyricGames/Solar2D-Plugins-Public>https://github.com/SpyricGames/Solar2D-Plugins-Public</a></p></blockquote></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/template_model/>Template Model</small><h3 id=code-template-model>Code Template Model</h3><p>assets/model/schema</p><p>embedded in codes &ndash; TBI to be extracted</p><ul><li>external codes - export it to .lua or can be imported directly</li><li>physics path</li><li>read2me -<ul><li>timecodes</li></ul></li><li>spritesheet info</li></ul><p>TODO:add ext codes</p><pre tabindex=0><code>extCodes
    libs
    p1
        user_codes.lua
        ext_001.lua
        ext_002.lua

        commands/
            button_name_001.lua
            action_name_001.lua
            user_codes.lua
    p2/
</code></pre><p>=> build4/</p><pre><code>```lua
function ActionCommand:new()
    local command = {}
    --
    function command:execute(params)
        local UI         = params.UI
        local sceneGroup = UI.scene.view
        local layer      = UI.layer
        local phase     = params.event.phase
        local event     = params.event
        {{#vvar}}
            {{vvar}}
        {{/vvar}}
        {{#arqCode}}
            {{arqCode}}
        {{/arqCode}}
    end
    return command
end
```

or

ext_lib_codes.lua
```
local _K = require &quot;Application&quot;
{{#extLib}}
    local {{name}} = requireKwik(&quot;{{libname}}&quot;)
{{/extLib}}
--
{{#TV}}
local kInputDevices = require(&quot;extlib.tv.kInputDevices&quot;)
{{/TV}}

function _M:localVars(UI)
    local sceneGroup  = UI.scene.view
    local layer       = UI.layer
    {{#extCodeTop}}
    {{ccode}}
    {{arqCode}}
    {{/extCodeTop}}
end
```
</code></pre><p>model.json</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;page&#34;</span><span style=color:#111>:</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span><span style=color:#f92672>&#34;alias&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;title&#34;</span><span style=color:#111>,</span><span style=color:#f92672>&#34;isTmplt&#34;</span><span style=color:#111>:</span><span style=color:#00a8c8>false</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;audios&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;read2me&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;videos&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;PNGs&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;sprites&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;particles&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;WWW&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;thumbnails&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;images&#34;</span><span style=color:#111>:[</span>
</span></span><span style=display:flex><span>                 <span style=color:#d88200>&#34;bg@4x.png&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;bg@2x.png&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;bg.png&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>null</span>
</span></span><span style=display:flex><span>    <span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;shared&#34;</span><span style=color:#111>:[</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>null</span>
</span></span><span style=display:flex><span>    <span style=color:#111>]</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;page&#34;</span><span style=color:#111>:{</span><span style=color:#960050;background-color:#1e0010>{page</span><span style=color:#111>}}</span><span style=color:#960050;background-color:#1e0010>,</span><span style=color:#d88200>&#34;alias&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#d88200>&#34;{{alias}}&#34;</span><span style=color:#960050;background-color:#1e0010>,</span><span style=color:#d88200>&#34;isTmplt&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{isTmplt</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#layers</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>        <span style=color:#d88200>&#34;{{layer}}&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;x&#34;</span><span style=color:#111>:{</span><span style=color:#960050;background-color:#1e0010>{x</span><span style=color:#111>}}</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#d88200>&#34;y&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{y</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>},</span>
</span></span><span style=display:flex><span>            <span style=color:#d88200>&#34;width&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{width</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>},</span> <span style=color:#d88200>&#34;height&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{height</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>},</span>
</span></span><span style=display:flex><span>            <span style=color:#d88200>&#34;alpha&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{alpha</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>},</span> <span style=color:#d88200>&#34;ext&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#d88200>&#34;{{ext}}&#34;</span> <span style=color:#960050;background-color:#1e0010>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{/layers</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;audios&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#audios</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{filename}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/audios</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;read2me&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#read2me</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#111>{</span><span style=color:#f92672>&#34;foldername&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;{{foldername}}&#34;</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;filenames&#34;</span><span style=color:#111>:[{</span><span style=color:#960050;background-color:#1e0010>{#filenames</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{.}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/filenames</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span> <span style=color:#111>},{</span><span style=color:#960050;background-color:#1e0010>{/read2me</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;videos&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#videos</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{filename}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/videos</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;PNGs&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#PNGs</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{foldername}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/PNGs</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;sprites&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#sprites</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{filename}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/sprites</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;particles&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#particles</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#111>{</span><span style=color:#f92672>&#34;filename&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;{{filename}}&#34;</span><span style=color:#111>,</span><span style=color:#f92672>&#34;PNG&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;{{PNG}}&#34;</span><span style=color:#111>},{</span><span style=color:#960050;background-color:#1e0010>{/particles</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;WWW&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#WWW</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#111>{</span><span style=color:#f92672>&#34;filename&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;{{filename}}&#34;</span><span style=color:#111>,</span><span style=color:#f92672>&#34;foldername&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;{{foldername}}&#34;</span><span style=color:#111>},{</span><span style=color:#960050;background-color:#1e0010>{/WWW</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;thumbnails&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#thumbnails</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#filenames</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{.}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/filenames</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{/thumbnails</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;images&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#images</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>         <span style=color:#d88200>&#34;{{filename}}@4x.{{filetype}}&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;{{filename}}@2x.{{filetype}}&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;{{filename}}.{{filetype}}&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{/images</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>null</span>
</span></span><span style=display:flex><span>    <span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;shared&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#shared</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>         <span style=color:#d88200>&#34;{{filename}}@4x.{{filetype}}&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;{{filename}}@2x.{{filetype}}&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;{{filename}}.{{filetype}}&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{/shared</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>null</span>
</span></span><span style=display:flex><span>    <span style=color:#111>]</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/template/>Template strurcture</small><h3 id=template-structure>template structure</h3><pre tabindex=0><code>├── App
    ├── contentX
        ├── assets
        │   ├── audios
        │   │   ├── sounds
        │   │   ├── streams
        │   │   └── sync
        │   ├── images
        │   └── model.json
        ├── commands
        │   └── pageX
        ├── components
        │   ├── pageX
        │   │   ├── audios
        │   │   ├── groups
        │   │   ├── interactions
        │   │   │   └── page
        │   │   ├── others
        │   │   ├── timers
        │   │   └── variables
        │   └── store?
        ├── defaults
        │   ├── audio_properties.xml
        │   ├── layer_properties.xml
        │   ├── linear_anim_properties.xml
        │   └── spritesheet_properties.xml
        ├── mediators
        ├── models
        │   ├── assets
        │   │   ├── audios
        │   │   │   ├── sounds
        │   │   │   ├── streams
        │   │   │   └── sync
        │   │   ├── index.json
        │   │   ├── particles
        │   │   ├── sprites
        │   │   ├── videos
        │   │   └── www
        │   ├── lproj
        │   └── pageX
        │       ├── components
        │       │   ├── audios
        │       │   ├── groups
        │       │   ├── others
        │       │   ├── timers
        │       │   └── variables
        │       ├── events
        │       ├── index.json
        │       └── layers
        ├── scenes
            └── pageX
                ├── animations
                ├── images
                ├── interactions
                ├── physics
                └── replacements
</code></pre></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/sample-projects/>Sample Projects</small><h2 id=sample-projects>Sample Projects</h2><ul><li>sample-projects/SingleBook</li><li>sample-projects/Pegasus</li><li>sample-projects/Misc/Transition2</li><li>sample-projects/MusicLibrary</li><li>sample-projects/MultilingualBook</li><li>sample-projects/GameCenter</li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/tools/>Tools</small><h2 id=tools>Tools</h2><p>Exporrter plugin for PS, XD</p><ul><li><p>UXP</p><ul><li>export images</li><li>export source code<ol><li><p>traverse photoshop layers</p><p>scenes/pageX/**/*.lua</p><blockquote><p>kwik-exporter\src\photoshop\publishCode.ts</p></blockquote></li><li><p>traverse App/contentX/</p><ul><li>commands/pageX/ for envets</li><li>components/pageX for components such as audios,groups ..</li><li>scenes/pageX for layers from Photoshop and attached animation, button</li></ul><blockquote><p>generate_scene_index\generate_models.lua</p></blockquote></li><li><p>merge the both results to ouput scenes/pageX/index.lua ⭐️</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>sceneName</span> <span style=color:#f92672>=</span> <span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>scene</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#39;controller.scene&#39;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#111>sceneName</span><span style=color:#111>,</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;page01&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{{</span><span style=color:#111>bg</span> <span style=color:#f92672>=</span> <span style=color:#111>{}},</span> <span style=color:#111>{</span><span style=color:#111>layerX</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>types</span><span style=color:#f92672>=</span><span style=color:#111>{</span><span style=color:#111>button</span><span style=color:#111>}}}},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>audios</span> <span style=color:#f92672>=</span> <span style=color:#111>{},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>groups</span> <span style=color:#f92672>=</span> <span style=color:#111>{},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>others</span> <span style=color:#f92672>=</span> <span style=color:#111>{},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>timers</span> <span style=color:#f92672>=</span> <span style=color:#111>{},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>variables</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;bg.clickLayer&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>onInit</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#111>scene</span><span style=color:#111>)</span> <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;onInit&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>scene</span>
</span></span></code></pre></div></li></ol></li></ul></li><li><p>develop/UXP/kwik-exporter</p><p>A layer set is exported as one single image if assets/images/pageX has the foler with the same name of the layer set.</p><ul><li><p>export images</p></li><li><p>export props</p><ul><li>output .json/.lua</li></ul><p>develop\UXP\kwik-exporter\plugin\kwik\templates\components\</p><ul><li>layer_image.json</li><li>layer_image.lua</li></ul><p>(TODO) Update develop\Solar2D\template to sync with the two files.</p><p>(TODO) UXP/plugin/kwik/template is a clone of template/App/contentX</p></li></ul></li></ul><pre tabindex=0><code>├─Solar2D
│  ├─robotlegs
│  │  ├─App
│  │  │  ├─book
│  │  │  │  ├─assets
│  │  │  │  │  ├─images
│  │  │  │  │  │  └─page01
│  │  │  │  ├─models
│  │  │  │  │  └─page01
│  │  │  │  │      └─layers
│  │  │  │  └─scenes
│  │  │  │      └─page01
│  ├─template
│  │  ├─App
│  │  │  └─contentX
│  │  │      ├─assets
│  │  │      ├─commands
│  │  │      │  └─pageX
│  │  │      ├─components
│  │  │      │  ├─pageX
│  │  │      │  │  ├─audios
│  │  │      │  │  ├─groups
│  │  │      │  │  ├─interactions
│  │  │      │  │  │  └─page
│  │  │      │  │  ├─others
│  │  │      │  │  │  ├─ext_lib_codes
│  │  │      │  │  │  ├─page
│  │  │      │  │  │  └─store
│  │  │      │  │  ├─timers
│  │  │      │  │  └─variables
│  │  │      │  └─store
│  │  │      ├─models
│  │  │      │  └─pageX
│  │  │      │      ├─events
│  │  │      │      └─layers
│  │  │      └─scenes
│  │  │          └─pageX
│  │  │              ├─animations
│  │  │              ├─images
│  │  │              ├─interactions
│  │  │              ├─physics
│  │  │              └─replacements
│  │  │                  ├─particles
│  │  │                  ├─sprites
│  │  │                  ├─syncAudioText
│  │  │                  ├─videos
│  │  │                  └─www
│  └─tools
│      ├─kwik-editor
└─UXP
    └─kwik-exporter
        ├─plugin
        │  ├─icons
        │  └─kwik
        │      ├─templates
        │      │  ├─components
        │      │  │  └─kwik
        │      │  ├─model
        │      │  │  ├─components
        │      │  │  ├─events
        │      │  │  └─layers
        │      │  └─scenes
</code></pre><p>Editor</p><ul><li><p>Web App (React)</p><p>{{TBI}}</p></li><li><p>Solar2D Desktop App</p></li><li><p>/develop/Solar2D/tools/kwik-editor</p></li></ul><p>REST Server</p><ul><li><p>receives Props and Commands and then renders .lua/.json</p><p>/develop/Solar2D/tools/pegasus-harness</p><p>/develop/Solar2D/tools/pegasus-launcher</p></li></ul><p>Utilities</p><ul><li><p>generating scene/pageX/index.lua</p><p>the table in the index.lua is created by interating files in App/bookX/components and bookX/commands</p></li><li><p>scafolding (optional)</p><p>it outputs .lua files to components and commands folder by reading scene/pageX/index.lua</p><p>/develop/Solar2D/tools/generate_scene_index</p></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/tools/editor/>Editor</small><h3 id=editor>Editor</h3><ul><li>React</li><li>Solar2D</li></ul><hr><p>Kwik functions</p><ul><li><p>Command</p><ul><li><p>File</p><ul><li>Project New</li><li>Project Open</li><li>Project Recent</li><li>Page New</li></ul></li><li><p>Edit</p><ul><li>Paste/Copy components</li><li>Delete<ul><li>pages</li><li>components</li></ul></li></ul></li><li><p>Publish</p><ul><li>Compress PNGs &ndash; TBI notarized compress.app in Kwik</li><li>Assemble PNGs<ul><li>A-Gif or A-PNG</li></ul></li><li>Publish<ul><li>Images</li><li>One page or Selected pages</li><li>Open Solar2D simulator</li><li>options<ul><li>Enable child components &ndash; TBI as layerSet as a group or independent option</li><li>Debug<ul><li>show memory</li><li>(trace/print control)</li></ul></li><li>Spritsheet @2x</li></ul></li></ul></li></ul></li><li><p>Importer for a Kwik3 project</p></li></ul></li><li><p>License</p><ul><li>Perpetual or Subscription</li><li>Activate</li><li>Transfer</li><li>Proxy Settings</li></ul></li><li><p>Template &ndash; TBI as auto update from kwiksher.com and store it as global</p><ul><li>Copy global to local for customization</li></ul></li><li><p>Auto update - TBI</p><ul><li>notarization and store updater.app in kwik5</li></ul></li><li><p>Language</p><ul><li>English or Japanese</li></ul></li></ul><hr><p>Samples</p><ul><li>Afraid (Get Started)</li><li>Actions</li><li>Animations</li><li>Canvas</li><li>Multi Lingual</li><li>Layer Replacements</li><li>Physics</li><li>Project And Pages</li></ul><hr><p>Structure</p><ul><li><p>Project Properties</p><ul><li>Icon</li><li>Splash screen</li><li>Letter/ZoomEven/ZoomStretch</li><li>Navigation Thumbnail</li><li>Auto Bookmark</li><li>Admob</li><li>(Rating)</li><li>IAP<ul><li>simple unlock</li><li>bookshelf</li></ul></li><li>Bookshelf<ul><li>pages</li><li>template</li><li>embedded<ul><li>normal or versions</li></ul></li></ul></li><li>Languages &ndash; TBI as State in kwik5, global</li><li>Upate Template</li></ul></li><li><p>Extended</p><ul><li><p>Normal or Component</p></li><li><p>Page Properties</p><ul><li>Context &ndash; load the page images using the context page</li><li>Scale</li><li>Enable page swipe</li><li>Show in navigation</li><li>Loading option<ul><li>Preload</li><li>Template &ndash; bookshelf template page</li><li>Comic &ndash; enable comic rendering for -panels, balloons, background</li><li>Alias &ndash; bookshelf: the page alias for a master template page</li></ul></li><li>IAP Unlock</li><li>Show Ad</li><li>Record screen</li></ul></li><li><p>Page components</p><ul><li>Audios<ul><li>Audio<ul><li>global or local</li></ul></li></ul></li><li>Groups<ul><li>Group<ul><li>Change order</li><li>Hide a group</li></ul></li><li>Simple Camera Frame</li><li>Set<ul><li>Group with</li><li>Audio with</li><li>Variable with</li></ul></li><li>Common<ul><li>Hide</li><li>Simple Responsive</li><li>Random Position</li><li>Scale</li><li>Infinity Scroll</li></ul></li></ul></li><li>States local<ul><li>State</li></ul></li><li>Actions<ul><li>Action</li></ul></li><li>Timers<ul><li>Timers</li></ul></li><li>Variables<ul><li>Variable<ul><li>global or local</li><li>keep track</li></ul></li></ul></li><li>Physics<ul><li>Environment</li><li>(Joints)</li><li>(Collisions)</li></ul></li><li>External codes &ndash; global, local, self, ace editor?<ul><li>libraries</li><li>codes<ul><li>onInit</li><li>onCreate</li><li>onShow</li><li>onHide</li></ul></li></ul></li></ul></li><li><p>Layer Properties</p><ul><li><p>Common</p><ul><li>Hide</li><li>Simple Responsive</li><li>Random Position</li><li>Scale</li><li>Export<ul><li>as Jpeg</li><li>save as Shared Asset</li></ul></li><li>Render as</li><li>Infinity Scroll</li><li>Set<ul><li>Group with</li><li>Audio with</li><li>Variable with</li></ul></li><li>States<ul><li>Gloabl</li><li>Local</li><li>Object</li></ul></li><li>Extenal Code - self</li></ul></li><li><p>Set Language &ndash; TBI as State function gloal, local, object</p></li><li><p>Animation</p><ul><li>Linear</li><li>Path</li><li>Switch Image to</li><li>Rotation</li><li>Pulse</li><li>Bounce</li><li>Blink</li><li>Shake</li><li>Filter</li></ul></li><li><p>Replacements</p><ul><li>Spritesheet<ul><li>Simple</li><li>Texture Packer</li><li>Adobe Animate</li><li>(Spine)</li></ul></li><li>Sync Text Audio<ul><li>(Lip Sync - Spine and Papagayo)</li></ul></li><li>Video<ul><li>normal or PNGs</li></ul></li><li>Web</li><li>Vector</li><li>Map</li><li>Multiplier</li><li>Particles<ul><li>Importer</li><li>Editor</li></ul></li><li>Text<ul><li>Dynamic</li><li>Static</li><li>Input</li></ul></li><li>Countdown</li><li>Mask</li></ul></li><li><p>Interactions</p><ul><li>Button</li><li>Drag</li><li>Swipe</li><li>Pinch</li><li>Spin</li><li>Shake</li><li>Scroll</li><li>Parallax (Accelerometer)</li><li>Canvas</li><li>(Snapeshot Eraser)</li><li>(Push - OneSignal)</li></ul></li><li><p>Physics</p><ul><li>Body</li><li>Set Force</li><li>Set Joint with</li><li>Set Collision with</li></ul></li></ul></li></ul></li></ul><hr></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/tools/plugins/>UXP Plugins</small><h3 id=uxp-plugins>UXP Plugins</h3><p>Kwik4 created a project folder where psd files are placed.
Kwik5 you can creat a folder for your psd files on your own. When Kwik Exporter opens, it asks for the folder location.</p><h4 id=exporter-plugins-for-ps-xd>Exporter plugins for PS, XD</h4><ul><li><p>develop/UXP/kwik-exporter</p><ul><li><p>New</p></li><li><p>Open psd files from a folder (TODO)</p><p>the folder name/path is saved in a json</p></li><li><p>Publish selected psd files (TODO)</p><ul><li><p>Drag & Drop to change the order of psd files</p><p>one psd file corresponds one <strong>scene</strong> in Solar2D code.</p><p>a psd can be marked for being ignored</p></li></ul></li><li><p>Export images</p></li><li><p>Export code</p></li></ul><img src=../img/2022-06-13-10-52-00.png width=400><p><strong>Publish</strong> all images of selected documents</p><ol><li>mark checkboxes of document&rsquo;s names you want to publish</li></ol><p><a href=https://developer.adobe.com/xd/uxp/uxp/reference-spectrum/User%20Interface/>https://developer.adobe.com/xd/uxp/uxp/reference-spectrum/User%20Interface/</a></p><p>spectrum tableview is not yet supported in UXP</p><p><a href=https://react-spectrum.adobe.com/react-spectrum/TableView.html>https://react-spectrum.adobe.com/react-spectrum/TableView.html</a></p><pre><code>- Ctl(Win) or Option(Mac) + Space key toggles selection for the focused row

- toggle all on/off
</code></pre><ol><li><p>clcik</p><p>opendFileDialog asks a <strong>book folder</strong> under App folder.</p><img src=../img/2022-06-13-10-57-57.png width=400></li></ol><p><strong>Active Document</strong> Export Images for an active document document</p><ol><li><p>open .psd by cliking the psd name in the list</p><p>Kwik4_1280x1920.psd with background image 1440x2776</p><blockquote><p>kwik5 does not request the canvas size of .psd as 1280x1920 when publising</p></blockquote><img src=../img/2022-05-24-18-46-26.png width=600></li><li><p>clcik Export Images</p><p>openFileDialog asks a <strong>book folder</strong> under App folder.</p><img src=../img/2022-05-24-18-32-56.png width=600></li></ol><p><strong>Active Document</strong> Export each image of a layerSet(layer group) in .psd</p><ol><li><p>create a folder with same name as layerSet in book/assets/images/FILE_NAME_OF_PSD</p><p>for instance, &ldquo;bg&rdquo; is a layer group of kwik4_1280x1920.psd</p><img src=../img/2022-05-24-19-44-47.png width=400><p>you can manually create the bg folder under App/book/assets/images/kwik4_1280x1920 so the export images function knows where to put images of sub layers of a group.</p><blockquote><p>If such no folder with the same name as a layer group, the one image of a layer group is exported.</p></blockquote><img src=../img/2022-05-24-19-47-35.png width=400>
<img src=../img/2022-05-24-19-57-39.png width=400></li></ol><blockquote><p>A concept of Kwik5 is to use App folder as a project base. It is a kind of file based database where .json, .lua and assets files are placed. No more .kwk xml file of Kwik4</p></blockquote><blockquote><p>Direclty Editing a file under App folder while running Solar2D Simulator means a live editing. No more build4 folder of Kwik4 either</p></blockquote><p><strong>TODO</strong> Active Document > Layer Selection Only</p></li></ul><hr><h4 id=editor-frontend-for-ps-xd>Editor Frontend for PS, XD</h4><blockquote><p>ref Anima plugin for Adobe XD</p></blockquote></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/tools/utilities/>Utilities</small><h3 id=utilities>Utilities</h3><p>/develop/Solar2D/tools/generate_scene_index (TODO update ⭐️)</p><ul><li><p>generating scene/pageX/index.lua</p><p>index.lua is created by iterating files from</p><ul><li>App/conentX/scene/pageX</li><li>App/contentX/components/pageX</li><li>App/conentX/commands/pageX</li></ul></li><li><p>scafolding (optional)</p><p>it outputs .lua files to components and commands folder by reading scene/pageX/index.lua</p></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/tools/webapp/>REST Server</small><h3 id=rest-server>Rest Server</h3><p>Get</p><p>returns .json of layer components(classes) or events/commands. It also returns default values of compoent properties</p><p>POST</p><p>receives Props of layers and Commands and then renders .lua components/commands.
It also stores the request params in .json</p><ul><li>/develop/Solar2D/tools/pegasus-harness</li><li>/develop/Solar2D/tools/pegasus-launcher</li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/workflow/>Workflow</small><h2 id=workflow>Workflow</h2><p>Overview</p><ol><li><p>put .png/.jpg into App/contentX/assets/images manually or use kwik-export plugin for Ps/XD to publish images to App folder</p><ul><li>images without coordinates</li><li>images with coordinates from Ps, XD with kwik-export plugin<ul><li>models/assets/images/*.json</li></ul></li></ul></li><li><p>kwik-editor traverses the assets folder to output .json for models and .lua for scenes/pageX and components/pageX</p><ul><li>kwik-generate-model</li><li>kwik-generate-index</li><li>kwik-scaffold-lua</li></ul><p>you can edit props or positions of images or attach a type of class such as animation, button &mldr;</p><p>you can creat an event and a corresponding action of code such as playAnimation, hideLayer, playAudio &mldr;</p><blockquote><p>if you manually add a .lua file, you need to update scenes/pageX/index.lua too. You can use kwik-generate-index that traverses pageX folder of commands, components and scenes for synclonizing the lisf of .lua for pageX context defined in the index.lua.</p></blockquote></li></ol><h2 id=1-assets>1. assets</h2><pre tabindex=0><code>├── App
    ├── contentX
        ├── assets
            ├── audios
            │   ├── sounds
            │   ├── streams
            │   └── sync
            ├── images
            │   └── pageX
            │       ├── bg.png
                    ├── folder
                    |      ├─  .png
                    |      └── .png
                    └── .png
</code></pre><h3 id=1-1-images>1-1 images</h3><ul><li><p>Manually put images in App/contentX/images/pageX folder</p><ul><li><p><strong>kwik-generate-model</strong></p><p>it creates .json under models folder</p></li></ul></li></ul><p>Alternatively</p><ul><li><p>Photoshop</p><ul><li>select .psd files to export</li><li><strong>kwik-export plugin</strong><ul><li><p>create folders for a layer group in order to export each image of the group</p></li><li><p>the plugin exports index.json too</p><ul><li>assets/images/.png</li><li>models/scenes/pageX/index.json</li></ul><pre tabindex=0><code>├── models
│   ├── assets
│   │   ├── audios
│   │   │   ├── sounds
│   │   │   ├── streams
│   │   │   └── sync
│   │   ├── index.json
│   │   ├── images
|   |         ├── pageX
|   |               ├── layerX.json (ReadOnly)
│   ├── pageX
│       ├── index.json
│       └── layers
│           ├── layerX.json (RW from KwikLiveEditor)
</code></pre></li></ul></li></ul><p>later you edit it with KwikLiveEditor, then layerX.json is created under models/pageX/layers folder. images/pageX/layerX.json is readonly.</p></li></ul><h3 id=1-2-audios>1-2 audios</h3><p>put audio files under assets/audios folder</p><pre tabindex=0><code>.
├── assets
│   ├── audios
│   │   ├── sounds
│   │   │   └── ballsCollide.mp3
│   │   ├── streams
│   │   │   ├── Gentle-Rain.mp3
│   │   │   └── Tranquility.mp3
│   │   └── sync
│   │       ├── en
│   │       │   ├── cat.mp3
│   │       │   ├── kwik.mp3
│   │       │   └── narration.mp3
│   │       ├── jp
│   │       │   ├── cat.mp3
│   │       │   ├── kwik.mp3
│   │       │   └── narration.mp3
│   │       ├── pageX_Text1.mp3
│   │       ├── pageX_Text1.txt
│   │       ├── page02_Text1.mp3
│   │       └── page02_Text1.txt
</code></pre><ul><li><p><strong>kwik-generate-model</strong></p><p>creates .json under models/assets/audios</p><pre tabindex=0><code>├── models
│   ├── assets
│   │   ├── audios
│   │   │   ├── sounds
|   |   |   |     ├── audioX.json
│   │   │   ├── streams
│   │   │   └── sync
│   │   ├── index.json
│   │   ├── images
│   ├── pageX
│       ├── index.json
</code></pre></li><li><p><strong>kwik-editor</strong></p><p>audio files are not subjected to a page yet. So you can assign an audio to any pages with the tool.</p><ol><li><p>edit audio properties</p><ul><li>auto play</li><li>channnel</li><li>&mldr;</li></ul><p>models/assets/audios/sounds/audioX.json</p><pre tabindex=0><code>{
    &#34;name&#34;:&#34;audioX&#34;,
    &#34;autoPlay&#34;:false,
    &#34;channel&#34;:2,
    &#34;type&#34;:&#34;sound&#34;
}
</code></pre></li><li><p>you assign an audio entry to a page with kwik-editor. Then the tool adds the entry in models/pageX/index.json</p></li></ol><p><strong>pageX</strong>/index.json</p><pre tabindex=0><code>{
    &#34;components&#34;: [
        {
            &#34;audios&#34;: [
                {&#34;name&#34;:&#34;audioX&#34;, &#34;type&#34;:&#34;sound&#34;},
            ]
        }
    ],
    &#34;events&#34;: [],
    &#34;layers&#34;: []
}
</code></pre></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/workflow/lua/>Lua Code</small><h2 id=lua>Lua</h2><p>you don&rsquo;t need to use kwik-generate-model nor kwik-editor to output lua files. You can skip making .json files of these tools, and you create a lua file manually into a folder, and append a name of additional file to scenes/pageX/index.lua</p><ul><li>commands/pageX/**/*.lua</li><li>components/pageX/**/*.lua</li><li>scenes/pageX/**/*.lua</li></ul><p>At runtime, Kwik Code Framework reads scenes/pageX/index.lua to load each .lua files of pageX. The object names for commands, compnents, scenes are defined in the index.lua.</p><ul><li>scenes/pageX/index.lua</li></ul><p><strong>kwik-genereate-index</strong> is a tool to update the index.lua from traversing the folders above.</p><ol><li>create .lua for commands, components, layers of pageX,</li><li>run the tool to generate scenes/pageX/index.lua</li></ol><blockquote><p>you don&rsquo;t need to use kwik-generate-index tool. You can manually edit it but it would be better to generate the index.lua with the tool.</p></blockquote><blockquote><p>Alternatively, there is another tool named <strong>kwik-scaffold-lua</strong>. This tool scafolds .lua files from scenes/pageX/index.lua. The tool does not overwrite .lua if exists, and may delete .lua if not defined in index.lua</p></blockquote><p>Which Workflow do you like?</p><ul><li><p>A</p><p>use kwik-generate-index everytime after you update commands, components, senes lua files.</p></li><li><p>B</p><p>use kwik-scaffold-lua to create a lua for commands, components, scenes then edit the lua file.</p></li></ul><blockquote><p>I like A because thinking about files/folders strcure with a file explorer, and coping/pasting an exsiting file could be easier when coding is in progress.</p></blockquote><blockquote><p>To initiate a project, B would work quicky to make a skelton structure.</p></blockquote></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/workflow/workflow/>REST API</small><h2 id=rest-api---yaml>REST API - YAML</h2><ol><li><p>put images in App/demo/assets/page01</p><ul><li>logo</li><li>panel</li><li>message</li><li>button</li><li>background</li><li>shape1</li><li>shape2</li></ul><p>Tool</p><ul><li>Finder/File Expolorer</li><li>Plugin for Photoshop or XD will export images</li><li>Editor<ul><li>html post image form</li></ul></li><li>network<ul><li><p>display.loadRemoteImage</p><p><a href=https://solar2d.com/images/logo.png>https://solar2d.com/images/logo.png</a></p><blockquote><p>access images of XD shared view? or able to load them all?</p></blockquote></li><li><p>network.download</p></li></ul></li></ul></li><li><p>Create layer structure</p><ul><li>Editor lists the images<ul><li>Order Top/Bottom/Up/Down</li></ul></li></ul><p>frontEnd uses <strong>Adobe React Spectrum</strong> (in future, support screen reader etc)</p><p>REST API to get the list of images and post the orderd list back</p><p>GET /layers</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>  - <span style=color:#f92672>background</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>button</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>logo</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>message</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>panel</span><span style=color:#111>:</span>
</span></span></code></pre></div><p>Change the order of layers</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>logo</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>panel</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>message</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>button</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>background</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span></code></pre></div></li><li><p>Set animation and button</p><blockquote><p>test KwikTheCat for evaluation</p></blockquote><p>one by one</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers/logo</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>classes</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>- <span style=color:#ae81ff>animation</span>
</span></span></code></pre></div><p>Or</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers/logo</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Content-Type</span><span style=color:#111>:</span> <span style=color:#ae81ff>application/yaml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>transition</span><span style=color:#111>:</span> <span style=color:#ae81ff>bounce</span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>params</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>height</span><span style=color:#111>:</span> <span style=color:#ae81ff>400</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>width</span><span style=color:#111>:</span> <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>time</span><span style=color:#111>:</span> <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>iterations</span><span style=color:#111>:</span> <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p><strong>GUI</strong> in Edtior(Solar2D) for transformation, draggable to set a position</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers/panel/button</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>classes</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>- <span style=color:#ae81ff>button</span>
</span></span></code></pre></div><p>All together</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>logo</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>classes</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>animation</span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>panel</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>message</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>button</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>classes</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>button</span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>background</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span></code></pre></div></li></ol></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/get_started/>Get Started</small><p>TODO</p><ul><li><p><input disabled type=checkbox> swipe page or A/D keys for navigation</p><ul><li><p><input disabled type=checkbox> main.lua</p><ul><li><p>rendered with Solar2D Project > Select Book, bookFolder</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;controller.index&#34;</span><span style=color:#111>).</span><span style=color:#111>bootstrap</span><span style=color:#111>({</span><span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;book&#34;</span><span style=color:#111>,</span> <span style=color:#111>sceneIndex</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>position</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>x</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>}})</span> <span style=color:#75715e>-- scenes.index</span>
</span></span></code></pre></div></li></ul></li><li><p><input disabled type=checkbox> scenes/index.lua</p><ul><li><p>Active Document index should be set to main.lua&rsquo;s sceneIndex</p><img src=./img/2022-07-25-13-37-55.png width=300></li></ul></li><li><p><input disabled type=checkbox> mediators/pageXMediator.lua</p><ul><li>when publishing, create the file.</li></ul></li></ul></li><li><p><input checked disabled type=checkbox> test layer groups and add how to work with a layer group in get started</p></li><li><p><input disabled type=checkbox> clean image template lua</p></li><li><p><input disabled type=checkbox> add animation and button</p></li><li><p><input disabled type=checkbox> add audio & video</p></li></ul><h1 id=get-started>Get Started</h1><p>{{ %toc% }}</p><ol><li><p>Open Adobe UXP Developer Tool</p><p>Add Plugin to select develop/UXP/kwik-exporter/dist</p><blockquote><p>TODO alpla release folder structure may be different to the current develop</p></blockquote><img src=./img/2022-07-02-20-29-05.png width=600><p>Load it</p><img src=./img/2022-07-23-20-01-45.png width=600><p>Kwik Exporter Panel apppears</p><img src=./img/2022-07-23-20-02-58.png width=400></li><li><p>Photoshop Files > Open</p><p>you can select the following folder that comes with demo .psd files and kwikconfig.json. You may open a folder of yours which contains psd files.</p><ul><li><p>sample-projects/SingleBook/book01</p><ul><li>page1.psd</li><li>page2.psd</li><li>kwikconfig.json</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;book one&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;output&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;../../Solar2D/src/App/book&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;pages&#34;</span><span style=color:#111>:[</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#f92672>&#34;psd&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;page01.psd&#34;</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;name&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;page one&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#f92672>&#34;psd&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;page02.psd&#34;</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;name&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;page two&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>  <span style=color:#111>]</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></li></ul><blockquote><p>TODO Project Name Text Box to display a selected folder name as default.</p></blockquote><blockquote><p>TODO User can change it and Kwik uses it for a folder name when publshing</p></blockquote><blockquote><p>TODO kwikconfig.json will be created in the selected folder.</p></blockquote></li><li><p>Double Click the one of .psd in the list to open for editing.</p><img src=./img/2022-07-23-20-05-50.png width=600></li><li><p>Solar2D Project > Select Book</p></li></ol><ul><li><p>New button, a set of Solar2D project will be generated to a selected folder.</p></li><li><p>Select Book</p><p>please select an output folder where each psf files are published. It must be under App folder.</p><img src=./img/2022-07-23-20-10-03.png width=400>
<img src=./img/2022-07-23-20-16-18.png width=300></li></ul><ol><li><p>Publish</p><p>selected psd files are publihsed to App/book folder</p><img src=./img/2022-07-23-20-09-31.png width=400><ul><li><p>checkbox all</p><p>it will select all the psd files in the list</p></li><li><p>Input text box</p><p>you can input the index number of psd files to be published for example,</p><p>0, 2-3</p></li><li><p>Publish button</p><p>Export Settings Dialog appears, click Export</p><blockquote><p>TODO show the project name with the default output folder</p></blockquote><img src=./img/2022-07-02-20-46-39.png width=350><ul><li><p>Browse button</p><p>Select the folder for output if you like to change the destination. The default is defined in kwikconfig.json as <strong>"../../Solar2D/src/App/book"</strong></p></li></ul></li><li><p>Kwik will publish images/source code. You can find them in</p><blockquote><p>TODO change dist to src with SimpleBook sample</p></blockquote><img src=./img/2022-07-02-21-01-08.png width=300></li></ul></li><li><p>Active Document</p></li></ol><ul><li><p>Export Images</p></li><li><p>Export Code</p><img src=./img/2022-07-23-20-23-00.png width=300></li></ul><h2 id=solar2d-simulator>Solar2D Simulator</h2><ol><li><p>Open main.lua in Solar2D/src with Solar2D Simulator</p><p>TODO UXP::Publish to include swipe page or A/D keys for navigation ⭐️</p><p>kwiconfig.lua</p><pre tabindex=0><code>debug = {enable = true, navigation= &#34;swipe/keys&#34;}
</code></pre></li></ol><h3 id=custom-code>Custom Code</h3><p>you can put your own code into commands and scenes folder. Kwik Exporter traverses folders of Solar2D project to integrate your additional files.</p><ul><li>commands/*.lua</li><li>scenes/*.lua</li></ul><img src=./img/2022-07-23-20-34-40.png width=300><p>for instance, myrect.lua calls myEvents.testHandler when user taps the rect.</p><p>The $weight is a meta variable. A scene componet(layer or your custom code)with lower value will be placed top. The top layer from Photoshop is zero. Then values are increases to until the background layer. For your custom code , you can use minus or positive with decimal. For example, myrect is -2, mycircle is -1. If you change weight values of custom code files, don&rsquo;t forget to publish code again.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- $weight=-2</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_M</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>init</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>create</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>sceneGroup</span> <span style=color:#f92672>=</span> <span style=color:#111>UI.scene</span><span style=color:#111>.</span><span style=color:#111>view</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>obj</span> <span style=color:#f92672>=</span> <span style=color:#111>display.newRect</span><span style=color:#111>(</span> <span style=color:#111>sceneGroup</span><span style=color:#111>,</span> <span style=color:#111>display.contentCenterX</span><span style=color:#111>,</span> <span style=color:#111>display.contentCenterY</span><span style=color:#f92672>-</span><span style=color:#ae81ff>100</span><span style=color:#111>,</span> <span style=color:#ae81ff>100</span><span style=color:#111>,</span> <span style=color:#ae81ff>100</span> <span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#111>obj</span><span style=color:#111>:</span><span style=color:#111>setFillColor</span><span style=color:#111>(</span><span style=color:#ae81ff>0.2</span><span style=color:#111>,</span><span style=color:#ae81ff>0.2</span><span style=color:#111>,</span><span style=color:#ae81ff>0.2</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#111>obj</span><span style=color:#111>:</span><span style=color:#111>addEventListener</span><span style=color:#111>(</span><span style=color:#d88200>&#34;tap&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>    <span style=color:#111>UI.scene</span><span style=color:#111>:</span><span style=color:#111>dispatchEvent</span><span style=color:#111>({</span>
</span></span><span style=display:flex><span>      <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;myEvents.testHandler&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>      <span style=color:#111>UI</span> <span style=color:#f92672>=</span> <span style=color:#111>UI</span>
</span></span><span style=display:flex><span>    <span style=color:#111>})</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>didShow</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>didHide</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span>  <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>destory</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>_M</span>
</span></span></code></pre></div><p>myEvents.testHandker.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>instance</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;commands.kwik.baseCommand&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>function</span> <span style=color:#111>(</span><span style=color:#111>params</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>e</span>     <span style=color:#f92672>=</span> <span style=color:#111>params.event</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>UI</span>    <span style=color:#f92672>=</span> <span style=color:#111>e.UI</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;commands.myEvents.testhander&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>UI.scene</span><span style=color:#111>:</span><span style=color:#111>dispatchEvent</span><span style=color:#111>({</span>
</span></span><span style=display:flex><span>      <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;myAction&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>      <span style=color:#111>UI</span> <span style=color:#f92672>=</span> <span style=color:#111>UI</span>
</span></span><span style=display:flex><span>    <span style=color:#111>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>instance</span>
</span></span></code></pre></div><p>You can find your custom code are inserted in scenes/{PSD FILENAME}/index.lua. The layers are sorted internally by values of meta weight variables.</p><img src=./img/2022-07-23-20-46-52.png width=600><hr><h2 id=layer-groups>Layer Groups</h2><p>You can export images of a layer group individually.</p><img src=./img/2022-07-25-13-12-57.png width=300><p>Select layer groups and then click Unmerge button.</p><img src=./img/2022-07-25-13-13-44.png width=300><p>If you want to cancel a layer group to be unmerged, Check it and click Cancel button. It will disppaer from the list.</p><img src=./img/2022-07-25-13-16-15.png width=300><p>The source files and the images are exported when you publish.</p><img src=./img/2022-07-25-13-19-38.png width=300><blockquote><p>TODO fix the bug that unmerged group is not indexed at the right position in index.lua</p></blockquote><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>scene</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#39;controller.scene&#39;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#111>sceneName</span><span style=color:#111>,</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;kwik4_1280x1920&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>bg</span><span style=color:#f92672>=</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#111>}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>copyright</span><span style=color:#f92672>=</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#111>}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>star</span><span style=color:#f92672>=</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#111>}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>hello</span><span style=color:#f92672>=</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#111>}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>mycircle</span><span style=color:#f92672>=</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#111>}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>myrect</span><span style=color:#f92672>=</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#111>}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>GroupA</span><span style=color:#f92672>=</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>                <span style=color:#111>{</span> <span style=color:#111>SubA</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>}</span> <span style=color:#111>},</span>            <span style=color:#111>}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span></code></pre></div><hr><h2 id=create-a-new-project>Create a new project</h2><img src=./img/2022-07-23-20-28-14.png width=300><ol><li><p>Solar2D Project > New button</p><p>TODO dialog for choice</p><ul><li>create a pair of Photoshop & Solar2D project folder</li></ul><pre><code> it will scafold a Solar2D folder of a template to a folder you choose.

 NG Current implementation copies Solar2D folder w/o App

 TODO it would be better to scafold the entire structure of SingleBook sample
</code></pre><ul><li>create a book folder into Photoshop folder</li></ul><p>select a distination folder</p><p>TODO select portrait or landscape</p></li></ol><pre tabindex=0><code> ├── Photoshop
 │   └── book01
 │       ├── kwikconfig.json
 │       └── page01.psd
 └── Solar2D
     ├── rel
     ├── src
     │   ├── App
     │   │   └── book01
     │   ├── Images.xcassets
     │   ├── LaunchScreen.storyboardc
     │   ├── assets
     │   ├── build.settings
     │   ├── commands
     │   ├── components
     │   ├── config.lua
     │   ├── controller
     │   ├── en.lproj
     │   ├── extlib
     │   ├── jp.lproj
     │   ├── main.lua
     │   └── mySplashScreen.png
     ├── templates
     └── tools
</code></pre><hr><h2 id=tools>Tools</h2><h3 id=kwik-editor>Kwik Editor</h3><p>develop/Solar2D/tools/kwik-editor</p><p>This tool visually edits Soar2D/src files of a Kwik project and is harnessed by Pegasus http-server</p><p>TODO Port kwik5/sandbox/Solar2D_MENU/KwikLiveEditor to the folder above. Take diff</p><p>TODO editPorpsTable.lua</p><pre tabindex=0><code>	muiButton.listener = function(event)
		print(&#34;button listener&#34;)
		local map = {}
		local objs = tableHelper:getTextFields()
		for i=1, #objs do
			print(&#34; &#34;..i..&#34;:&#34;, objs[i].text)
			models[i].value = objs[i].text
			map[models[i].name] = objs[i].text -- TODO tonumber?
		end

		local tmplt = UI.appFolder..&#34;/../../templates/components/layer_props&#34;
		local path = UI.currentPage.path ..&#34;/&#34;..UI.currentLayer.name..&#34;_props&#34;
		util.renderer(tmplt, path, map)
</code></pre><img src=./img/2022-07-03-14-34-35.png width=1080><p>↑
Select a layer or an event to review. You can edit values of properties</p><p>TODO each kwik component with default values</p><p>TODO ui components like checkbox/selectors &mldr; for each component ⭐️</p><blockquote><p>react compnents on webview &ndash; can be shared with UXP panel which may send params via http to pegasus in kwik editor</p></blockquote><blockquote><p>current editPorpsTable.lua servers as plain table viewer & editor</p></blockquote><p>TODO save/copy params to .http (YAML) for httpYac</p><p>TODO how to send text to clipboard from Solar2D　⭐️</p><hr><h3 id=harness>Harness</h3><p>develop/Solar2D/tools/pegasus-harness</p><ul><li>test_character_transitions.http</li><li>test_Loading_animation.http</li></ul><p>You can post params with httpYac in VS Code to a Solar2D project</p><p>TODO set Layer varaible with samples</p><p>TODO create models: animation, transition2, button &mldr;, and pegasus-receiver in kwik-editor ⭐️</p><ul><li><p>Animation_bounce.http</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers/logo</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Content-Type</span><span style=color:#111>:</span> <span style=color:#ae81ff>application/yaml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>transition</span><span style=color:#111>:</span> <span style=color:#ae81ff>bounce</span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>params</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>height</span><span style=color:#111>:</span> <span style=color:#ae81ff>400</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>width</span><span style=color:#111>:</span> <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>time</span><span style=color:#111>:</span> <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>iterations</span><span style=color:#111>:</span> <span style=color:#ae81ff>0</span>
</span></span></code></pre></div></li></ul><hr><h3 id=launcher>Launcher</h3><p>develop/Solar2D/tools/pegasus-launcher</p><ul><li>test-Solar2D-SampleCode.http</li></ul><p>You can open a solar2D project from VS Code with httpYac</p><hr><h2 id=coding-manually-in-vs-code>Coding manually in VS Code</h2><ol><li><p>create .lua for commands or components</p></li><li><p>run the follwoing tool to update scenes/pageX/index.lua to append the new .lua to the index.</p><p><strong>/develop/Solar2D/tools/generate_scene_index</strong> is a Solar2D application. You can open the main.lua in Solar2D simulator.</p><p>the table in the index.lua is updated by iterating files in App/bookX/components and bookX/commands</p></li></ol></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/get_started/components/>Components</small><h1 id=components>Components</h1><p>For instance others/page/swip.lua enables a page transition, and audios can have multiple audio objects.</p><blockquote><p>TODO should be page={swipe = {}, keyboard={}</p></blockquote><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>sceneName</span> <span style=color:#f92672>=</span> <span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>scene</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#39;controller.scene&#39;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#111>sceneName</span><span style=color:#111>,</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;kwik4_1280x1920&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>bg</span><span style=color:#f92672>=</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#111>}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>      <span style=color:#111>audios</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>audioOne</span> <span style=color:#f92672>=</span> <span style=color:#111>{},</span> <span style=color:#111>audioTwo</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>groups</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>timers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>variables</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>others</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#d88200>&#34;page.swipe&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;page.keyboard&#34;</span> <span style=color:#111>}</span>
</span></span><span style=display:flex><span>     <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>myAction</span><span style=color:#111>,</span><span style=color:#111>myEvents.testHandler</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>onInit</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#111>scene</span><span style=color:#111>)</span> <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;onInit&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>scene</span>
</span></span></code></pre></div><img src=../img/2022-07-25-17-13-52.png width=300><h2 id=page>page</h2><ul><li>swipe</li><li>keyboard</li><li>common</li></ul><h2 id=audio>audio</h2><hr><h2 id=common-components>Common components</h2><p>You can add a common component to components/common directory</p><img src=../img/2022-07-26-15-46-42.png width=240><p>And let it pass in arguments of bootstrap function in main.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>common</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;myEvent&#34;</span><span style=color:#111>},</span> <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>myComponent</span><span style=color:#f92672>=</span><span style=color:#111>{}}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;controller.index&#34;</span><span style=color:#111>).</span><span style=color:#111>bootstrap</span><span style=color:#111>({</span>
</span></span><span style=display:flex><span>  <span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;book&#34;</span><span style=color:#111>,</span> <span style=color:#111>sceneIndex</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>position</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>x</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>common</span> <span style=color:#f92672>=</span><span style=color:#111>common</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span></code></pre></div><p>Common components are executed after all the layer components of a scene are rendered. So you can access a layer component by UI.layers table.</p><p>for instance, myComponent.lua attaches a tap listener</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>didShow</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>sceneGroup</span> <span style=color:#f92672>=</span> <span style=color:#111>UI.scene</span><span style=color:#111>.</span><span style=color:#111>view</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#111>UI.layers</span><span style=color:#111>.</span><span style=color:#111>bg</span><span style=color:#111>:</span><span style=color:#111>addEventListener</span><span style=color:#111>(</span><span style=color:#d88200>&#34;tap&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#111>event</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>      <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;bg is taaped&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span></code></pre></div></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/get_started/events/>Events & Commands</small><h1 id=events--commands>Events & Commands</h1><h2 id=for-an-event-for-a-page-in-a-book>For an event for a page in a book</h2><p>there are two types</p><ul><li>layer events</li><li>general events</li></ul><p>For example in scenes/pageX/index.lua, buttonOne layer has two events, tap and drag, and for general events (kwik calls it Action) are defined as &ldquo;myAction&rdquo;, &ldquo;myEvents.testHandler&rdquo;</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;kwik4_1280x1920&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>bg</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>buttonOne</span><span style=color:#f92672>=</span><span style=color:#111>{</span> <span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>tap</span><span style=color:#111>,</span> <span style=color:#111>drag</span><span style=color:#111>}}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>      <span style=color:#111>audios</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>groups</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>timers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>variables</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>others</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>}</span>
</span></span><span style=display:flex><span>     <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#d88200>&#34;myAction&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;myEvents.testHandler&#34;</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>onInit</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#111>scene</span><span style=color:#111>)</span> <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;onInit&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>The assicated lua files are these in commands folder</p><ul><li>App/bookX/pageX/commands<ul><li>buttonOne<ul><li>tap.lua</li><li>drag.lua</li></ul></li><li>myAction.lua</li><li>myEvents/testHandler.lua</li></ul></li></ul><hr><h2 id=for-a-common-event-for-a-book>For a common event for a book</h2><p>create a command lua in commands/common directory, for example</p><ul><li><p>commands/common/myEvent.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>instance</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;commands.kwik.baseCommand&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>function</span> <span style=color:#111>(</span><span style=color:#111>params</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>e</span>     <span style=color:#f92672>=</span> <span style=color:#111>params.event</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>UI</span>    <span style=color:#f92672>=</span> <span style=color:#111>e.UI</span>
</span></span><span style=display:flex><span>    <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;commands.myCommonEvent&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>instance</span>
</span></span></code></pre></div><img src=../img/2022-07-26-15-33-26.png width=200></li></ul><p>And let it pass in arguments of bootstrap function in main.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>common</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;myEvent&#34;</span><span style=color:#111>},</span> <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>myComponent</span><span style=color:#f92672>=</span><span style=color:#111>{}}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;controller.index&#34;</span><span style=color:#111>).</span><span style=color:#111>bootstrap</span><span style=color:#111>({</span>
</span></span><span style=display:flex><span>  <span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;book&#34;</span><span style=color:#111>,</span> <span style=color:#111>sceneIndex</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>position</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>x</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>common</span> <span style=color:#f92672>=</span><span style=color:#111>common</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span></code></pre></div><p>context:init function of controller/ApplicationContext.lua automtaically adds it</p><p>this context init is called everytime when a scene is loaded. You can dispatch an event to executre myEvent.lua like this</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>UI.scene</span><span style=color:#111>:</span><span style=color:#111>dispatchEvent</span><span style=color:#111>({</span>
</span></span><span style=display:flex><span>  <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;common.myEvent&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>UI</span> <span style=color:#f92672>=</span> <span style=color:#111>UI</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span></code></pre></div></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/get_started/naming_rule/>Naming Rule</small><h1 id=naming-psd-file-anad-layers-in-documents>Naming .psd file anad layers in documents</h1><ol><li><p>Project and file names</p><p>Avoid long names for your projects and files and, DO NOT use characters like +-&lt;>%,#;!.</p></li><li><p>Layer names</p><p>Before you start adding buttons and animations, follow the rules below. It is much easier to add interactivity with finalized names rather than to edit all of them afterward. Basic rules include:</p><ul><li><p>Only user Western characters are allowed for layer names.</p><ul><li><p>DO NOT use characters such as + - &lt;> %,#;!. for naming layers</p><p>These characters conflict with Lua language. Kwik removes these “strange” characters but, if they were used before in any button actions, it would generate errors during export.</p></li><li><p>Do NOT name your layers starting with numbers.</p><p>For example, a layer named &ldquo;1&rdquo;, will generate an error. A layer named &ldquo;01_Name&rdquo; will also generate an error. However, a layer named &ldquo;Name_01&rdquo; is correct.</p></li><li><p>Do not use Lua commands as names.</p><p>For example, a layer named “if” will conflict with the command if. Some Lua commands are: if, end, local, transition, play. A full list of Lua commands is here. Kwik will generate an alert error if it finds layers named with Lua commands</p></li></ul></li><li><p>Avoid having multiple layers with the same name.</p><p>Kwik will not export the second layer with the same name as it will overwrite the first one, (which will make the Lua code crazy). Kwik will provide an alert error if it finds layers with identical names.</p></li><li><p>Avoid long names.</p><p>All layer names become variables when exported, meaning they use more memory and are more difficult to read. Also, they are going to be shortening anyways, as Lua will not allow variable names with more than 15 characters.</p><ul><li><p>Keep Layer Names Short for text layers</p><p>Text layer names are originally created using the content of the text from the canvas in Photoshop. If you have a long paragraph, the layer name will be the entire content of the long paragraph! Long layer names cause problems in the generated code, so edit the layer names to make them shorter. (This is the most common problem we have seen from our users reporting issues.) Don’t forget all text, besides the ones used in Sync audio feature, also are exported as images.</p></li></ul></li></ul></li><li><p>Grouped layers</p><p>Kwik can export grouped layers as a single image. Use them to create more complex elements (for example, a multi-layered button with text, shadows, etc.), or for the creation of static elements. A common issue is to have all page elements in a group layer that images are not rendered separately. If you have a group with several layers, try to flatten them whenever it is possible. It will make the export process much faster.</p></li><li><p>Button and Animation names of Kwik components</p><p>Although Kwik offers an auto-naming feature, try to enter your own names (follow the rules above). It will help you to quickly edit your actions from the project view. This is a time saver for a project with several actions.</p></li></ol></div><hr></div></body></html>