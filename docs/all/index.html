<!doctype html><html lang=en><head><meta charset=utf-8></head><body><div class=row><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/categories/>Categories</small></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/tags/>Tags</small></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/>Home</small><p>Kwik5 consists of the following two tools,</p><ol><li><p>Kwik exporter for Adobe Photoshop UXP plugin</p><p>it publishes images(1x, 2x, 4x) and lua files of layer properties (x, y, width, height) to a selected App/book folder of a Solar2D project.</p><img src=../img/2022-07-23-20-05-50.png width=1080></li><li><p>kwik Visual Code editor for Solar2D</p><p>the publsiehd project from Kwik exporter has an editing capabiliy on Solar2D simulator</p><p>it attaches animation, button etc to a layer, and updates the project codes(lua files) when you save each properteis of kwik components/events(actions).</p><img src=../img/2022-10-22-21-58-49.png width=600><blockquote><p>circled A, B images are helper objects of Kwik to specify a Layer Animation position from pos A to pos B. You can drag A to starting position, B to ending podistion of a target layer.</p></blockquote><blockquote><p>Lively preview is available when you enter a new value to component properties.</p></blockquote><blockquote><p>Solar2D simulator automatically reloads itself when there are updated files. (Kwik4 needed publsihing code to update a solar2d project)</p></blockquote><p>the kwik editor can read single or mutiple books project.</p></li></ol><p>You can create a single book app and mutiple books project with the following project structure.</p><p>Please set a App/book folder as the output folde when you publsih images/codes with Kwik exporter UXP plugin.</p><ul><li><p>single book</p><img src=../img/2022-10-22-22-11-07.png width=400><blockquote><p>Kwik5 publshies images/codes to App/book folder. (kwik4 publshied everything under build4 folder)</p></blockquote></li><li><p>multiple books (bookstore)</p><blockquote><p>You can work each book folder one by one with Kwik exporter(UXP) to publsih images of psd files of each book. So please select one of book folder when you use Kwik exporter</p></blockquote><blockquote><p>Kwik5 you can publsih each book under App folder directly.
(Kwik4 needed to collect each book project to App folder from build4 folder by a batch file for making a bookshelf app.)</p></blockquote><img src=../img/2022-10-22-22-16-08.png width=300></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/all/>all</small></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/bookstore/>Bookstore</small><h1 id=bookstore>Bookstore</h1><p>TODO</p><ul><li><p><input disabled type=checkbox> library.psd, dialog.psd, textLabels.psd page_custscene.psd</p></li><li><p><input disabled type=checkbox> restore.psd showOverlay will be used</p></li><li><p><input disabled type=checkbox> library filter</p><ul><li><input disabled type=checkbox> All/Downloaded/NotPurchased</li></ul></li><li><p><input disabled type=checkbox> build.settings</p><ul><li><input disabled type=checkbox> omit App/bookX/assets</li></ul></li><li><p><input disabled type=checkbox> library page portrait</p></li><li><p><input disabled type=checkbox> restore</p><ul><li><input disabled type=checkbox> download all</li><li><input disabled type=checkbox> status recovered (downloaded) book</li></ul></li><li><p><input disabled type=checkbox> scroll view for library/table page</p></li><li><p><input disabled type=checkbox> UXP</p><ul><li><p><input disabled type=checkbox> cp components/bookstore/booktoreX.lua to bookTOC/scenes/library</p></li><li><p><input disabled type=checkbox> add filter in library page</p><blockquote><p>Can create a storybook like? navigation bar?</p></blockquote></li></ul></li><li><p><input disabled type=checkbox> Test versions</p></li></ul><p>Bookstore app contains the multiple kwik projects(books) inside. The lua files of each book are embedded in the app binary but the assets such as images, audio files of each book are not embedded in the app binary. They are downloadable from a web server. Due to Apple&rsquo;s regulation, Solar2D does not allow to load the lua files (programming code) via Internet. The lua files must be embedded in the app binary but the other assets can be transfered from http server to the app.</p><p>A library page controls which book to be loaded with In App Purchase. User clicks a book icon on thubnail view on a library page, and a purchase dialog appears if user wants to buy one. A project called bookTOC(Table Of Content) contains library.psd and dialog.psd</p><p>When you like to add new books, you need to update the model.lua of bookTOC to include a new book information.</p><blockquote><p>You can create as many as books but Bookstore is not designed to hold hundreds of books.</p></blockquote><hr><h2 id=sample-file>Sample file</h2><p>Please download the sample project from here.</p><pre tabindex=0><code>  Photoshop
   ├── bookFree
   │   ├── page1.psd
   │   └── page2.psd
   ├── bookOne
   │   ├── page1.psd
   │   └── page2.psd
   └── bookTOC
       ├── dialog.psd
       └── library.psd

  Solar2D
    ├── App
    │   ├── bookFree
    │   ├── bookOne
    │   └── bookTOC
    │
    ├── components
    |    ├── bookstore
    |        └── model.lua
    └── main.lua

  BookServer
    ├── compress_assets
    |       └── main.lua
    └── bookstore
        ├── bookFree
        └── bookOne
</code></pre><p>BooKServer</p><ul><li><p>copy_books script archives each assets.zip of books into BookServer/bookstore folder.</p></li><li><p>Using node.js, install http-server and run</p><pre tabindex=0><code>cd BookServer
http-server
</code></pre><p>Set the url of http://localhost:8080/bookstore to Solar2D/components/bookstore/model.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>M</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;components.bookstore.model.base&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#111>M.debug</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span>
</span></span><span style=display:flex><span><span style=color:#111>M.URL</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;http://localhost:8080/bookstore/&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#111>...</span>
</span></span></code></pre></div></li></ul><p>Solar2D</p><ul><li>Open main.lua with the simulator</li></ul><hr><h2 id=solar2d>Solar2D</h2><p>Solar2D project has main.lua in the root directory.</p><pre tabindex=0><code>    ├─App
    │  ├─book01
    │  ├─book02
    │  └─bookTOC
    ├─extlib
    ├─lib

    build.settings
    config.lua
    main.lua
</code></pre><ul><li><p>main.lua</p><p>There is just one line to load &ldquo;bookTOC&rdquo; book</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;controller.index&#34;</span><span style=color:#111>).</span><span style=color:#111>bootstrap</span><span style=color:#111>({</span><span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;bookTOC&#34;</span><span style=color:#111>,</span> <span style=color:#111>sceneIndex</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>})</span> <span style=color:#75715e>-- scenes.index</span>
</span></span></code></pre></div><p>App/bookTOC/scenes/index.lua has a table of page names, so sceneIdex = 1 means to open library page.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>scenes</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span> <span style=color:#d88200>&#34;library&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span> <span style=color:#d88200>&#34;dialog&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>scenes</span>
</span></span></code></pre></div></li><li><p>build.settings</p><p>You may need to add permissions for your app. The following permissions are default</p><pre tabindex=0><code>    android  = {
      usesPermissions  = {
          &#34;android.permission.INTERNET&#34;,
          &#34;android.permission.WRITE_EXTERNAL_STORAGE&#34;,
          &#34;com.android.vending.BILLING&#34;,
          },
    },
</code></pre></li><li><p>config.lua</p><p>please add google license key for android device.</p><pre tabindex=0><code>  license =
        {
            google =
            {
                key = &#34;Please set your google license key&#34;,
            },
        },
</code></pre></li></ul><hr><h2 id=booktoc>bookTOC</h2><p><strong>library.psd</strong> shows the thumbnail of books and the buttons for purchase and download</p><img src=./img/2022-08-07-20-47-32.png width=600><ul><li><p>Each {{bookName}}Icon</p><p>it is a placeholder and the following layers are copied to the position of each {{bookName}}Icon</p><ul><li>downloadBtn</li><li>savedBtn</li><li>savingTxt</li><li>purchaseBtn</li></ul></li><li><p>restoreBtn</p><p>it restores a book purchased history from one of online store(Apple, Google, Amazon)</p></li></ul><p><strong>dilaog.psd</strong> shows a book image and the IAP buttons and information text</p><img src=./img/2022-08-07-20-47-05.png width=300><ul><li>downloadBtn</li><li>savedBtn</li><li>savingTxt</li><li>purchaseBtn</li><li>infoTxt</li><li>hideOverlayBtn</li></ul><hr><h2 id=bookfree>bookFree</h2><ul><li><p>page1.psd</p><img src=./img/2022-08-07-19-56-47.png width=300></li></ul><ul><li><p>page2.psd</p><p>shows the following goto buttons</p><img src=./img/2022-08-07-20-05-08.png width=300></li><li><p>Goto TOC</p></li><li><p>GOto page1</p></li><li><p>Goto Next Book</p></li></ul><hr><h2 id=bookone>bookOne</h2><p>page1.psd</p><img src=./img/2022-08-07-20-08-54.png width=300><ul><li>page2.psd</li></ul><img src=./img/2022-08-07-20-09-39.png width=300><ul><li>Goto TOC</li><li>GOto Title</li><li>Goto Previous Book</li></ul><hr><h2 id=bookserver>BookServer</h2><p>Please use the script to zip the image, audio files as zip files</p><ul><li><p>compress_assets/main.lua for Corona Simulator</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>command.setServerFolder</span><span style=color:#111>(</span><span style=color:#d88200>&#34;macos&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;bookstore&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--command.setServerFolder(&#34;win32&#34;, &#34;bookstore&#34;)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>books</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>onLineImages</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;assets/images/page1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;assets/images/page1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#111>...</span>
</span></span></code></pre></div></li></ul><pre tabindex=0><code></code></pre></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/bookstore/components/>Components</small><h1 id=components>Components</h1><p>bookstore consists of the following files and modules</p><nav id=TableOfContents><ul><li><a href=#photoshop-files>Photoshop files</a><ul><li><a href=#librarypsd>library.psd</a></li><li><a href=#dialogpsd>dialog.psd</a></li><li><a href=#tablepsd>table.psd</a></li></ul></li><li><a href=#solar2d-components>Solar2D components</a><ul><li><a href=#model>model</a></li><li><a href=#view>view</a></li><li><a href=#controller>controller</a></li></ul></li></ul></nav><h2 id=photoshop-files>Photoshop files</h2><h3 id=librarypsd>library.psd</h3><img src=../img/2022-08-07-14-48-27.png width=600><h3 id=dialogpsd>dialog.psd</h3><img src=../img/2022-08-07-14-48-56.png width=400><h3 id=tablepsd>table.psd</h3><img src=../img/2022-08-27-11-13-47.png width=600><hr><h2 id=solar2d-components>Solar2D components</h2><ul><li><p>App/bookTOC</p><pre tabindex=0><code>├── App
│   ├── bookFree
│   ├── bookOne
│   ├── bookTOC
|        ├── components
|        |      ├── library
|        |      |      ├── pages
|        |      |           └── bookstore.lua ⭐️
|        |      └── dialog
|        └── scenes
|              ├── library
|              |      ├── bg.lua
|              |      ├── bookFreeIcon.lua
|              |      ├── bookOneIcon.lua
|              |      ├── downloadBtn.lua
|              |      ├── purchaseBtn.lua
|              |      ├── restoreBtn.lua
|              |      ├── savedBtn.lua
|              |      ├── savingTxt.lua
|              |      └── index.lua　 ⭐️
|              └── dialog
|                     ├── bg.lua
|                     ├── bookIcon.lua
|                     ├── downloadBtn.lua
|                     ├── hideOverlayBtn.lua
|                     ├── infoTxt.lua
|                     ├── purchaseBtn.lua
|                     ├── savedBtn.lua
|                     ├── savingTxt.lua
|                     └── inddx.lua
│
├── components
    ├── bookstore
        ├── controller
        ├── model
        ├── smc
        ├── view
        ├── index.lua
        └── model.lua ⭐️
</code></pre></li></ul><p>bookstore component is defined in components.pages table. This calls bookstore.lua</p><ul><li><p>App/bookTOC/scenes/library/index.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>sceneName</span> <span style=color:#f92672>=</span> <span style=color:#111>...</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>--</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>scene</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#39;controller.scene&#39;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#111>sceneName</span><span style=color:#111>,</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>      <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;library&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>      <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>{</span>  <span style=color:#111>bg</span> <span style=color:#f92672>=</span><span style=color:#111>{</span> <span style=color:#111>}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>            <span style=color:#111>{</span>  <span style=color:#111>bookIcon</span> <span style=color:#f92672>=</span><span style=color:#111>{</span> <span style=color:#111>}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>            <span style=color:#111>...</span>
</span></span><span style=display:flex><span>            <span style=color:#111>...</span>
</span></span><span style=display:flex><span>      <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>audios</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>groups</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>timers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>variables</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>pages</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#d88200>&#34;bookstore&#34;</span> <span style=color:#111>}</span>
</span></span><span style=display:flex><span>      <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>onInit</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#111>scene</span><span style=color:#111>)</span> <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;onInit&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>  <span style=color:#111>})</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>--</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>return</span> <span style=color:#111>scene</span>
</span></span></code></pre></div></li><li><p>App/bookTOC/components/libary/pages/<strong>bookstore.lua</strong></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_M</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>bookstore</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;components.bookstore.index&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>init</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>create</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>sceneGroup</span> <span style=color:#f92672>=</span> <span style=color:#111>UI.scene</span><span style=color:#111>.</span><span style=color:#111>view</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>UI.layers</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>--</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>--for k, v in pairs(UI.props) do print(k, v) end</span>
</span></span><span style=display:flex><span>  <span style=color:#111>bookstore</span><span style=color:#111>:</span><span style=color:#111>init</span><span style=color:#111>(</span><span style=color:#111>sceneGroup</span><span style=color:#111>,</span> <span style=color:#111>UI.props</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>didShow</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>UI.layers</span>
</span></span><span style=display:flex><span>  <span style=color:#111>bookstore</span><span style=color:#111>:</span><span style=color:#111>setSceneGroup</span><span style=color:#111>(</span><span style=color:#111>UI.scene</span><span style=color:#111>.</span><span style=color:#111>view</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>toDispose</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#111>bookstore</span><span style=color:#111>:</span><span style=color:#111>destory</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>_M</span>
</span></span></code></pre></div><p>bookstore.lua calls <strong>components.bookstore.model</strong></p></li></ul><hr><h3 id=model>model</h3><p>Please fill the bookstore model with values of each book</p><ul><li><p>compoents/bookstore/index.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>M</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>pageCommand</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;components.bookstore.controller.pageCommand&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>model</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;components.bookstore.model.base&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#111>model.debug</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span>
</span></span><span style=display:flex><span><span style=color:#111>model.URL</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;http://localhost:8080/bookshop/&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- model.URL = nil means simple IAP store without network download</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- downloadBtn, savingTxt won&#39;T be used. You don&#39;t need to create them.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>----------</span>
</span></span><span style=display:flex><span><span style=color:#111>model.TOC</span>           <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookTOC&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>model.LIBRARY_PAGES</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;scenes.library&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>model.DIALOG_PAGES</span>  <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;scenes.dialog&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#111>model.name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;catalog01&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#111>model.books</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#111>bookFree</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span>         <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>versions</span>     <span style=color:#f92672>=</span> <span style=color:#111>{},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>titles</span>       <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>descriptions</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;desc&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isFree</span>       <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isOnlineImg</span>  <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isDownloadable</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>image</span>        <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;App/bookFree/assets/images/page1/bg.png&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>productNames</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>apple</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>google</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>amazon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>bookOne</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span>         <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>versions</span>     <span style=color:#f92672>=</span> <span style=color:#111>{},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>titles</span>       <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>descriptions</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;desc&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isFree</span>       <span style=color:#f92672>=</span> <span style=color:#00a8c8>false</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isOnlineImg</span>  <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span> <span style=color:#75715e>-- true</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isDownloadable</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span> <span style=color:#75715e>-- true</span>
</span></span><span style=display:flex><span>    <span style=color:#111>image</span>        <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;App/bookOne/assets/images/page1/bg.png&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>productNames</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>apple</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>google</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>amazon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#111>model.purchaseAlertMessages</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Your purchase was successful&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>model.restoreAlertMessages</span>  <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Your items are being restored&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>model.downloadErrorMessages</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Check network alive to download the content&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>model.descriptions</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>model.titles</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#111>model.gotoSceneEffect</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;slideRight&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>model.showOverlayEffect</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;slideBottom&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#111>M.new</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>return</span> <span style=color:#111>pageCommand.newBookstore</span><span style=color:#111>(</span><span style=color:#111>model</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#111>M.model</span> <span style=color:#f92672>=</span> <span style=color:#111>model</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>M</span>
</span></span></code></pre></div><ul><li><p>debug</p><p>if true, IAPBadger is in debug mode.</p></li><li><p>URL</p><p>if book assets are downlodable, please set the server url</p></li><li><p>LIBRARY_PAGES</p><p>bookstore shows one of library page with lang value</p></li><li><p>DIALOG_PAGES</p><p>bookstore shows one of dialog with lang value</p></li><li><p>name</p><p>the name for IAP catalog. You may create another model.lua with a differnet name</p></li><li><p>books</p><ul><li><p>name</p></li><li><p>versions</p><p>you can put language codes for multilingual books.</p><blockquote><p>you may invent a new lang code for versions.
For example, instead of language code, use blue, red, gree of colors as version</p></blockquote></li><li><p>titles</p></li><li><p>descriptions</p></li><li><p>isFree</p><p>true or falase</p></li><li><p>isOnlineImg</p><p>if true, thumbnail image is loaded with the following given path in App folder</p><p>if false, from URL .."/"..image</p></li><li><p>image</p><p>thumbnail image path</p></li><li><p>productNames</p><p>if debug is false, productNames should be replaced with values of Apple store, Google play, Amazon store</p></li></ul></li></ul></li></ul><hr><h3 id=view>view</h3><p>You would like to customize the looks</p><p>marker</p><img src=../img/2020-09-09-15-52-26.png width=200><p>updateText</p><img src=../img/2020-09-09-16-04-31.png width=200><ul><li><p>components/bookstore/view/marker.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>M</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>M</span><span style=color:#111>.</span><span style=color:#75af00>new</span> <span style=color:#111>(</span><span style=color:#111>dst</span><span style=color:#111>,</span> <span style=color:#111>group</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#111>dst</span><span style=color:#111>,</span> <span style=color:#111>group</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#111>dst.updateMark</span> <span style=color:#f92672>==</span> <span style=color:#00a8c8>nil</span> <span style=color:#00a8c8>then</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>local</span> <span style=color:#111>obj</span> <span style=color:#f92672>=</span> <span style=color:#111>display.newCircle</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#ae81ff>4</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>        <span style=color:#111>obj.x</span> <span style=color:#f92672>=</span> <span style=color:#111>dst.x</span> <span style=color:#f92672>+</span> <span style=color:#111>dst.width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        <span style=color:#111>obj.y</span> <span style=color:#f92672>=</span> <span style=color:#111>dst.y</span> <span style=color:#f92672>-</span> <span style=color:#111>dst.height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        <span style=color:#111>obj</span><span style=color:#111>:</span><span style=color:#111>setFillColor</span><span style=color:#111>(</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#ae81ff>0</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>        <span style=color:#111>group</span><span style=color:#111>:</span><span style=color:#111>insert</span><span style=color:#111>(</span><span style=color:#111>obj</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>        <span style=color:#111>dst.updateMark</span> <span style=color:#f92672>=</span> <span style=color:#111>obj</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>else</span>
</span></span><span style=display:flex><span>        <span style=color:#111>dst.updateMark</span><span style=color:#111>.</span><span style=color:#111>alpha</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>---</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>M</span>
</span></span></code></pre></div></li><li><p>components/bookstore/view/spinner.lua</p></li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>M</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>M</span><span style=color:#111>.</span><span style=color:#75af00>new</span> <span style=color:#111>(</span><span style=color:#111>host</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>obj</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>spinner</span>
</span></span><span style=display:flex><span>    <span style=color:#111>obj.host</span> <span style=color:#f92672>=</span> <span style=color:#111>host</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>--</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>function</span> <span style=color:#75af00>obj</span><span style=color:#111>:</span><span style=color:#75af00>show</span><span style=color:#111>(</span><span style=color:#111>host</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>if</span> <span style=color:#f92672>not</span> <span style=color:#111>spinner</span> <span style=color:#00a8c8>then</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinner</span> <span style=color:#f92672>=</span> <span style=color:#111>display.newGroup</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>local</span> <span style=color:#111>hostName</span> <span style=color:#f92672>=</span> <span style=color:#111>host</span> <span style=color:#f92672>or</span> <span style=color:#111>obj.host</span> <span style=color:#f92672>or</span> <span style=color:#d88200>&#34;&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>--Place a progress spinner on screen and tell the user the app is contating the store</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>local</span> <span style=color:#111>spinnerBackground</span> <span style=color:#f92672>=</span> <span style=color:#111>display.newRect</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#ae81ff>360</span><span style=color:#111>,</span><span style=color:#ae81ff>600</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinnerBackground</span><span style=color:#111>:</span><span style=color:#111>setFillColor</span><span style=color:#111>(</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span><span style=color:#ae81ff>0.75</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>--Spinner consumes all taps so the user cannot tap the purchase button twice</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinnerBackground</span><span style=color:#111>:</span><span style=color:#111>addEventListener</span><span style=color:#111>(</span><span style=color:#d88200>&#34;tap&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span> <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>true</span> <span style=color:#00a8c8>end</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>local</span> <span style=color:#111>spinnerText</span> <span style=color:#f92672>=</span> <span style=color:#111>display.newText</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Contacting &#34;</span> <span style=color:#f92672>..</span> <span style=color:#111>hostName</span> <span style=color:#f92672>..</span> <span style=color:#d88200>&#34;...&#34;</span><span style=color:#111>,</span> <span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>20</span><span style=color:#111>,</span> <span style=color:#111>native.systemFont</span><span style=color:#111>,</span> <span style=color:#ae81ff>18</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinnerText</span><span style=color:#111>:</span><span style=color:#111>setFillColor</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#ae81ff>0</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>--Add a little spinning rectangle</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>local</span> <span style=color:#111>spinnerRect</span> <span style=color:#f92672>=</span> <span style=color:#111>display.newRect</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#ae81ff>0</span><span style=color:#111>,</span><span style=color:#ae81ff>35</span><span style=color:#111>,</span><span style=color:#ae81ff>35</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinnerRect</span><span style=color:#111>:</span><span style=color:#111>setFillColor</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#ae81ff>0</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinnerRect</span><span style=color:#111>:</span><span style=color:#111>setStrokeColor</span><span style=color:#111>(</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span><span style=color:#ae81ff>1</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinnerRect.strokeWidth</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>            <span style=color:#111>transition.to</span><span style=color:#111>(</span><span style=color:#111>spinnerRect</span><span style=color:#111>,</span> <span style=color:#111>{</span> <span style=color:#111>time</span><span style=color:#f92672>=</span><span style=color:#ae81ff>4000</span><span style=color:#111>,</span> <span style=color:#111>rotation</span><span style=color:#f92672>=</span><span style=color:#ae81ff>360</span><span style=color:#111>,</span> <span style=color:#111>iterations</span><span style=color:#f92672>=</span><span style=color:#ae81ff>999999</span><span style=color:#111>,</span> <span style=color:#111>transition</span><span style=color:#f92672>=</span><span style=color:#111>easing.inOutQuad</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>--Create a group and add all these objects to it</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinner</span><span style=color:#111>:</span><span style=color:#111>insert</span><span style=color:#111>(</span><span style=color:#111>spinnerBackground</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinner</span><span style=color:#111>:</span><span style=color:#111>insert</span><span style=color:#111>(</span><span style=color:#111>spinnerText</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinner</span><span style=color:#111>:</span><span style=color:#111>insert</span><span style=color:#111>(</span><span style=color:#111>spinnerRect</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinner.x</span><span style=color:#111>,</span> <span style=color:#111>spinner.y</span> <span style=color:#f92672>=</span> <span style=color:#111>_W</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span><span style=color:#111>,</span> <span style=color:#111>_H</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>            <span style=color:#111>spinner.spinnerText</span> <span style=color:#f92672>=</span> <span style=color:#111>spinnerText</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>end</span>
</span></span></code></pre></div><ul><li><p>updateText</p><ul><li>startTime: the start time of a book download</li><li>size: the size in progress</li><li>bookSize:the total size of assets of a book</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>obj</span><span style=color:#111>:</span><span style=color:#75af00>updateText</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>percent</span> <span style=color:#f92672>=</span> <span style=color:#111>self.size</span><span style=color:#f92672>/</span><span style=color:#111>self.bookSize</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>sec</span>     <span style=color:#f92672>=</span> <span style=color:#111>os.difftime</span><span style=color:#111>(</span> <span style=color:#111>os.time</span><span style=color:#111>(),</span> <span style=color:#111>self.startTime</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>remain</span>  <span style=color:#f92672>=</span> <span style=color:#111>math.floor</span><span style=color:#111>(</span><span style=color:#111>sec</span> <span style=color:#f92672>*</span> <span style=color:#111>(</span><span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#111>percent</span><span style=color:#111>))</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>time</span>    <span style=color:#f92672>=</span> <span style=color:#111>os.date</span><span style=color:#111>(</span><span style=color:#d88200>&#34;*t&#34;</span><span style=color:#111>,</span> <span style=color:#111>remain</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>self.spinnerText</span><span style=color:#111>.</span><span style=color:#111>text</span> <span style=color:#f92672>=</span> <span style=color:#111>math.floor</span><span style=color:#111>(</span><span style=color:#111>percent</span><span style=color:#f92672>*</span><span style=color:#ae81ff>100</span><span style=color:#111>)</span><span style=color:#f92672>..</span><span style=color:#d88200>&#34; % (&#34;</span> <span style=color:#f92672>..</span><span style=color:#111>self.size</span> <span style=color:#f92672>..</span><span style=color:#d88200>&#34;/&#34;</span> <span style=color:#f92672>..</span><span style=color:#111>self.bookSize</span> <span style=color:#f92672>..</span><span style=color:#d88200>&#34; Mb) </span><span style=color:#8045ff>\n</span><span style=color:#d88200> left &#34;</span> <span style=color:#f92672>..</span><span style=color:#111>time.min</span><span style=color:#f92672>..</span><span style=color:#d88200>&#34;:&#34;</span><span style=color:#f92672>..</span><span style=color:#111>time.sec</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span></code></pre></div></li></ul><hr><h3 id=controller>controller</h3><p>These functions are available for page&book navigation. You can set it for an event action.</p><ul><li>components/bookstore/controller/pageCommand.lua<ul><li>gotoTOC()</li><li>showView(page, options)</li><li>gotoSceneBook(book, page, version)</li><li>gotoSceneNextBook(version)</li><li>gotoScenePreviousBook(version)</li><li>gotoScene(event, version)<ul><li>event = {target = {selectedPurchase= &ldquo;bookOne&rdquo;}}</li></ul></li></ul></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/bookstore/server/>Book Server</small><h1 id=book-server>Book Server</h1><h2 id=preparation>Preparation</h2><p>After published your Book&rsquo;s projects, you can use compress_assets/main.lua</p><ul><li><p><strong>BookServer/compress_assets/main.lua</strong></p><p>the script makes json and zip files</p><img src=../img/2020-09-19-13-00-39.png width=600></li></ul><p>compress_assets/main.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>command</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;compress_assets&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>command.setServerFolder</span><span style=color:#111>(</span><span style=color:#d88200>&#34;macos&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;bookstore&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--command.setServerFolder(&#34;win32&#34;, &#34;bookstore&#34;)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- the name of Kwik project and the name of In App Purchase product</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>books</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book01&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book01&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book02&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book02&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Use Online Images needs an image file</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>onLineImages</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book01&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book01&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;assets/images/page1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book02&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book02&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;assets/images/page1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>Notice: For bookstoe with multiple languaes, and Use Online Image is true, a thumbnail image from online server will be requested with lang ID. For instance,</p><ul><li><p>http://localserver:8080/bookshefl/book01en/bg.png</p><p>For this case, BookServer needs book01en, book01jp folders. Please modify the script with lang ID for onLineImages table</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>onLineImages</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book01&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book01en&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;assets/images/page1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book01&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book01jp&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;assets/images/page1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book02&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book02en&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;assets/images/page1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book02&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book02jp&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;assets/images/page1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></li></ul><hr><h2 id=http-server>http-server</h2><p>Please prepare a http-server and put the contents of BookServer folder.</p><p>http-server</p><pre tabindex=0><code>cd BookServer
http-server

  http://127.0.0.1:8080
  Hit CTRL-C to stop the server
</code></pre><ul><li><p>http://localhost:8080/bookstore/book01/assets.json</p><p>Please check the url in components/bookstore/model.lua</p><pre tabindex=0><code> local YourHost  = &#34;http://localhost:8080
 M.URL           = YourHost..&#34;/bookstore/&#34;
</code></pre></li></ul><hr><h2 id=update-an-asset>Update an asset</h2><p>compress_assets/main.lua has command.updateAsset function</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- update page1, videos</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>project</span>      <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book02&#34;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book02&#34;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>page</span>         <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>type</span>         <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;images&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--   command.updateAsset(project, serverFolder, page, type)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--[[
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;audios&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;read2me&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;PNGs&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;sprites&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;particles&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;WWW&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;thumbnails&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;images&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    &#34;shared&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>]]</span>
</span></span></code></pre></div><hr><h2 id=assets-folder>Assets folder</h2><ul><li>Spritesheet</li><li>Word audio</li><li>Video<ul><li>use pngs</li></ul></li><li>Particles</li><li>Web View</li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/bookstore/simulator/>Simulator</small><h1 id=simulator--device-build>Simulator & Device Build</h1><h2 id=run-with-simulator>Run with Simulator</h2><ul><li>loading main.lua of BookShelfEmbedded with Corona Simulator, clicking purchase text will show up the IAP dialog</li><li>Files > Show Project Sandbox, you find downloaded zip and bg.png.</li><li>If you want to refresh the state beginning, delete the files from the Sandbox folders. TemporaryFiles must be cleared because the files from Internet are cached there.</li></ul><h2 id=build-for-device>Build for device</h2><p>After everything all right with simulator, turn off debug mode IAP.lua and set the valid product IDs of apple, google or amazon in the following lua files of BookShelfTOC project. You may edit the files in App/TOC.</p><ul><li>App/TOC/components/store/IAP.lua</li><li>App/TOC/components/store/model.lua</li></ul><p>components/store/IAP.lua</p><ul><li>iapOptions.salt change it as your own text</li><li>iapOptions.debugMode false for device build</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>M</span><span style=color:#111>:</span><span style=color:#75af00>init</span><span style=color:#111>(</span><span style=color:#111>catalogue</span><span style=color:#111>,</span> <span style=color:#111>restoreAlert</span><span style=color:#111>,</span> <span style=color:#111>purchaseAlert</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;iap init&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>self.catalogue</span>       <span style=color:#f92672>=</span> <span style=color:#111>catalogue</span>
</span></span><span style=display:flex><span>    <span style=color:#111>self.restoreAlert</span>  <span style=color:#f92672>=</span> <span style=color:#111>restoreAlert</span>
</span></span><span style=display:flex><span>    <span style=color:#111>self.purchaseAlert</span> <span style=color:#f92672>=</span> <span style=color:#111>purchaseAlert</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>iapOptions</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>catalogue</span>         <span style=color:#f92672>=</span> <span style=color:#111>catalogue</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>filename</span>          <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;episodes_inventory.txt&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>--Salt for the hashing algorithm</span>
</span></span><span style=display:flex><span>        <span style=color:#111>salt</span>              <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;something tr1cky to gue55!&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>failedListener</span>    <span style=color:#f92672>=</span> <span style=color:#111>failedListener</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>cancelledListener</span> <span style=color:#f92672>=</span> <span style=color:#111>failedListener</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>--Once the product has been purchased, it will remain in the inventory.  Uncomment the following line</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>--to test the purchase functions again in future.  It&#39;s also useful for testing restore purchases.</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>--doNotLoadInventory=true,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>debugMode</span>        <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>}</span>
</span></span><span style=display:flex><span>    <span style=color:#111>iap.init</span><span style=color:#111>(</span><span style=color:#111>iapOptions</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;iap init end&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span></code></pre></div><p>components/store/model.lua</p><ul><li>productNames.apple, productNames.google, productNames.amazon to be set for device build. If not used, make it empty string as ""</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>M.catalogue</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>products</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>Episode02</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>productNames</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>apple</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode02_apple&#34;</span><span style=color:#111>,</span> <span style=color:#111>google</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode02_googgle&#34;</span><span style=color:#111>,</span> <span style=color:#111>amazon</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode02_amazon&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>            <span style=color:#111>productType</span>  <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;non-consumable&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>            <span style=color:#111>onPurchase</span>   <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span> <span style=color:#111>IAP.setInventoryValue</span><span style=color:#111>(</span><span style=color:#d88200>&#34;unlock_Episode02&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>            <span style=color:#111>onRefund</span>     <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span> <span style=color:#111>IAP.removeFromInventory</span><span style=color:#111>(</span><span style=color:#d88200>&#34;unlock_Episode02&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>},</span>
</span></span><span style=display:flex><span>            <span style=color:#111>Episode03</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>productNames</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>apple</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode03_apple&#34;</span><span style=color:#111>,</span> <span style=color:#111>google</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode03_googgle&#34;</span><span style=color:#111>,</span> <span style=color:#111>amazon</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Episode03_amazon&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>            <span style=color:#111>productType</span>  <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;non-consumable&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>            <span style=color:#111>onPurchase</span>   <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span> <span style=color:#111>IAP.setInventoryValue</span><span style=color:#111>(</span><span style=color:#d88200>&#34;unlock_Episode03&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>            <span style=color:#111>onRefund</span>     <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span> <span style=color:#111>IAP.removeFromInventory</span><span style=color:#111>(</span><span style=color:#d88200>&#34;unlock_Episode03&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>inventoryItems</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>unlock_Episode02</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>productType</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;non-consumable&#34;</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>            <span style=color:#111>unlock_Episode03</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>productType</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;non-consumable&#34;</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/bookstore/steps/>Steps</small><h1 id=steps>Steps</h1><p>Project folders</p><ul><li><p>Photsohop/bookShopX</p><ul><li>bookTOC<ul><li>library.psd<ul><li>{{bookName}}Icon</li><li>downloadBtn</li><li>saveBtn</li><li>savingTxt</li><li>purchaseBtn</li><li>restoreBtn</li><li>infoTxt</li><li><strong>Buy Product Action</strong></li></ul></li><li>dialog.psd<ul><li>{{bookName}}Icon<ul><li>downloadBtn</li><li>saveBtn</li><li>savingTxt</li><li>purchaseBtn</li><li>infoTxt</li><li><strong>hideOverlayBtn</strong></li></ul></li></ul></li></ul></li><li>bookFree<ul><li>page1.psd</li><li>page2.psd</li></ul></li><li>bookOne<ul><li>page1.psd</li><li>page2.psd</li></ul></li></ul></li><li><p>Solar2D</p><ul><li><p>main.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;controller.index&#34;</span><span style=color:#111>).</span><span style=color:#111>bootstrap</span><span style=color:#111>({</span><span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;book&#34;</span><span style=color:#111>,</span> <span style=color:#111>sceneIndex</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>})</span> <span style=color:#75715e>-- scenes.index  {&#34;library&#34;, &#34;dialog&#34;}</span>
</span></span></code></pre></div></li></ul><ul><li><p>components/bookstore/model.lua</p><p>Host URL of yours if you set up your own server.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>YourHost</span>  <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;http://localhost:8080&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>M.URL</span>           <span style=color:#f92672>=</span> <span style=color:#111>YourHost</span><span style=color:#f92672>..</span><span style=color:#d88200>&#34;/bookshelf/&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>M.backgroundImg</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bg.png&#34;</span>
</span></span></code></pre></div><p>books model</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>M.books</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#111>bookFree</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span>         <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>versions</span>     <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;en&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;jp&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>titles</span>       <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>jp</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>descriptions</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;desc&#34;</span><span style=color:#111>,</span> <span style=color:#111>jp</span> <span style=color:#f92672>=</span><span style=color:#d88200>&#34;&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isFree</span>       <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isOnlineImg</span>  <span style=color:#f92672>=</span> <span style=color:#00a8c8>false</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>image</span>        <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;App/bookFree/assets/images/title/bg.png&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>productNames</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>apple</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>google</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>amazon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>bookOne</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span>         <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>versions</span>     <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;en&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;jp&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>titles</span>       <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>jp</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>descriptions</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;desc&#34;</span><span style=color:#111>,</span><span style=color:#111>jp</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isFree</span>       <span style=color:#f92672>=</span> <span style=color:#00a8c8>false</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isOnlineImg</span>  <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>image</span>        <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;App/bookOne/assets/images/title/bg.png&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>productNames</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>apple</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>google</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>amazon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></li></ul></li><li><p>BookServer</p><ul><li><p>compress_assets/main.lua</p><p>compress and copy each assets of books to BookServer/bookstore folder with assets.json</p><p>edit the book table and run it with Solar2D simulator</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>books</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span> <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>     <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span> <span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#00a8c8>local</span> <span style=color:#111>onLineImages</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>   <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;assets/images/page1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>   <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;assets/images/page1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span> <span style=color:#111>}</span>
</span></span></code></pre></div></li></ul><ul><li><p>bookstore folder</p><ul><li>bookFree/assets.json<ul><li>page1/assets.zip</li><li>page2/assets.zip</li></ul></li><li>bookOne/assets.json</li></ul><p>run http-server and it check json is available</p><p>http://localhost:8080/bookstore/bookFree/assets.json</p></li></ul></li></ul><hr><h2 id=solar2d-simulator>Solar2D simulator</h2><p>menu > show sand box folder</p><p>you need to clean the following folders if you want to recover the initial state.
* Application Support
* Documents
* TemporaryFiles</p><p>For device build, you must set the valid product IDs from apple, google or amazon. For IAP Debug Mode, set the same name value to each filed.</p><h3 id=debug-mode>Debug mode</h3><blockquote><p>IAP Badger <a href=https://github.com/happymongoose/iap_badger>https://github.com/happymongoose/iap_badger</a></p></blockquote><p>When you test it with debug as <strong>true</strong> for components/bookstore/model.lua
, you need to set the book names as its dummies for the productNames.</p><p>Don&rsquo;t use the official product names from apple, google or amazon. With official IDs, debug mode fails to return a book name and IAP not work correctly.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>  <span style=color:#111>productNames</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>apple</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>google</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>amazon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>},</span>
</span></span></code></pre></div><hr><h2 id=buildsettings>build.settings</h2><h3 id=ios>iOS</h3><p>if you use <strong>http</strong> server instead of <strong>https</strong>, please set your domain in build.settings</p><p>NSExceptionDomains</p><p><a href=https://docs.coronalabs.com/guide/hardware/appleATS/index.html>https://docs.coronalabs.com/guide/hardware/appleATS/index.html</a></p><h3 id=android>Android</h3><ul><li>config.lua needs google license key</li><li>build.settings needs the permissions</li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/bookstore/versions/>Book Versions</small><h1 id=book-versions>Book Versions</h1><p>It is a feature to download a different language version of a book. A user pays for a book and choose to download a book with his/her language</p><p>Modified sample project is here.</p><ul><li>book01en</li><li>book01jp</li><li>book02en</li><li>book02jp</li></ul><ul><li>bookTOC<ul><li><p>library.psd
<img src=../img/2022-08-07-21-15-32.png width=600></p></li><li><p>dialog.psd</p><img src=../img/2022-08-07-21-17-58.png width=300></li></ul></li></ul><hr><h2 id=booksever>BookSever</h2><p>BookSever/compress_assets/main.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>command.setServerFolder</span><span style=color:#111>(</span><span style=color:#d88200>&#34;macos&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;bookshelf&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--command.setServerFolder(&#34;win32&#34;, &#34;bookshelf&#34;)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>books</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book01en&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book01en&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book01jp&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book01jp&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book02en&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book02en&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book02jp&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book02jp&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>onLineImages</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book01en&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book01en&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;build4/assets/images/p1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book01jp&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book01jp&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;build4/assets/images/p1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book02en&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book02en&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;build4/assets/images/p1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#111>project</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Book02jp&#34;</span><span style=color:#111>,</span> <span style=color:#111>serverFolder</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;book02jp&#34;</span><span style=color:#111>,</span> <span style=color:#111>image</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;build4/assets/images/p1/bg@4x.png&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><hr><p>Solar2D/components/bookstore/model.lua</p><p>the versions are added</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>M.books</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#111>bookFree</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span>         <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>versions</span>     <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;en&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;jp&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>titles</span>       <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;Book Free&#34;</span><span style=color:#111>,</span> <span style=color:#111>jp</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;ブック フリー&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>descriptions</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;free&#34;</span><span style=color:#111>,</span> <span style=color:#111>jp</span> <span style=color:#f92672>=</span><span style=color:#d88200>&#34;無料&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isFree</span>       <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isOnlineImg</span>  <span style=color:#f92672>=</span> <span style=color:#00a8c8>false</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>image</span>        <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;App/bookFree/assets/images/title/bg.png&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>productNames</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>apple</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>google</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>amazon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>bookOne</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span>         <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>versions</span>     <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;en&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;jp&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>titles</span>       <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;book&#34;</span><span style=color:#111>,</span> <span style=color:#111>jp</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;ブック&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>descriptions</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;$10&#34;</span><span style=color:#111>,</span><span style=color:#111>jp</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;1000円&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isFree</span>       <span style=color:#f92672>=</span> <span style=color:#00a8c8>false</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>isOnlineImg</span>  <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>image</span>        <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;App/bookOne/assets/images/title/bg.png&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>productNames</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>apple</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne_apple&#34;</span><span style=color:#111>,</span> <span style=color:#111>google</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne_google&#34;</span><span style=color:#111>,</span> <span style=color:#111>amazon</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bookOne_amazon&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>when user purchase bookX, user can download the default of bookX or en, jp. Kwik internally downloads bookX.zip or bookXen/asset zip files or bookXjp/asset zip files</p><h3 id=use-case-memo>use case memo</h3><blockquote><p>TODO direct open a book according to the language code of the page</p></blockquote><ul><li><p>when user click purchase button and the transaction is completed, next user needs to click download-version button to get an asset zip of a selected language from Book server</p></li><li><p>library.psd</p><ul><li><p>purchase button is not available in library page. It is removed (alpha=0)</p></li><li><p>user can not directly open a book from a thumbnail icon. Click the icon to pop up the dilaog, and then user choose one of version of a book</p></li></ul><ul><li>from dialog, user can open a book if it has been purchased and been downloaded in the app</li></ul></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/>Design</small><h1 id=design>Design</h1><p>Project model</p><ul><li>robotlegs</li><li>template<ul><li>components</li><li>commands</li></ul></li></ul><p>Tools</p><ul><li><p>image exporter</p><p>PS/XD UXP</p></li><li><p>visual editor (frontEnd)</p><p>Solar2D</p><ul><li>live editor</li></ul><p>(Maybe) React</p><ul><li>uxp plugin for Ps or XD</li><li>web app</li></ul></li><li><p>REST server</p><ul><li><p>pegasus-harness</p></li><li><p>pegasus-launcher</p><p>frontEnd app sends REST API requests to harness of pegasus lua server</p><p>this server offers the renderer of .lua for components and commands</p></li></ul></li><li><p>other tools</p><ul><li>generate_scene_index</li></ul></li></ul><p>Sample projects</p><hr><p>Image Exporter plugin for Adobe Photoshop</p><img src=./img/2022-05-18-13-25-58.png width=360><hr><p>Project Model</p><blockquote><p>sample-projects/Pegasus</p></blockquote><img src=./img/2022-05-31-11-13-26.png width=360><blockquote><p>/kwik5/sandbox/Ps/react-uxp-styles/Project/Solar2D</p></blockquote><img src=./img/2022-05-18-13-20-45.png width=360><hr><p>Visual Editor(React)</p><p>{{webview html panel}}</p><ul><li>UXP</li><li>Browser</li></ul><hr><p>Visual Live Editor(Solar2D)</p><img src=./img/2022-10-22-10-29-56.png width=600><blockquote><p>Solar2D/tools/kwik-editor/App/kwikEditor to be copied into a project? Or make them as components like a AtoB?</p></blockquote><ul><li><p>books/pages(scenes)/layers</p><img src=./img/2022-10-22-10-31-11.png width=600></li><li><p>menu</p><img src=./img/2022-10-22-10-32-39.png width=300>
<img src=./img/2022-10-22-10-34-31.png width=600></li><li><p>tools/actions with icons</p><img src=./img/2022-10-22-10-35-39.png width=600><p>selectPage</p><ul><li><p><input disabled type=checkbox> selectLayer with filter</p><ul><li>select class<ul><li><input disabled type=checkbox> show an event with class name like button->onTap, anim->onComplete</li><li><input disabled type=checkbox> button (-> New Action Icon)</li></ul></li></ul></li><li><p>selectComponent</p><ul><li>audio<ul><li>event</li></ul></li><li>group</li><li>timer<ul><li>event</li></ul></li><li>var</li></ul></li><li><p><input disabled type=checkbox> add a component to a layer or a page selected</p></li><li><p><input disabled type=checkbox> selectAction</p><ul><li><p><input disabled type=checkbox> list actions</p></li><li><p><input disabled type=checkbox> cross references to components</p></li><li><p><input disabled type=checkbox> Action Editor</p><ul><li>Add a command<ul><li>user select Animation<ul><li><input disabled type=checkbox> list animations<ul><li>user select an animation, select an operation</li><li>editt props</li></ul></li></ul></li></ul></li><li>Drag & Drop to change the order of commands</li></ul></li></ul></li></ul><blockquote><p>Pegasus & httpYac to get/post properteis of components and actions?
yaml props in .http</p></blockquote><p>Copy/(optional)EditRawJSON/Apply</p><ul><li>copy json-props in a buffer</li><li>(optional) show Edit JSON panel: json-props in text field, then you can copy it or modify</li><li>select components and click paste button?</li></ul></li></ul><blockquote><p>audio/group/timer/var are independent from layers</p></blockquote><ul><li><p>components w/o events</p><ul><li><p>page</p><ul><li>group</li><li>variable</li></ul></li><li><p>layer replacements</p><ul><li>set lang</li><li>multiplier</li><li>particles</li><li>dynamic text</li><li>text</li><li>mask</li></ul></li><li><p>interactions</p><ul><li>canvas</li><li>scroll</li></ul></li><li><p>physics</p><ul><li>env</li><li>body</li><li>force</li><li>joint</li></ul></li></ul></li><li><p>components with events</p><ul><li><p>timer</p></li><li><p>audio</p></li><li><p>layer (replacements)</p><ul><li><p>onComplete</p><ul><li>animation</li><li>video</li><li>countdown</li><li>text input</li></ul></li><li><p>transition</p><ul><li>onStart</li><li>onComplete</li><li>onPause</li><li>onResume</li><li>onCancel</li><li>onRepeat</li></ul></li><li><p>sprite</p><ul><li>began</li><li>ended</li><li>bounce</li><li>loop</li><li>next</li></ul></li><li><p>sync audio text</p><ul><li>word timecode</li></ul></li></ul></li><li><p>interactions</p><ul><li><p>button</p><ul><li>tap #</li><li>press</li><li>release</li></ul></li><li><p>drag</p><ul><li>drop area</li><li>dragging</li><li>release</li></ul></li><li><p>swipe</p></li><li><p>pinch</p><ul><li>pinching</li><li>release</li></ul></li><li><p>spin</p><ul><li>clockwise</li><li>anti clockwise</li></ul></li><li><p>shake</p></li><li><p>parallax</p><ul><li>forward</li><li>backword</li></ul></li></ul></li><li><p>physics</p><ul><li>collision</li><li>preCollision</li><li>postCollision</li></ul></li></ul></li></ul><hr><ul><li><p><input disabled type=checkbox> create &lsquo;select book/page/layer&rsquo; menu at the bottom</p><ul><li><p><input disabled type=checkbox> layers table for a seclection . showOverlay?</p></li><li><p><input disabled type=checkbox> layer name with &lsquo;Add Class&rsquo; button?</p></li></ul></li><li><p><input disabled type=checkbox> create tools/actions with icons at the bottom</p><ul><li><input disabled type=checkbox> select animation > linear</li></ul></li><li><p>save/load</p><pre tabindex=0><code>scene/layers
  create?
  read
  update
    crud a class
  save
    table in lua into json
  publish
    json to lua
</code></pre></li></ul><p>TODO</p><ul><li><input disabled type=checkbox> add audio icon, action icon</li><li><input disabled type=checkbox> initApp to select an app folder? rename it to select App?</li><li><input disabled type=checkbox> move menu position to top/buttom/right/left</li></ul><hr><p>Tools</p><ul><li><p>develop/Solar2D/tools/pegasus-harness</p></li><li><p>develop/Solar2D/tools/pegasus-launcher</p><p>REST API requests from httpYac are sent to pegasus</p></li></ul><img src=./img/2022-05-18-13-37-14.png width=600><p>generate_scene_index</p><img src=./img/2022-05-18-13-39-54.png width=600></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/architecture/>Architecure</small><h2 id=architecure>Architecure</h2><p>UXP panel</p><pre tabindex=0><code class=language-mermaid data-lang=mermaid>flowchart LR

Designer((fas:fa-user Designer))
Developer((fas:fa-user Developer))

subgraph Photoshop[Photoshop UXP]
	graphics(images/lua renderer&lt;br&gt;scaffolder)
end

subgraph Editor[Kwik Visual Editor]
	subgraph App
		assets[(assets/images&lt;br&gt;models/json)]
		lua[(Source .lua)]
	end
	tools(GUI tools&lt;br&gt;&lt;br&gt;renderer&lt;br&gt;scaffolder)
	httpServer
	RestApi(RestApi&lt;br&gt;transform&lt;br&gt;animation)
	RestApi -.- tools
end

subgraph RestApi[REST API]
	form(Properties &lt;br&gt; CRUD)
end

subgraph VSCode
	httpYac(httpYac)
  coding
end

Photoshop -.img/json.-&gt; assets
RestApi &lt;-.img/json.-&gt; httpServer
httpServer &lt;-.-&gt; assets
httpServer -.- tools
tools -.- App

Browser-.maybe in future.- RestApi
httpYac -.- RestApi
coding -.- lua

RestApi -.- assets

Designer --- tools
Designer --- Photoshop

Developer --- VSCode
</code></pre><p>rest api</p><blockquote><p>pegasus is runningin Editor</p></blockquote><ol><li><p>run Editor</p></li><li><p>upload an image to pegasus server</p><ul><li>save it assets/images/book/</li><li>create display.object</li><li>.json</li></ul></li></ol><p>Kwik Visual Editor</p><ol><li><p>outputs images/json to App/book</p></li><li><p>run App/book</p></li></ol></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/new_features/>New Features</small><h2 id=new-features>New Features</h2><p>Solar2D API to be included</p><ul><li><p>Audio</p><ul><li>seek</li><li>rewind</li><li>cross fade function</li></ul></li><li><p>Social</p><ul><li>twitter</li><li>facebook</li><li>instagram</li></ul></li><li><p>transition.*</p><ul><li>chaining them</li></ul></li><li><p>mesh</p></li><li><p>2.5D — Perspective and Depth</p></li><li><p>game controllers</p></li></ul><p>Solar2D video texture</p><ul><li><a href=https://github.com/ANSH3LL/plugin_movie>https://github.com/ANSH3LL/plugin_movie</a></li></ul><p>Tiled</p><ul><li><p><a href=https://forums.solar2d.com/t/smooth-scrolling-of-top-down-tiled-map/150199/2>https://forums.solar2d.com/t/smooth-scrolling-of-top-down-tiled-map/150199/2</a></p><p>&ldquo;cull based on a 3x3 area of sub-screens centered around player. "</p></li><li><p><a href=https://gamedev.stackexchange.com/questions/83253/is-there-any-way-to-load-pieces-of-a-tile-map-as-and-when-needed-and-not-the-en>https://gamedev.stackexchange.com/questions/83253/is-there-any-way-to-load-pieces-of-a-tile-map-as-and-when-needed-and-not-the-en</a></p></li><li><p><a href=https://www.dynetisgames.com/2018/02/24/manage-big-maps-phaser-3/>https://www.dynetisgames.com/2018/02/24/manage-big-maps-phaser-3/</a></p><ul><li>A tool to split an existing Tiled tilemap into chunks</li><li>How to reason about chunks based on their ID’s and the world dimensions</li><li>How to load and destroy them on the fly using Phaser 3</li></ul></li></ul><p>Texture atlas function in kwik?</p><ul><li><p><a href=https://github.com/shama/atlaspack>https://github.com/shama/atlaspack</a></p></li><li><p><a href=http://free-tex-packer.com/>http://free-tex-packer.com/</a></p></li><li><p><a href=https://github.com/odrick/free-tex-packer>https://github.com/odrick/free-tex-packer</a></p></li><li><p><a href=https://github.com/richardjdare/Atlasmaker>https://github.com/richardjdare/Atlasmaker</a></p></li><li><p><a href=https://github.com/soimy/atlasify>https://github.com/soimy/atlasify</a> ⭐️</p><ul><li><a href=https://github.com/soimy/maxrects-packer>https://github.com/soimy/maxrects-packer</a></li></ul></li></ul><p>Audio sprites?</p><ul><li><a href=https://medium.com/game-development-stuff/how-to-create-audiosprites-to-use-with-howler-js-beed5d006ac1>https://medium.com/game-development-stuff/how-to-create-audiosprites-to-use-with-howler-js-beed5d006ac1</a></li></ul><hr><p>Interactive</p><ul><li>texture atlas &ndash; Spine</li><li>spritesheet &ndash; Adobe Animate</li><li>movie &ndash; Adobe Animate</li></ul><p>Lottie ts to lua? ⭐️</p><ul><li><a href=https://github.com/bytedance/lottiefy>https://github.com/bytedance/lottiefy</a></li><li><a href=https://github.com/airbnb/lottie-web>https://github.com/airbnb/lottie-web</a></li><li><a href=https://github.com/LottieFiles>https://github.com/LottieFiles</a></li><li><a href=https://lottiefiles.com/what-is-lottie>https://lottiefiles.com/what-is-lottie</a></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/>Project Model</small><h2 id=project-model>Project Model</h2><p>test/base-proj/</p><ul><li><p>Photoshop/bookshop</p><pre tabindex=0><code>├── bookFree
│   ├── page1.psd
│   ├── page2.psd
├── bookOne
    ├── page1.psd
    └── page2.psd
</code></pre></li><li><p>Solar2D</p></li></ul><blockquote><p>TODO add a layer group</p></blockquote><pre tabindex=0><code>.
├── AndroidResources
├── App
│   ├── bookFree
│       ├── assets
│       │   ├── images
│       │   │   ├── page1
│       │   │   │   ├── bg.png
│       │   │   │   ├── bg@2x.png
│       │   │   │   ├── bg@4x.png
│       │   │   │   ├── gotoBtn.png
│       │   │   │   ├── gotoBtn@2x.png
│       │   │   │   ├── gotoBtn@4x.png
│       │   │   │   ├── title.png
│       │   │   │   ├── title@2x.png
│       │   │   │   └── title@4x.png
│       │   │   ├── page2
│       │   └── thumbnails
│       ├── commands
│       │   ├── page1
│       │   │   ├── eventOne.lua
│       │   │   └── eventTwo.lua
│       │   └── page2
│       ├── components
│       │   ├── page1
│       │   │   ├── audios
│       │   │   ├── groups
│       │   │   ├── page
│       │   │   ├── times
│       │   │   └── variables
│       │   └── page2
│       ├── main.lua
│       ├── mediators
│       ├── models
│       │   ├── page1
│       │   │   ├── audios
│       │   │   ├── groups
│       │   │   ├── page
│       │   │   ├── times
│       │   │   ├── variables
│       │   │   ├── bg.json
│       │   │   ├── events
│       │   │   │   └── eventOne.json
│       │   │   ├── gotoBtn.json
│       │   │   ├── gotoBtn_animation.json
│       │   │   ├── index.json
│       │   │   ├── title.json
│       │   │   └── title_animation.json
│       │   └── page2
│       └── scenes
│           ├── index.lua
│           ├── page1
│           │   ├── bg.lua
│           │   ├── gotoBtn.lua
│           │   ├── gotoBtn_animation.lua
│           │   ├── index.lua
│           │   ├── title.lua
│           │   └── title_animation.lua
│           └── page2
│  
├── Images.xcassets
├── LaunchScreen.storyboardc
├── assets
├── build.settings
├── commands
│   ├── app
│   ├── common
│   │   └── myEvent.lua
│   └── kwik
├── components
│   ├── bookstore
│   ├── common
│   │   ├── bookstoreNavigation.lua
│   │   ├── index.lua
│   │   ├── keyboardNavigation.lua
│   │   ├── myComponent.lua
│   │   └── thumbnailNavigation.lua
│   ├── editor
│   └── kwik
├── config.lua
├── controller
├── en.lproj
├── extlib
├── lib
├── mySplashScreen.png
└── main.lua
</code></pre></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/components/>Components</small><h2 id=components>Components</h2><p>example bookFree/page1</p><pre tabindex=0><code>.
├── assets
├── commands
├── components &lt;==== page components
│   ├── page1
│   │   ├── audios
│   │   ├── groups
│   │   ├── page
│   │   ├── times
│   │   └── variables
│   └── page2
├── main.lua
├── mediators
├── models
│   ├── page1
│   │   ├── bg.json
│   │   ├── events
│   │   │   └── eventOne.json
│   │   ├── gotoBtn.json
│   │   ├── gotoBtn_animation.json &lt;=== animation component json
│   │   ├── index.json
│   │   ├── title.json
│   │   └── title_animation.json &lt;=== animation component json
│   └── page2
├── scenes
    ├── index.lua
    ├── page1
    │   ├── bg.lua
    │   ├── gotoBtn.lua
    │   ├── gotoBtn_animation.lua &lt;=== animation component lua
    │   ├── index.lua
    │   ├── title.lua
    │   └── title_animation.lua &lt;=== animation component lua
    └── page2
</code></pre></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/components/animation/>Animation</small><h3 id=animation>Animation</h3></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/components/audio/>Audio</small><h3 id=audio>Audio</h3><ul><li><p>components/pageX/audios</p><ul><li>sounds/soundOne.lua</li><li>streams/songOne.lua</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-.lua data-lang=.lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>Props</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span>     <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;soundOne&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>type</span>     <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;sound&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>autoPlay</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>channel</span>  <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>Props</span>
</span></span></code></pre></div></li><li><p>scenes/pageX/index.lua</p><pre tabindex=0><code>{
    name = &#34;pageX&#34;,
    layers = {
        {background={}},
    },
    components = {
        {audios = {
            {name=&#34;soundOne&#34;, type=&#34;sound&#34;},
            {name=&#34;songOne&#34;, type=&#34;stream&#34;}
        }},
        {others = {
            {nanostores={}}
        }}
    },
    events = {},
}
</code></pre></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/components/button/>Button</small><h3 id=button>Button</h3></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/components/group/>Group</small><h3 id=group>Group</h3></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/components/image/>Image</small><h3 id=image>Image</h3><ul><li><p>scenes/pageX/background.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_K</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span> <span style=color:#d88200>&#34;Application&#34;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_M</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;components.kwik.layer_image&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.weight</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>Props</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span><span style=color:#111>blendMode</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;normal&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>height</span>    <span style=color:#f92672>=</span> <span style=color:#ae81ff>520</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>width</span>     <span style=color:#f92672>=</span> <span style=color:#ae81ff>1000</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>kind</span>      <span style=color:#f92672>=</span> <span style=color:#111>pixel</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>name</span>      <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;bg&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>x</span>         <span style=color:#f92672>=</span> <span style=color:#ae81ff>1000</span>  <span style=color:#f92672>-</span><span style=color:#ae81ff>1000</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>y</span>         <span style=color:#f92672>=</span> <span style=color:#ae81ff>520</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>alpha</span>     <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span><span style=color:#f92672>/</span><span style=color:#ae81ff>100</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.imageWidth</span>  <span style=color:#f92672>=</span> <span style=color:#111>Props.width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.imageHeight</span> <span style=color:#f92672>=</span> <span style=color:#111>Props.height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.mX</span><span style=color:#111>,</span> <span style=color:#111>_M.mY</span>   <span style=color:#f92672>=</span> <span style=color:#111>_K.ultimatePosition</span><span style=color:#111>(</span><span style=color:#111>Props.x</span><span style=color:#111>,</span> <span style=color:#111>Props.y</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.randXStart</span>  <span style=color:#f92672>=</span> <span style=color:#111>_K.ultimatePosition</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.randXEnd</span>    <span style=color:#f92672>=</span> <span style=color:#111>_K.ultimatePosition</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.dummy</span><span style=color:#111>,</span> <span style=color:#111>_M.randYStart</span> <span style=color:#f92672>=</span> <span style=color:#111>_K.ultimatePosition</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.dummy</span><span style=color:#111>,</span> <span style=color:#111>_M.randYEnd</span>   <span style=color:#f92672>=</span> <span style=color:#111>_K.ultimatePosition</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.infinityDistance</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#111>parseValue</span><span style=color:#111>()</span> <span style=color:#f92672>or</span> <span style=color:#ae81ff>0</span><span style=color:#111>)</span><span style=color:#f92672>/</span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>....</span>
</span></span><span style=display:flex><span><span style=color:#111>....</span>
</span></span><span style=display:flex><span><span style=color:#111>....</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>localVars</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>localPos</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>didShow</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>toDispose</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span>  <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>toDestory</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>_M</span>
</span></span></code></pre></div><blockquote><p>&lsquo;_M.weight = num&rsquo; controlls the order of display objects for <strong>kwik-genereate-index</strong> tool that outputs scenes/pageX/index.lua</p></blockquote></li><li><p>scenes/pageX/groupOne/index.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>_M</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.weight</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- this index.lua is for kwik-generate-model</span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- you may put additional code here</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>_M</span>
</span></span></code></pre></div></li><li><p>scenes/pageX/groupOne/imageOne.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_K</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span> <span style=color:#d88200>&#34;Application&#34;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_M</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;components.kwik.layer_image&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.weight</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>Props</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>...</span>
</span></span><span style=display:flex><span>    <span style=color:#111>....</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></li><li><p>scenes/pageX/groupOne/imageTwo.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_K</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span> <span style=color:#d88200>&#34;Application&#34;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_M</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;components.kwik.layer_image&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>_M.weight</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>Props</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>...</span>
</span></span><span style=display:flex><span>    <span style=color:#111>....</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></li><li><p>scenes/pageX/index.lua</p><blockquote><p>Bottom to Top order</p></blockquote><pre tabindex=0><code>{
    name = &#34;pageX&#34;,
    layers = {
        {background={}},
        {groupOne = {
            {imageTwo},
            {imageOne},
        }},
    },
    components = {},
    events = {},
}
</code></pre></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/components/spritesheet/>Spritesheet</small><h3 id=spritesheet>Spritesheet</h3></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/components/sync_audio_text/>Sync Audio&Text</small><h3 id=sync-audio--text>Sync Audio & Text</h3></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/content/>Content X Structure</small><h3 id=content-x-structure>Content X Structure</h3><p>test/base-proj/Solar2D/App/bookX</p><blockquote><p>obsolete develop/UXP/kwik-exporter/plugin/kwik/base-proj/Solar2D/App/bookX</p></blockquote><pre tabindex=0><code>.
├── assets
│   ├── audios
│   │   ├── long
│   │   ├── short
│   │   └── sync
│   │       ├── en
│   │       ├── jp
│   ├── fonts
│   ├── images
│   │   └── pageX
│   ├── model.json
│   ├── particles
│   ├── sprites
│   ├── thumbnails
│   ├── videos
│   └── www
├── build.settings
├── commands
│   └── pageX
├── components
│   └── pageX
│       ├── audios
│       ├── groups
│       ├── page
│       │   └── controllers
│       ├── timers
│       └── variables
├── config.lua
├── mediators
├── models
├── scenes
    ├── index.lua
    └── pageX
        ├── index.lua
        ├── layer_image.lua
</code></pre><p>example bookFree/page1</p><pre tabindex=0><code>.
├── assets
│   ├── images
│   │   ├── page1
│   │   │   ├── bg.png
│   │   │   ├── bg@2x.png
│   │   │   ├── bg@4x.png
│   │   │   ├── gotoBtn.png
│   │   │   ├── gotoBtn@2x.png
│   │   │   ├── gotoBtn@4x.png
│   │   │   ├── title.png
│   │   │   ├── title@2x.png
│   │   │   └── title@4x.png
│   │   └── page2
│   └── thumbnails
│       ├── page1.png
│       └── page2.png
├── commands
│   ├── page1
│   │   └── eventOne.lua
│   └── page2
├── components
│   ├── page1
│   │   ├── audios
│   │   ├── groups
│   │   ├── page
│   │   ├── times
│   │   └── variables
│   └── page2
├── main.lua
├── mediators
│   ├── page1Mediator.lua
│   └── page2Mediator.lua
├── models
│   ├── page1
│   │   ├── bg.json
│   │   ├── events
│   │   │   └── eventOne.json
│   │   ├── gotoBtn.json
│   │   ├── gotoBtn_animation.json
│   │   ├── index.json
│   │   ├── title.json
│   │   └── title_animation.json
│   └── page2
├── scenes
    ├── index.lua
    ├── page1
    │   ├── bg.lua
    │   ├── gotoBtn.lua
    │   ├── gotoBtn_animation.lua
    │   ├── index.lua
    │   ├── title.lua
    │   └── title_animation.lua
    └── page2
</code></pre></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/icons/>Icons</small><p><a href=https://forums.solar2d.com/t/new-icon-size-for-ios/354492>https://forums.solar2d.com/t/new-icon-size-for-ios/354492</a></p><ul><li>114x114</li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/photoshop/>Photoshop File</small><h2 id=photoshop-file>Photoshop File</h2><p><a href=https://www.ios-resolution.com/>https://www.ios-resolution.com/</a></p><p>iPhone 13 Pro Max 1284x2778</p><img src=../img/2022-05-21-11-26-54.png width=1080><ul><li><p>iPad Pro 2048 x 2732</p></li><li><p>iPhone X 1125 x 2436</p></li><li><p>iPhone 11 Pro 1242 x 2688</p><p><a href=https://forums.solar2d.com/t/iphone-11-pro-max-screen-shots-in-simulator/151266/11>https://forums.solar2d.com/t/iphone-11-pro-max-screen-shots-in-simulator/151266/11</a></p></li></ul><p>Kwik4 Ulitimate Config</p><ul><li><p>1280 x 1920</p><p><a href=https://kwiksher.com/doc/getting_startted/guidelines/blend_mode/>https://kwiksher.com/doc/getting_startted/guidelines/blend_mode/</a></p><p><a href=https://kwiksher.com/doc/getting_startted/guidelines/screenshot/>https://kwiksher.com/doc/getting_startted/guidelines/screenshot/</a></p></li><li><p>background</p><p>1440 x 2280</p><p>iPhone X 1440 × 2772</p><p><a href=https://forums.solar2d.com/t/how-to-define-application-working-area-on-the-screen/351066/11>https://forums.solar2d.com/t/how-to-define-application-working-area-on-the-screen/351066/11</a></p><p><a href=https://forums.solar2d.com/t/safe-area-on-iphone-x-and-11-problem/353608>https://forums.solar2d.com/t/safe-area-on-iphone-x-and-11-problem/353608</a></p><blockquote><p><a href=https://github.com/SpyricGames/Solar2D-Plugins-Public>https://github.com/SpyricGames/Solar2D-Plugins-Public</a></p></blockquote></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/template_model/>Template Model</small><h3 id=code-template-model>Code Template Model</h3><p>assets/model/schema</p><p>embedded in codes &ndash; TBI to be extracted</p><ul><li>external codes - export it to .lua or can be imported directly</li><li>physics path</li><li>read2me -<ul><li>timecodes</li></ul></li><li>spritesheet info</li></ul><p>TODO:add ext codes</p><pre tabindex=0><code>extCodes
    libs
    p1
        user_codes.lua
        ext_001.lua
        ext_002.lua

        commands/
            button_name_001.lua
            action_name_001.lua
            user_codes.lua
    p2/
</code></pre><p>=> build4/</p><pre><code>```lua
function ActionCommand:new()
    local command = {}
    --
    function command:execute(params)
        local UI         = params.UI
        local sceneGroup = UI.scene.view
        local layer      = UI.layer
        local phase     = params.event.phase
        local event     = params.event
        {{#vvar}}
            {{vvar}}
        {{/vvar}}
        {{#arqCode}}
            {{arqCode}}
        {{/arqCode}}
    end
    return command
end
```

or

ext_lib_codes.lua
```
local _K = require &quot;Application&quot;
{{#extLib}}
    local {{name}} = requireKwik(&quot;{{libname}}&quot;)
{{/extLib}}
--
{{#TV}}
local kInputDevices = require(&quot;extlib.tv.kInputDevices&quot;)
{{/TV}}

function _M:localVars(UI)
    local sceneGroup  = UI.scene.view
    local layer       = UI.layer
    {{#extCodeTop}}
    {{ccode}}
    {{arqCode}}
    {{/extCodeTop}}
end
```
</code></pre><p>model.json</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;page&#34;</span><span style=color:#111>:</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span><span style=color:#f92672>&#34;alias&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;title&#34;</span><span style=color:#111>,</span><span style=color:#f92672>&#34;isTmplt&#34;</span><span style=color:#111>:</span><span style=color:#00a8c8>false</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;audios&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;read2me&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;videos&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;PNGs&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;sprites&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;particles&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;WWW&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;thumbnails&#34;</span><span style=color:#111>:[</span><span style=color:#00a8c8>null</span><span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;images&#34;</span><span style=color:#111>:[</span>
</span></span><span style=display:flex><span>                 <span style=color:#d88200>&#34;bg@4x.png&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;bg@2x.png&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;bg.png&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>null</span>
</span></span><span style=display:flex><span>    <span style=color:#111>],</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;shared&#34;</span><span style=color:#111>:[</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>null</span>
</span></span><span style=display:flex><span>    <span style=color:#111>]</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;page&#34;</span><span style=color:#111>:{</span><span style=color:#960050;background-color:#1e0010>{page</span><span style=color:#111>}}</span><span style=color:#960050;background-color:#1e0010>,</span><span style=color:#d88200>&#34;alias&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#d88200>&#34;{{alias}}&#34;</span><span style=color:#960050;background-color:#1e0010>,</span><span style=color:#d88200>&#34;isTmplt&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{isTmplt</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#layers</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>        <span style=color:#d88200>&#34;{{layer}}&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;x&#34;</span><span style=color:#111>:{</span><span style=color:#960050;background-color:#1e0010>{x</span><span style=color:#111>}}</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#d88200>&#34;y&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{y</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>},</span>
</span></span><span style=display:flex><span>            <span style=color:#d88200>&#34;width&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{width</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>},</span> <span style=color:#d88200>&#34;height&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{height</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>},</span>
</span></span><span style=display:flex><span>            <span style=color:#d88200>&#34;alpha&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{alpha</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>},</span> <span style=color:#d88200>&#34;ext&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#d88200>&#34;{{ext}}&#34;</span> <span style=color:#960050;background-color:#1e0010>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{/layers</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;audios&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#audios</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{filename}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/audios</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;read2me&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#read2me</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#111>{</span><span style=color:#f92672>&#34;foldername&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;{{foldername}}&#34;</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;filenames&#34;</span><span style=color:#111>:[{</span><span style=color:#960050;background-color:#1e0010>{#filenames</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{.}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/filenames</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span> <span style=color:#111>},{</span><span style=color:#960050;background-color:#1e0010>{/read2me</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;videos&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#videos</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{filename}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/videos</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;PNGs&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#PNGs</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{foldername}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/PNGs</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;sprites&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#sprites</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{filename}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/sprites</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;particles&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#particles</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#111>{</span><span style=color:#f92672>&#34;filename&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;{{filename}}&#34;</span><span style=color:#111>,</span><span style=color:#f92672>&#34;PNG&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;{{PNG}}&#34;</span><span style=color:#111>},{</span><span style=color:#960050;background-color:#1e0010>{/particles</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;WWW&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#WWW</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#111>{</span><span style=color:#f92672>&#34;filename&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;{{filename}}&#34;</span><span style=color:#111>,</span><span style=color:#f92672>&#34;foldername&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;{{foldername}}&#34;</span><span style=color:#111>},{</span><span style=color:#960050;background-color:#1e0010>{/WWW</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;thumbnails&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#thumbnails</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#filenames</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#d88200>&#34;{{.}}&#34;</span><span style=color:#111>,{</span><span style=color:#960050;background-color:#1e0010>{/filenames</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{/thumbnails</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span><span style=color:#00a8c8>null</span><span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;images&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#images</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>         <span style=color:#d88200>&#34;{{filename}}@4x.{{filetype}}&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;{{filename}}@2x.{{filetype}}&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;{{filename}}.{{filetype}}&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{/images</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>null</span>
</span></span><span style=display:flex><span>    <span style=color:#111>]</span><span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;shared&#34;</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#111>[</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{#shared</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>         <span style=color:#d88200>&#34;{{filename}}@4x.{{filetype}}&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;{{filename}}@2x.{{filetype}}&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;{{filename}}.{{filetype}}&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>{/shared</span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>null</span>
</span></span><span style=display:flex><span>    <span style=color:#111>]</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/project_model/template/>Template strurcture</small><h3 id=template-structure>template structure</h3><pre tabindex=0><code>├── App
    ├── contentX
        ├── assets
        │   ├── audios
        │   │   ├── sounds
        │   │   ├── streams
        │   │   └── sync
        │   ├── images
        │   └── model.json
        ├── commands
        │   └── pageX
        ├── components
        │   ├── pageX
        │   │   ├── audios
        │   │   ├── groups
        │   │   ├── interactions
        │   │   │   └── page
        │   │   ├── others
        │   │   ├── timers
        │   │   └── variables
        │   └── store?
        ├── defaults
        │   ├── audio_properties.xml
        │   ├── layer_properties.xml
        │   ├── linear_anim_properties.xml
        │   └── spritesheet_properties.xml
        ├── mediators
        ├── models
        │   ├── assets
        │   │   ├── audios
        │   │   │   ├── sounds
        │   │   │   ├── streams
        │   │   │   └── sync
        │   │   ├── index.json
        │   │   ├── particles
        │   │   ├── sprites
        │   │   ├── videos
        │   │   └── www
        │   ├── lproj
        │   └── pageX
        │       ├── components
        │       │   ├── audios
        │       │   ├── groups
        │       │   ├── others
        │       │   ├── timers
        │       │   └── variables
        │       ├── events
        │       ├── index.json
        │       └── layers
        ├── scenes
            └── pageX
                ├── animations
                ├── images
                ├── interactions
                ├── physics
                └── replacements
</code></pre></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/sample-projects/>Sample Projects</small><h2 id=sample-projects>Sample Projects</h2><ul><li>sample-projects/SingleBook</li><li>sample-projects/Pegasus</li><li>sample-projects/Misc/Transition2</li><li>sample-projects/MusicLibrary</li><li>sample-projects/MultilingualBook</li><li>sample-projects/GameCenter</li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/tools/>Tools</small><h2 id=tools>Tools</h2><p>Exporrter plugin for PS, XD</p><ul><li><p>UXP</p><ul><li>export images</li><li>export source code<ol><li><p>traverse photoshop layers</p><p>scenes/pageX/**/*.lua</p><blockquote><p>kwik-exporter\src\photoshop\publishCode.ts</p></blockquote></li><li><p>traverse App/contentX/</p><ul><li>commands/pageX/ for envets</li><li>components/pageX for components such as audios,groups ..</li><li>scenes/pageX for layers from Photoshop and attached animation, button</li></ul><blockquote><p>generate_scene_index\generate_models.lua</p></blockquote></li><li><p>merge the both results to ouput scenes/pageX/index.lua ⭐️</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>sceneName</span> <span style=color:#f92672>=</span> <span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>scene</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#39;controller.scene&#39;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#111>sceneName</span><span style=color:#111>,</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;page01&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{{</span><span style=color:#111>bg</span> <span style=color:#f92672>=</span> <span style=color:#111>{}},</span> <span style=color:#111>{</span><span style=color:#111>layerX</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>types</span><span style=color:#f92672>=</span><span style=color:#111>{</span><span style=color:#111>button</span><span style=color:#111>}}}},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>audios</span> <span style=color:#f92672>=</span> <span style=color:#111>{},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>groups</span> <span style=color:#f92672>=</span> <span style=color:#111>{},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>others</span> <span style=color:#f92672>=</span> <span style=color:#111>{},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>timers</span> <span style=color:#f92672>=</span> <span style=color:#111>{},</span>
</span></span><span style=display:flex><span>        <span style=color:#111>variables</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;bg.clickLayer&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>onInit</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#111>scene</span><span style=color:#111>)</span> <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;onInit&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>scene</span>
</span></span></code></pre></div></li></ol></li></ul></li><li><p>develop/UXP/kwik-exporter</p><p>A layer set is exported as one single image if assets/images/pageX has the foler with the same name of the layer set.</p><ul><li><p>export images</p></li><li><p>export props</p><ul><li>output .json/.lua</li></ul><p>develop\UXP\kwik-exporter\plugin\kwik\templates\components\</p><ul><li>layer_image.json</li><li>layer_image.lua</li></ul><p>(TODO) Update develop\Solar2D\template to sync with the two files.</p><p>(TODO) UXP/plugin/kwik/template is a clone of template/App/contentX</p></li></ul></li></ul><pre tabindex=0><code>├─Solar2D
│  ├─robotlegs
│  │  ├─App
│  │  │  ├─book
│  │  │  │  ├─assets
│  │  │  │  │  ├─images
│  │  │  │  │  │  └─page01
│  │  │  │  ├─models
│  │  │  │  │  └─page01
│  │  │  │  │      └─layers
│  │  │  │  └─scenes
│  │  │  │      └─page01
│  ├─template
│  │  ├─App
│  │  │  └─contentX
│  │  │      ├─assets
│  │  │      ├─commands
│  │  │      │  └─pageX
│  │  │      ├─components
│  │  │      │  ├─pageX
│  │  │      │  │  ├─audios
│  │  │      │  │  ├─groups
│  │  │      │  │  ├─interactions
│  │  │      │  │  │  └─page
│  │  │      │  │  ├─others
│  │  │      │  │  │  ├─ext_lib_codes
│  │  │      │  │  │  ├─page
│  │  │      │  │  │  └─store
│  │  │      │  │  ├─timers
│  │  │      │  │  └─variables
│  │  │      │  └─store
│  │  │      ├─models
│  │  │      │  └─pageX
│  │  │      │      ├─events
│  │  │      │      └─layers
│  │  │      └─scenes
│  │  │          └─pageX
│  │  │              ├─animations
│  │  │              ├─images
│  │  │              ├─interactions
│  │  │              ├─physics
│  │  │              └─replacements
│  │  │                  ├─particles
│  │  │                  ├─sprites
│  │  │                  ├─syncAudioText
│  │  │                  ├─videos
│  │  │                  └─www
│  └─tools
│      ├─kwik-editor
└─UXP
    └─kwik-exporter
        ├─plugin
        │  ├─icons
        │  └─kwik
        │      ├─templates
        │      │  ├─components
        │      │  │  └─kwik
        │      │  ├─model
        │      │  │  ├─components
        │      │  │  ├─events
        │      │  │  └─layers
        │      │  └─scenes
</code></pre><p>Editor</p><ul><li><p>Solar2D Desktop App</p><ul><li>/develop/Solar2D/tools/kwik-editor</li></ul></li><li><p>(Maybe) Web App (React)</p></li></ul><p>REST Server</p><ul><li><p>receives Props and Commands and then renders .lua/.json</p><p>/develop/Solar2D/tools/pegasus-harness</p><p>/develop/Solar2D/tools/pegasus-launcher</p></li></ul><p>Utilities</p><ul><li><p>generating scene/pageX/index.lua</p><p>the table in the index.lua is created by interating files in App/bookX/components and bookX/commands</p></li><li><p>scafolding (optional)</p><p>it outputs .lua files to components and commands folder by reading scene/pageX/index.lua</p><p>/develop/Solar2D/tools/generate_scene_index</p></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/tools/editor/>Editor</small><h3 id=editor>Editor</h3><ul><li>React</li><li>Solar2D</li></ul><hr><p>Kwik functions</p><ul><li><p>Command</p><ul><li><p>File</p><ul><li>Project New</li><li>Project Open</li><li>Project Recent</li><li>Page New</li></ul></li><li><p>Edit</p><ul><li>Paste/Copy components</li><li>Delete<ul><li>pages</li><li>components</li></ul></li></ul></li><li><p>Publish</p><ul><li>Compress PNGs &ndash; TBI notarized compress.app in Kwik</li><li>Assemble PNGs<ul><li>A-Gif or A-PNG</li></ul></li><li>Publish<ul><li>Images</li><li>One page or Selected pages</li><li>Open Solar2D simulator</li><li>options<ul><li>Enable child components &ndash; TBI as layerSet as a group or independent option</li><li>Debug<ul><li>show memory</li><li>(trace/print control)</li></ul></li><li>Spritsheet @2x</li></ul></li></ul></li></ul></li><li><p>Importer for a Kwik3 project</p></li></ul></li><li><p>License</p><ul><li>Perpetual or Subscription</li><li>Activate</li><li>Transfer</li><li>Proxy Settings</li></ul></li><li><p>Template &ndash; TBI as auto update from kwiksher.com and store it as global</p><ul><li>Copy global to local for customization</li></ul></li><li><p>Auto update - TBI</p><ul><li>notarization and store updater.app in kwik5</li></ul></li><li><p>Language</p><ul><li>English or Japanese</li></ul></li></ul><hr><p>Samples</p><ul><li>Afraid (Get Started)</li><li>Actions</li><li>Animations</li><li>Canvas</li><li>Multi Lingual</li><li>Layer Replacements</li><li>Physics</li><li>Project And Pages</li></ul><hr><p>Structure</p><ul><li><p>Project Properties</p><ul><li>Icon</li><li>Splash screen</li><li>Letter/ZoomEven/ZoomStretch</li><li>Navigation Thumbnail</li><li>Auto Bookmark</li><li>Admob</li><li>(Rating)</li><li>IAP<ul><li>simple unlock</li><li>bookshelf</li></ul></li><li>Bookshelf<ul><li>pages</li><li>template</li><li>embedded<ul><li>normal or versions</li></ul></li></ul></li><li>Languages &ndash; TBI as State in kwik5, global</li><li>Upate Template</li></ul></li><li><p>Extended</p><ul><li><p>Normal or Component</p></li><li><p>Page Properties</p><ul><li>Context &ndash; load the page images using the context page</li><li>Scale</li><li>Enable page swipe</li><li>Show in navigation</li><li>Loading option<ul><li>Preload</li><li>Template &ndash; bookshelf template page</li><li>Comic &ndash; enable comic rendering for -panels, balloons, background</li><li>Alias &ndash; bookshelf: the page alias for a master template page</li></ul></li><li>IAP Unlock</li><li>Show Ad</li><li>Record screen</li></ul></li><li><p>Page components</p><ul><li>Audios<ul><li>Audio<ul><li>global or local</li></ul></li></ul></li><li>Groups<ul><li>Group<ul><li>Change order</li><li>Hide a group</li></ul></li><li>Simple Camera Frame</li><li>Set<ul><li>Group with</li><li>Audio with</li><li>Variable with</li></ul></li><li>Common<ul><li>Hide</li><li>Simple Responsive</li><li>Random Position</li><li>Scale</li><li>Infinity Scroll</li></ul></li></ul></li><li>States local<ul><li>State</li></ul></li><li>Actions<ul><li>Action</li></ul></li><li>Timers<ul><li>Timers</li></ul></li><li>Variables<ul><li>Variable<ul><li>global or local</li><li>keep track</li></ul></li></ul></li><li>Physics<ul><li>Environment</li><li>(Joints)</li><li>(Collisions)</li></ul></li><li>External codes &ndash; global, local, self, ace editor?<ul><li>libraries</li><li>codes<ul><li>onInit</li><li>onCreate</li><li>onShow</li><li>onHide</li></ul></li></ul></li></ul></li><li><p>Layer Properties</p><ul><li><p>Common</p><ul><li>Hide</li><li>Simple Responsive</li><li>Random Position</li><li>Scale</li><li>Export<ul><li>as Jpeg</li><li>save as Shared Asset</li></ul></li><li>Render as</li><li>Infinity Scroll</li><li>Set<ul><li>Group with</li><li>Audio with</li><li>Variable with</li></ul></li><li>States<ul><li>Gloabl</li><li>Local</li><li>Object</li></ul></li><li>Extenal Code - self</li></ul></li><li><p>Set Language &ndash; TBI as State function gloal, local, object</p></li><li><p>Animation</p><ul><li>Linear</li><li>Path</li><li>Switch Image to</li><li>Rotation</li><li>Pulse</li><li>Bounce</li><li>Blink</li><li>Shake</li><li>Filter</li></ul></li><li><p>Replacements</p><ul><li>Spritesheet<ul><li>Simple</li><li>Texture Packer</li><li>Adobe Animate</li><li>(Spine)</li></ul></li><li>Sync Text Audio<ul><li>(Lip Sync - Spine and Papagayo)</li></ul></li><li>Video<ul><li>normal or PNGs</li></ul></li><li>Web</li><li>Vector</li><li>Map</li><li>Multiplier</li><li>Particles<ul><li>Importer</li><li>Editor</li></ul></li><li>Text<ul><li>Dynamic</li><li>Static</li><li>Input</li></ul></li><li>Countdown</li><li>Mask</li></ul></li><li><p>Interactions</p><ul><li>Button</li><li>Drag</li><li>Swipe</li><li>Pinch</li><li>Spin</li><li>Shake</li><li>Scroll</li><li>Parallax (Accelerometer)</li><li>Canvas</li><li>(Snapeshot Eraser)</li><li>(Push - OneSignal)</li></ul></li><li><p>Physics</p><ul><li>Body</li><li>Set Force</li><li>Set Joint with</li><li>Set Collision with</li></ul></li></ul></li></ul></li></ul><hr></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/tools/plugins/>UXP Plugins</small><h3 id=uxp-plugins>UXP Plugins</h3><p>Kwik4 created a project folder where psd files are placed.
Kwik5 you can creat a folder for your psd files on your own. When Kwik Exporter opens, it asks for the folder location.</p><h4 id=exporter-plugins-for-ps-xd>Exporter plugins for PS, XD</h4><ul><li><p>develop/UXP/kwik-exporter</p><blockquote><p>the folder name/path is saved in a json</p></blockquote><ul><li><p>Photoshop Files</p></li><li><p>Open psd files from a folder</p><ul><li><p>Drag & Drop to change the order of psd files</p><blockquote><p>one psd file corresponds one <strong>scene</strong> in Solar2D code.</p></blockquote><blockquote><p>a psd can be marked for being ignored. .ignore file?</p></blockquote></li></ul></li><li><p>Solar2D Project</p><p>App/book folder should be selected</p></li><li><p>Publish</p><p>selected psd files</p></li><li><p>Active Document</p><ul><li>Export images</li><li>Export code</li></ul></li><li><p>Layer Groups</p><p>You can export images of a layer group</p></li></ul><img src=../img/2022-10-22-10-57-12.png width=600><p><strong>Publish</strong> all images of selected documents</p><ol><li>mark checkboxes of document&rsquo;s names you want to publish</li></ol><p><a href=https://developer.adobe.com/xd/uxp/uxp/reference-spectrum/User%20Interface/>https://developer.adobe.com/xd/uxp/uxp/reference-spectrum/User%20Interface/</a></p><p>spectrum tableview is not yet supported in UXP</p><p><a href=https://react-spectrum.adobe.com/react-spectrum/TableView.html>https://react-spectrum.adobe.com/react-spectrum/TableView.html</a></p><pre><code>- Ctl(Win) or Option(Mac) + Space key toggles selection for the focused row

- toggle all on/off
</code></pre><ol><li><p>clcik</p><p>opendFileDialog asks a <strong>book folder</strong> under App folder.</p><img src=../img/2022-06-13-10-57-57.png width=400></li></ol><p><strong>Active Document</strong> Export Images for an active document document</p><ol><li><p>open .psd by cliking the psd name in the list</p><p>Kwik4_1280x1920.psd with background image 1440x2776</p><blockquote><p>kwik5 does not request the canvas size of .psd as 1280x1920 when publising</p></blockquote><img src=../img/2022-05-24-18-46-26.png width=600></li><li><p>clcik Export Images</p><p>openFileDialog asks a <strong>book folder</strong> under App folder.</p><img src=../img/2022-05-24-18-32-56.png width=600></li></ol><p><strong>Active Document</strong> Export each image of a layerSet(layer group) in .psd</p><ol><li><p>create a folder with same name as layerSet in book/assets/images/FILE_NAME_OF_PSD</p><p>for instance, &ldquo;bg&rdquo; is a layer group of kwik4_1280x1920.psd</p><img src=../img/2022-05-24-19-44-47.png width=400><p>you can manually create the bg folder under App/book/assets/images/kwik4_1280x1920 so the export images function knows where to put images of sub layers of a group.</p><blockquote><p>If such no folder with the same name as a layer group, the one image of a layer group is exported.</p></blockquote><img src=../img/2022-05-24-19-47-35.png width=400>
<img src=../img/2022-05-24-19-57-39.png width=400></li></ol><blockquote><p>A concept of Kwik5 is to use App folder as a project base. It is a kind of file based database where .json, .lua and assets files are placed. No more .kwk xml file of Kwik4</p></blockquote><blockquote><p>Direclty Editing a file under App folder while running Solar2D Simulator means a live editing. No more build4 folder of Kwik4 either</p></blockquote><p><strong>TODO</strong> Active Document > Layer Selection Only</p></li></ul><hr><h4 id=editor-frontend-for-ps-xd>Editor Frontend for PS, XD</h4><blockquote><p>ref Anima plugin for Adobe XD</p></blockquote></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/tools/utilities/>Utilities</small><h3 id=utilities>Utilities</h3><ul><li><p>/develop/Solar2D/tools/yaml2lua</p><blockquote><p>there is a vscode extention to convert <a href="https://marketplace.visualstudio.com/items?itemName=petli-full.json-to-yaml-and-more">yaml to json </a>, json to yaml etc</p></blockquote><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span>- <span style=color:#f92672>name</span><span style=color:#111>:</span> <span style=color:#ae81ff>Loading01</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span><span style=color:#111>:</span> <span style=color:#ae81ff>from</span>
</span></span><span style=display:flex><span><span style=color:#f92672>to</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>x</span><span style=color:#111>:</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>y</span><span style=color:#111>:</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>alpha</span><span style=color:#111>:</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>duration</span><span style=color:#111>:</span> <span style=color:#ae81ff>2000</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>xScale</span><span style=color:#111>:</span> <span style=color:#ae81ff>1.5</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>yScale</span><span style=color:#111>:</span> <span style=color:#ae81ff>1.5</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>rotation</span><span style=color:#111>:</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#f92672>controls</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>restart</span><span style=color:#111>:</span> <span style=color:#00a8c8>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>easing</span><span style=color:#111>:</span> <span style=color:#ae81ff>Linear</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>reverse</span><span style=color:#111>:</span> <span style=color:#00a8c8>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>delay</span><span style=color:#111>:</span> <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>loop</span><span style=color:#111>:</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>angle</span><span style=color:#111>:</span> <span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>xSwipe</span><span style=color:#111>:</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ySwipe</span><span style=color:#111>:</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>referncePoint</span><span style=color:#111>:</span> <span style=color:#ae81ff>Center</span>
</span></span><span style=display:flex><span><span style=color:#f92672>breadcrumbs</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>dispose</span><span style=color:#111>:</span> <span style=color:#00a8c8>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>shape</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>color</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>interval</span><span style=color:#111>:</span> <span style=color:#ae81ff>300</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>time</span><span style=color:#111>:</span> <span style=color:#ae81ff>2000</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>width</span><span style=color:#111>:</span> <span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>height</span><span style=color:#111>:</span> <span style=color:#ae81ff>30</span>
</span></span></code></pre></div><p>lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#111>breadcrumbs</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>color</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#ae81ff>1</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>dispose</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>true</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>height</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>30</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>interval</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>300</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>shape</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>time</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2000</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>width</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>controls</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>referncePoint</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Center&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>angle</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>45</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>delay</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1000</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>easing</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Linear&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>loop</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>restart</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>false</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>reverse</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>false</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>xSwipe</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>ySwipe</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>from</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;from&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;Loading01&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>to</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>alpha</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>duration</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2000</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>rotation</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>xScale</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.5</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>y</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>yScale</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.5</span>
</span></span><span style=display:flex><span>  <span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span> <span style=color:#111>}</span>
</span></span></code></pre></div></li><li><p>/develop/Solar2D/tools/<strong>generate_scene_index</strong> (TODO update ⭐️)</p><ul><li><p>generating scene/pageX/index.lua</p><p>index.lua is created by iterating files from</p><ul><li>App/conentX/scene/pageX</li><li>App/contentX/components/pageX</li><li>App/conentX/commands/pageX</li></ul></li><li><p>scafolding (optional)</p><p>it outputs .lua files to components and commands folder by reading scene/pageX/index.lua</p></li></ul></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/tools/webapp/>REST Server</small><h3 id=rest-server>Rest Server</h3><p>Get</p><p>returns .json of layer components(classes) or events/commands. It also returns default values of compoent properties</p><p>POST</p><p>receives Props of layers and Commands and then renders .lua components/commands.
It also stores the request params in .json</p><ul><li>/develop/Solar2D/tools/pegasus-harness</li><li>/develop/Solar2D/tools/pegasus-launcher</li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/workflow/>Workflow</small><h2 id=workflow>Workflow</h2><p>Overview</p><ol><li><p>put .png/.jpg into App/contentX/assets/images manually or use kwik-export plugin for Ps/XD to publish images to App folder</p><ul><li>images without coordinates</li><li>images with coordinates from Ps, XD with kwik-export plugin<ul><li>models/assets/images/*.json</li></ul></li></ul></li><li><p>kwik-editor traverses the assets folder to output .json for models and .lua for scenes/pageX and components/pageX</p><ul><li>kwik-generate-model</li><li>kwik-generate-index</li><li>kwik-scaffold-lua</li></ul><p>you can edit props or positions of images or attach a type of class such as animation, button &mldr;</p><p>you can creat an event and a corresponding action of code such as playAnimation, hideLayer, playAudio &mldr;</p><blockquote><p>if you manually add a .lua file, you need to update scenes/pageX/index.lua too. You can use kwik-generate-index that traverses pageX folder of commands, components and scenes for synclonizing the lisf of .lua for pageX context defined in the index.lua.</p></blockquote></li></ol><h2 id=1-assets>1. assets</h2><pre tabindex=0><code>├── App
    ├── contentX
        ├── assets
            ├── audios
            │   ├── sounds
            │   ├── streams
            │   └── sync
            ├── images
            │   └── pageX
            │       ├── bg.png
                    ├── folder
                    |      ├─  .png
                    |      └── .png
                    └── .png
</code></pre><h3 id=1-1-images>1-1 images</h3><ul><li><p>Manually put images in App/contentX/images/pageX folder</p><ul><li><p><strong>kwik-generate-model</strong></p><p>it creates .json under models folder</p></li></ul></li></ul><p>Alternatively</p><ul><li><p>Photoshop</p><ul><li>select .psd files to export</li><li><strong>kwik-export plugin</strong><ul><li><p>create folders for a layer group in order to export each image of the group</p></li><li><p>the plugin exports index.json too</p><ul><li>assets/images/.png</li><li>models/scenes/pageX/index.json</li></ul><pre tabindex=0><code>├── models
│   ├── assets
│   │   ├── audios
│   │   │   ├── sounds
│   │   │   ├── streams
│   │   │   └── sync
│   │   ├── index.json
│   │   ├── images
|   |         ├── pageX
|   |               ├── layerX.json (ReadOnly)
│   ├── pageX
│       ├── index.json
│       └── layers
│           ├── layerX.json (RW from KwikLiveEditor)
</code></pre></li></ul></li></ul><p>later you edit it with KwikLiveEditor, then layerX.json is created under models/pageX/layers folder. images/pageX/layerX.json is readonly.</p></li></ul><h3 id=1-2-audios>1-2 audios</h3><p>put audio files under assets/audios folder</p><pre tabindex=0><code>.
├── assets
│   ├── audios
│   │   ├── sounds
│   │   │   └── ballsCollide.mp3
│   │   ├── streams
│   │   │   ├── Gentle-Rain.mp3
│   │   │   └── Tranquility.mp3
│   │   └── sync
│   │       ├── en
│   │       │   ├── cat.mp3
│   │       │   ├── kwik.mp3
│   │       │   └── narration.mp3
│   │       ├── jp
│   │       │   ├── cat.mp3
│   │       │   ├── kwik.mp3
│   │       │   └── narration.mp3
│   │       ├── pageX_Text1.mp3
│   │       ├── pageX_Text1.txt
│   │       ├── page02_Text1.mp3
│   │       └── page02_Text1.txt
</code></pre><ul><li><p><strong>kwik-generate-model</strong></p><p>creates .json under models/assets/audios</p><pre tabindex=0><code>├── models
│   ├── assets
│   │   ├── audios
│   │   │   ├── sounds
|   |   |   |     ├── audioX.json
│   │   │   ├── streams
│   │   │   └── sync
│   │   ├── index.json
│   │   ├── images
│   ├── pageX
│       ├── index.json
</code></pre></li><li><p><strong>kwik-editor</strong></p><p>audio files are not subjected to a page yet. So you can assign an audio to any pages with the tool.</p><ol><li><p>edit audio properties</p><ul><li>auto play</li><li>channnel</li><li>&mldr;</li></ul><p>models/assets/audios/sounds/audioX.json</p><pre tabindex=0><code>{
    &#34;name&#34;:&#34;audioX&#34;,
    &#34;autoPlay&#34;:false,
    &#34;channel&#34;:2,
    &#34;type&#34;:&#34;sound&#34;
}
</code></pre></li><li><p>you assign an audio entry to a page with kwik-editor. Then the tool adds the entry in models/pageX/index.json</p></li></ol><p><strong>pageX</strong>/index.json</p><pre tabindex=0><code>{
    &#34;components&#34;: [
        {
            &#34;audios&#34;: [
                {&#34;name&#34;:&#34;audioX&#34;, &#34;type&#34;:&#34;sound&#34;},
            ]
        }
    ],
    &#34;events&#34;: [],
    &#34;layers&#34;: []
}
</code></pre></li></ul></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/workflow/lua/>Lua Code</small><h2 id=lua>Lua</h2><p>you don&rsquo;t need to use kwik-generate-model nor kwik-editor to output lua files. You can skip making .json files of these tools, and you create a lua file manually into a folder, and append a name of additional file to scenes/pageX/index.lua</p><ul><li>commands/pageX/**/*.lua</li><li>components/pageX/**/*.lua</li><li>scenes/pageX/**/*.lua</li></ul><p>At runtime, Kwik Code Framework reads scenes/pageX/index.lua to load each .lua files of pageX. The object names for commands, compnents, scenes are defined in the index.lua.</p><ul><li>scenes/pageX/index.lua</li></ul><p><strong>kwik-genereate-index</strong> is a tool to update the index.lua from traversing the folders above.</p><ol><li>create .lua for commands, components, layers of pageX,</li><li>run the tool to generate scenes/pageX/index.lua</li></ol><blockquote><p>you don&rsquo;t need to use kwik-generate-index tool. You can manually edit it but it would be better to generate the index.lua with the tool.</p></blockquote><blockquote><p>Alternatively, there is another tool named <strong>kwik-scaffold-lua</strong>. This tool scafolds .lua files from scenes/pageX/index.lua. The tool does not overwrite .lua if exists, and may delete .lua if not defined in index.lua</p></blockquote><p>Which Workflow do you like?</p><ul><li><p>A</p><p>use kwik-generate-index everytime after you update commands, components, senes lua files.</p></li><li><p>B</p><p>use kwik-scaffold-lua to create a lua for commands, components, scenes then edit the lua file.</p></li></ul><blockquote><p>I like A because thinking about files/folders strcure with a file explorer, and coping/pasting an exsiting file could be easier when coding is in progress.</p></blockquote><blockquote><p>To initiate a project, B would work quicky to make a skelton structure.</p></blockquote></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/design/workflow/workflow/>REST API</small><h2 id=rest-api---yaml>REST API - YAML</h2><ol><li><p>put images in App/demo/assets/page01</p><ul><li>logo</li><li>panel</li><li>message</li><li>button</li><li>background</li><li>shape1</li><li>shape2</li></ul><p>Tool</p><ul><li>Finder/File Expolorer</li><li>Plugin for Photoshop or XD will export images</li><li>Editor<ul><li>html post image form</li></ul></li><li>network<ul><li><p>display.loadRemoteImage</p><p><a href=https://solar2d.com/images/logo.png>https://solar2d.com/images/logo.png</a></p><blockquote><p>access images of XD shared view? or able to load them all?</p></blockquote></li><li><p>network.download</p></li></ul></li></ul></li><li><p>Create layer structure</p><ul><li>Editor lists the images<ul><li>Order Top/Bottom/Up/Down</li></ul></li></ul><p>frontEnd uses <strong>Adobe React Spectrum</strong> (in future, support screen reader etc)</p><p>REST API to get the list of images and post the orderd list back</p><p>GET /layers</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>  - <span style=color:#f92672>background</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>button</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>logo</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>message</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>panel</span><span style=color:#111>:</span>
</span></span></code></pre></div><p>Change the order of layers</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>logo</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>panel</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>message</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>button</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>background</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span></code></pre></div></li><li><p>Set animation and button</p><blockquote><p>test KwikTheCat for evaluation</p></blockquote><p>one by one</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers/logo</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>classes</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>- <span style=color:#ae81ff>animation</span>
</span></span></code></pre></div><p>Or</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers/logo</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Content-Type</span><span style=color:#111>:</span> <span style=color:#ae81ff>application/yaml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>transition</span><span style=color:#111>:</span> <span style=color:#ae81ff>bounce</span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>params</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>height</span><span style=color:#111>:</span> <span style=color:#ae81ff>400</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>width</span><span style=color:#111>:</span> <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>time</span><span style=color:#111>:</span> <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>iterations</span><span style=color:#111>:</span> <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p><strong>GUI</strong> in Edtior(Solar2D) for transformation, draggable to set a position</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers/panel/button</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>classes</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>- <span style=color:#ae81ff>button</span>
</span></span></code></pre></div><p>All together</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>logo</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>classes</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>animation</span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>panel</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>message</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>button</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>classes</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>button</span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>background</span><span style=color:#111>:</span> <span style=color:#111>[]</span>
</span></span></code></pre></div></li></ol></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/get_started/>Get Started</small><p>TODO</p><ul><li><p><input checked disabled type=checkbox> swipe page or A/D keys for navigation</p><ul><li><input disabled type=checkbox> doc</li></ul></li><li><p><input checked disabled type=checkbox> test layer groups and add how to work with a layer group in get started</p><ul><li><input disabled type=checkbox> layer group in Kwik Visual Code<ul><li><input disabled type=checkbox> a test .psd and publish it</li></ul></li></ul></li><li><p><input checked disabled type=checkbox> clean image template lua</p></li><li><p><input checked disabled type=checkbox> add animation and button</p><ul><li><input checked disabled type=checkbox> action</li><li><input disabled type=checkbox> group animation, an example for multiple animations</li><li><input disabled type=checkbox> sliders, switches for true/false, option/checkbox</li></ul></li><li><p><input disabled type=checkbox> add audio & video</p></li><li><p><input checked disabled type=checkbox> nagivation & thumnail images</p><ul><li><input checked disabled type=checkbox> refactor kNavi.lua</li><li><input disabled type=checkbox> doc</li></ul></li></ul><h1 id=get-started>Get Started</h1><nav id=TableOfContents><ul><li><a href=#uxpkwik-exporter>UXP/kwik-exporter</a><ul><li><a href=#a-project-folder>A project folder</a></li></ul></li><li><a href=#solar2d-simulatorkwik-editor>Solar2D Simulator/kwik-editor</a></li></ul></nav><h2 id=uxpkwik-exporter>UXP/kwik-exporter</h2><ol><li><p>Open Adobe UXP Developer Tool</p><p>Add Plugin by selecting develop/UXP/kwik-exporter/dist/manifest.json</p><p>Kwik Exporter Panel apppears</p><img src=./img/2022-07-23-20-05-50.png width=1080></li><li><p>From the UXP plugin</p><p>Photoshop Files > Open</p></li><li><p>Double Click the one of .psd in the list to open it for editing.</p></li><li><p>Solar2D Project > Select Book or create a new Solar2D project</p></li><li><p>Publish</p><p>selected psd files are publihsed to App/book folder</p></li></ol><hr><h3 id=a-project-folder>A project folder</h3><pre tabindex=0><code> ├── Photoshop
 │   └── book
 │       ├── kwikconfig.json
 │       ├── page1,psd
 │       └── page2.psd
 └── Solar2D
     ├── rel
     ├── src
     │   ├── App
     │   │   └── book &lt;==== the published images/lua files are inside this folder
     │   ├── Images.xcassets
     │   ├── LaunchScreen.storyboardc
     │   ├── assets
     │   ├── build.settings
     │   ├── commands
     │   ├── components
     │   ├── config.lua
     │   ├── controller
     │   ├── en.lproj
     │   ├── extlib
     │   ├── jp.lproj
     │   ├── main.lua
     │   └── mySplashScreen.png
     ├── templates
     └── tools
</code></pre><hr><h2 id=solar2d-simulatorkwik-editor>Solar2D Simulator/kwik-editor</h2><p>Open main.lua in Solar2D/src with Solar2D Simulator</p><p><strong>Kwik Visual Code Editor</strong> wiil be loaded and your content(App/book) of your psd files are previewd</p><p>For instance, animtion editing
<img src=./img/2022-10-22-11-26-40.png width=600></p><p>Action editing
<img src=./img/2022-10-22-11-28-25.png width=600></p></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/get_started/components/>Components</small><h1 id=components>Components</h1><p>For instance components/pageX/controller/swip.lua enables a page transition, and audios can have multiple audio objects.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>sceneName</span> <span style=color:#f92672>=</span> <span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>scene</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#39;controller.scene&#39;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#111>sceneName</span><span style=color:#111>,</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;pageX&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>bg</span><span style=color:#f92672>=</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#111>}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>      <span style=color:#111>audios</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>audioOne</span> <span style=color:#f92672>=</span> <span style=color:#111>{},</span> <span style=color:#111>audioTwo</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>groups</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>timers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>variables</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>pages</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#d88200>&#34;controllers.swipe&#34;</span> <span style=color:#111>}</span>
</span></span><span style=display:flex><span>     <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>myAction</span><span style=color:#111>,</span><span style=color:#111>myEvents.testHandler</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>onInit</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#111>scene</span><span style=color:#111>)</span> <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;onInit&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>scene</span>
</span></span></code></pre></div><img src=../img/2022-10-22-21-08-05.png width=300><h3 id=page>page</h3><ul><li>common</li><li>controllers<ul><li>swipe</li><li>keyboard</li></ul></li></ul><h3 id=audio>audio</h3><h3 id=group>group</h3><h3 id=timer>timer</h3><hr><h2 id=common-components>Common components</h2><p>You can add a common component to components/common directory</p><img src=../img/2022-07-26-15-46-42.png width=240><p>And let it pass in arguments of bootstrap function in main.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>common</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;myEvent&#34;</span><span style=color:#111>},</span> <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;myComponent&#34;</span><span style=color:#111>}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;controller.index&#34;</span><span style=color:#111>).</span><span style=color:#111>bootstrap</span><span style=color:#111>({</span>
</span></span><span style=display:flex><span>  <span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;book&#34;</span><span style=color:#111>,</span> <span style=color:#111>sceneIndex</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>position</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>x</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>common</span> <span style=color:#f92672>=</span><span style=color:#111>common</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span></code></pre></div><p>Common components are executed after all the layer components of a scene are rendered. So you can access a layer component by UI.layers table.</p><p>for instance, myComponent.lua attaches a tap listener</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>didShow</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>sceneGroup</span> <span style=color:#f92672>=</span> <span style=color:#111>UI.scene</span><span style=color:#111>.</span><span style=color:#111>view</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#111>UI.layers</span><span style=color:#111>.</span><span style=color:#111>bg</span><span style=color:#111>:</span><span style=color:#111>addEventListener</span><span style=color:#111>(</span><span style=color:#d88200>&#34;tap&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#111>event</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>      <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;bg is taaped&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span></code></pre></div></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/get_started/events/>Events & Commands</small><h1 id=events--commands>Events & Commands</h1><h2 id=for-an-event-for-a-page-in-a-book>For an event for a page in a book</h2><p>there are two types</p><ul><li>layer events</li><li>general events</li></ul><p>For example in scenes/pageX/index.lua, buttonOne layer has two events, tap and drag, and for general events (kwik calls it Action) are defined for instance &ldquo;myAction&rdquo;, &ldquo;myEvents.testHandler&rdquo; under the root of the table</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;kwik4_1280x1920&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>bg</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>buttonOne</span><span style=color:#f92672>=</span><span style=color:#111>{</span> <span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>tap</span><span style=color:#111>,</span> <span style=color:#111>drag</span><span style=color:#111>}}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>      <span style=color:#111>audios</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>groups</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>timers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>variables</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>others</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>}</span>
</span></span><span style=display:flex><span>     <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#d88200>&#34;myAction&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;myEvents.testHandler&#34;</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>onInit</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#111>scene</span><span style=color:#111>)</span> <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;onInit&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>The assicated lua files are located in the commands folder</p><ul><li>App/bookX/pageX/commands<ul><li>buttonOne<ul><li>tap.lua</li><li>drag.lua</li></ul></li><li>myAction.lua</li><li>myEvents/testHandler.lua</li></ul></li></ul><hr><h2 id=for-a-common-event-for-a-book>For a common event for a book</h2><p>create a command lua in commands/common directory, for example</p><ul><li><p>commands/common/myEvent.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>instance</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;commands.kwik.baseCommand&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>function</span> <span style=color:#111>(</span><span style=color:#111>params</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>UI</span>    <span style=color:#f92672>=</span> <span style=color:#111>params.UI</span>
</span></span><span style=display:flex><span>    <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;commands.myCommonEvent&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>instance</span>
</span></span></code></pre></div><img src=../img/2022-07-26-15-33-26.png width=200></li></ul><p>And let it pass in arguments of bootstrap function in main.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>common</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;myEvent&#34;</span><span style=color:#111>},</span> <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>myComponent</span><span style=color:#f92672>=</span><span style=color:#111>{}}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;controller.index&#34;</span><span style=color:#111>).</span><span style=color:#111>bootstrap</span><span style=color:#111>({</span>
</span></span><span style=display:flex><span>  <span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;book&#34;</span><span style=color:#111>,</span> <span style=color:#111>sceneIndex</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>position</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#111>x</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>,</span> <span style=color:#111>y</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>common</span> <span style=color:#f92672>=</span><span style=color:#111>common</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span></code></pre></div><p>context:init function of controller/ApplicationContext.lua automtaically adds it</p><p>this context init is called everytime when a scene is loaded. You can dispatch an event to executre myEvent.lua like this</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>UI.scene</span><span style=color:#111>:</span><span style=color:#111>dispatchEvent</span><span style=color:#111>({</span>
</span></span><span style=display:flex><span>  <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;common.myEvent&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#111>UI</span> <span style=color:#f92672>=</span> <span style=color:#111>UI</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span></code></pre></div></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/get_started/naming_rule/>PSD Naming Rule</small><h1 id=naming-psd-file-anad-layers-in-documents>Naming .psd file anad layers in documents</h1><ol><li><p>Project and file names</p><p>Avoid long names for your projects and files and, DO NOT use characters like +-&lt;>%,#;!.</p></li><li><p>Layer names</p><p>Before you start adding buttons and animations, follow the rules below. It is much easier to add interactivity with finalized names rather than to edit all of them afterward. Basic rules include:</p><ul><li><p>Only user Western characters are allowed for layer names.</p><ul><li><p>DO NOT use characters such as + - &lt;> %,#;!. for naming layers</p><p>These characters conflict with Lua language. Kwik removes these “strange” characters but, if they were used before in any button actions, it would generate errors during export.</p></li><li><p>Do NOT name your layers starting with numbers.</p><p>For example, a layer named &ldquo;1&rdquo;, will generate an error. A layer named &ldquo;01_Name&rdquo; will also generate an error. However, a layer named &ldquo;Name_01&rdquo; is correct.</p></li><li><p>Do not use Lua commands as names.</p><p>For example, a layer named “if” will conflict with the command if. Some Lua commands are: if, end, local, transition, play. A full list of Lua commands is here. Kwik will generate an alert error if it finds layers named with Lua commands</p></li></ul></li><li><p>Avoid having multiple layers with the same name.</p><p>Kwik will not export the second layer with the same name as it will overwrite the first one, (which will make the Lua code crazy). Kwik will provide an alert error if it finds layers with identical names.</p></li><li><p>Avoid long names.</p><p>All layer names become variables when exported, meaning they use more memory and are more difficult to read. Also, they are going to be shortening anyways, as Lua will not allow variable names with more than 15 characters.</p><ul><li><p>Keep Layer Names Short for text layers</p><p>Text layer names are originally created using the content of the text from the canvas in Photoshop. If you have a long paragraph, the layer name will be the entire content of the long paragraph! Long layer names cause problems in the generated code, so edit the layer names to make them shorter. (This is the most common problem we have seen from our users reporting issues.) Don’t forget all text, besides the ones used in Sync audio feature, also are exported as images.</p></li></ul></li></ul></li><li><p>Grouped layers</p><p>Kwik can export grouped layers as a single image. Use them to create more complex elements (for example, a multi-layered button with text, shadows, etc.), or for the creation of static elements. A common issue is to have all page elements in a group layer that images are not rendered separately. If you have a group with several layers, try to flatten them whenever it is possible. It will make the export process much faster.</p></li><li><p>Button and Animation names of Kwik components</p><p>Although Kwik offers an auto-naming feature, try to enter your own names (follow the rules above). It will help you to quickly edit your actions from the project view. This is a time saver for a project with several actions.</p></li></ol></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/get_started/step1/>Step 1 - UXP</small><h2 id=uxpkwik-exporter>UXP/kwik-exporter</h2><ol><li><p>Open Adobe UXP Developer Tool</p><p>Add Plugin to select develop/UXP/kwik-exporter/dist</p><blockquote><p>TODO alpla release folder structure may be different to the current develop</p></blockquote><img src=../img/2022-07-02-20-29-05.png width=600><p>Load it</p><img src=../img/2022-07-23-20-01-45.png width=600><p>Kwik Exporter Panel apppears</p><img src=../img/2022-10-22-11-03-26.png width=400></li><li><p>Photoshop Files > Open</p><p>you can select the following folder that comes with demo .psd files and kwikconfig.json. You may open a folder of yours which contains psd files.</p><ul><li><p>sample-projects/SingleBook/book01</p><ul><li>page1.psd</li><li>page2.psd</li><li>kwikconfig.json</li></ul><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;book one&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;output&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;../../Solar2D/src/App/book&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;pages&#34;</span><span style=color:#111>:[</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#f92672>&#34;psd&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;page01.psd&#34;</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;name&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;page one&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{</span><span style=color:#f92672>&#34;psd&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;page02.psd&#34;</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;name&#34;</span><span style=color:#111>:</span><span style=color:#d88200>&#34;page two&#34;</span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>  <span style=color:#111>]</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></li></ul><blockquote><p>TODO Project Name Text Box to display a selected folder name as default.</p></blockquote><blockquote><p>TODO User can change it and Kwik uses it for a folder name when publshing</p></blockquote><blockquote><p>TODO kwikconfig.json will be created in the selected folder.</p></blockquote></li><li><p>Double Click the one of .psd in the list to open it for editing.</p><img src=../img/2022-07-23-20-05-50.png width=600></li><li><p>Solar2D Project > New</p><ul><li>New button, a set of Solar2D project will be generated to a selected folder.</li></ul><h3 id=create-a-new-soler2d-project>Create a new Soler2D project</h3><img src=../img/2022-07-23-20-28-14.png width=300><p>TODO dialog for choice
- create a pair of Photoshop & Solar2D project folder</p><pre><code>   it will scafold a Solar2D folder of a template to a folder you choose.

   NG Current implementation copies Solar2D folder w/o App

   TODO it would be better to scafold the entire structure of SingleBook sample

 -  create a book folder into Photoshop folder

 select a distination folder
</code></pre><p>TODO select portrait or landscape</p><p>The following folder structure will be created under Solar2D folder</p><pre tabindex=0><code>  ├── Photoshop
  │   └── book01
  │       ├── kwikconfig.json
  │       └── page01.psd
  └── Solar2D
      ├── rel
      ├── src
      │   ├── App
      │   │   └── book
      │   ├── Images.xcassets
      │   ├── LaunchScreen.storyboardc
      │   ├── assets
      │   ├── build.settings
      │   ├── commands
      │   ├── components
      │   ├── config.lua
      │   ├── controller
      │   ├── en.lproj
      │   ├── extlib
      │   ├── jp.lproj
      │   ├── main.lua
      │   └── mySplashScreen.png
      ├── templates
      └── tools
</code></pre></li><li><p>Solar2D Project > Select Book</p><ul><li><p>Select Book</p><p>please select an output folder where each psf files are published. It must be under App folder.</p><img src=../img/2022-07-23-20-10-03.png width=400>
<img src=../img/2022-07-23-20-16-18.png width=300></li></ul></li><li><p>Publish</p><p>selected psd files are publihsed to App/book folder</p><img src=../img/2022-07-23-20-09-31.png width=400><ul><li><p>checkbox all</p><p>it will select all the psd files in the list</p></li><li><p>Input text box</p><p>you can input the index number of psd files to be published for example,</p><p>0, 2-3</p></li><li><p>Publish button</p><p>Export Settings Dialog appears, click Export</p><blockquote><p>TODO show the project name with the default output folder</p></blockquote><img src=../img/2022-07-02-20-46-39.png width=350><ul><li><p>Browse button</p><p>Select the folder for output if you like to change the destination. The default is defined in kwikconfig.json as <strong>"../../Solar2D/src/App/book"</strong></p></li></ul></li><li><p>Kwik will publish images/source code. You can find them in</p><blockquote><p>TODO change dist to src with SimpleBook sample</p></blockquote><img src=../img/2022-07-02-21-01-08.png width=300></li></ul></li><li><p>Active Document</p><p>You can publish images/codes from active document only.</p><ul><li>Export Images</li><li>Export Code</li></ul><img src=../img/2022-07-23-20-23-00.png width=300></li><li><p>Layer Groups</p><blockquote><p>TODO Kwik4_1280x1920 to be renamed as page1</p></blockquote><p>You can export images of a layer group individually.</p><img src=../img/2022-07-25-13-12-57.png width=300><p>Select layer groups and then click Unmerge button.</p><img src=../img/2022-07-25-13-13-44.png width=300><p>If you want to cancel a layer group to be unmerged, Check it and click Cancel button. It will disppaer from the list.</p><img src=../img/2022-07-25-13-16-15.png width=300><p>The source files and the images are exported when you publish.</p><img src=../img/2022-07-25-13-19-38.png width=300><blockquote><p>TODO fix the bug that unmerged group is not indexed at the right position in index.lua</p></blockquote><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>scene</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#39;controller.scene&#39;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#111>sceneName</span><span style=color:#111>,</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;kwik4_1280x1920&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>bg</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>copyright</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>star</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>hello</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>mycircle</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>myrect</span><span style=color:#f92672>=</span><span style=color:#111>{},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>GroupA</span><span style=color:#f92672>=</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>                <span style=color:#111>{</span> <span style=color:#111>SubA</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span> <span style=color:#111>},}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span></code></pre></div></li></ol></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/get_started/step2/>Step2 - Solar2D</small><h2 id=solar2d-simulator>Solar2D Simulator</h2><ol><li><p>Open main.lua in Solar2D/src with Solar2D Simulator</p><p>TODO UXP::Publish to include swipe page or A/D keys for navigation ⭐️</p><p>kwiconfig.lua</p><pre tabindex=0><code>debug = {enable = true, navigation= &#34;swipe/keys&#34;}
</code></pre></li></ol><h3 id=kwik-visual-code-editor>Kwik Visual Code Editor</h3><img src=../img/2022-10-22-11-26-40.png width=600>
<img src=../img/2022-10-22-11-28-25.png width=600></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/get_started/tools/>Tools</small><h1 id=tools>Tools</h1><nav id=TableOfContents><ul><li><a href=#kwik-visual-code-editor>Kwik Visual Code Editor</a></li><li><a href=#launcher>Launcher</a></li><li><a href=#harness>Harness</a></li><li><a href=#custom-code>Custom Code</a><ul><li><a href=#generate_scene_index-tool>generate_scene_index tool</a></li></ul></li></ul></nav><hr><h2 id=kwik-visual-code-editor>Kwik Visual Code Editor</h2><blockquote><p>update the test-proj/Solar2D/component/editor to develop/Solar2D/tools/kwik-editor</p></blockquote><p>This tool visually edits Soar2D/src files of a Kwik project and is harnessed by Pegasus http-server</p><img src=../img/2022-10-22-11-26-40.png width=600>
<img src=../img/2022-10-22-11-28-25.png width=600><p>↑
Select a layer or an event to review. You can edit values of properties</p><p>TODO each kwik component with default values</p><p>TODO ui components like checkbox/selectors &mldr; for each component ⭐️</p><blockquote><p>react compnents on webview &ndash; can be shared with UXP panel which may send params via http to pegasus in kwik editor</p></blockquote><blockquote><p>current editPorpsTable.lua servers as plain table viewer & editor</p></blockquote><p>TODO save/copy params to .http (YAML) for httpYac</p><p>TODO how to send text to clipboard from Solar2D　⭐️</p><hr><h2 id=launcher>Launcher</h2><p>develop/Solar2D/tools/pegasus-launcher</p><ul><li>test-Solar2D-SampleCode.http</li></ul><p>You can open a solar2D project from VS Code with httpYac</p><hr><h2 id=harness>Harness</h2><p>develop/Solar2D/tools/pegasus-harness</p><ul><li>test_character_transitions.http</li><li>test_Loading_animation.http</li></ul><p>You can post params with httpYac in VS Code to a Solar2D project</p><p>TODO set Layer varaible with samples</p><p>TODO create models: animation, transition2, button &mldr;, and pegasus-receiver in kwik-editor ⭐️</p><ul><li><p>Animation_bounce.http</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#ae81ff>POST /layers/logo</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Content-Type</span><span style=color:#111>:</span> <span style=color:#ae81ff>application/yaml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>transition</span><span style=color:#111>:</span> <span style=color:#ae81ff>bounce</span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>params</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>height</span><span style=color:#111>:</span> <span style=color:#ae81ff>400</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>width</span><span style=color:#111>:</span> <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>time</span><span style=color:#111>:</span> <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>iterations</span><span style=color:#111>:</span> <span style=color:#ae81ff>0</span>
</span></span></code></pre></div></li></ul><hr><h2 id=custom-code>Custom Code</h2><p>you can put your own code into commands and scenes folder. Kwik Exporter traverses folders of Solar2D project to integrate your additional files.</p><ul><li>commands/*.lua</li><li>scenes/*.lua</li></ul><img src=./img/2022-07-23-20-34-40.png width=300><p>for instance, myrect.lua calls myEvents.testHandler when user taps the rect.</p><p>The $weight in a comment line at the top is a variable for Kwik. A scene componet(layer or your custom code)with lower value will be placed upper. The top layer from Photoshop is zero. Then values are increases to until the background layer. For your custom code , you can use minus or positive with decimal. For example, myrect is -2, mycircle is -1. If you change weight values of custom code files, don&rsquo;t forget to publish code again.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#75715e>-- $weight=-2</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>_M</span> <span style=color:#f92672>=</span> <span style=color:#111>{}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>init</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>create</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>sceneGroup</span> <span style=color:#f92672>=</span> <span style=color:#111>UI.scene</span><span style=color:#111>.</span><span style=color:#111>view</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>obj</span> <span style=color:#f92672>=</span> <span style=color:#111>display.newRect</span><span style=color:#111>(</span> <span style=color:#111>sceneGroup</span><span style=color:#111>,</span> <span style=color:#111>display.contentCenterX</span><span style=color:#111>,</span> <span style=color:#111>display.contentCenterY</span><span style=color:#f92672>-</span><span style=color:#ae81ff>100</span><span style=color:#111>,</span> <span style=color:#ae81ff>100</span><span style=color:#111>,</span> <span style=color:#ae81ff>100</span> <span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#111>obj</span><span style=color:#111>:</span><span style=color:#111>setFillColor</span><span style=color:#111>(</span><span style=color:#ae81ff>0.2</span><span style=color:#111>,</span><span style=color:#ae81ff>0.2</span><span style=color:#111>,</span><span style=color:#ae81ff>0.2</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#111>obj</span><span style=color:#111>:</span><span style=color:#111>addEventListener</span><span style=color:#111>(</span><span style=color:#d88200>&#34;tap&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>function</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>    <span style=color:#111>UI.scene</span><span style=color:#111>:</span><span style=color:#111>dispatchEvent</span><span style=color:#111>({</span>
</span></span><span style=display:flex><span>      <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;myEvents.testHandler&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>      <span style=color:#111>UI</span> <span style=color:#f92672>=</span> <span style=color:#111>UI</span>
</span></span><span style=display:flex><span>    <span style=color:#111>})</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>didShow</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>didHide</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>function</span>  <span style=color:#75af00>_M</span><span style=color:#111>:</span><span style=color:#75af00>destory</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>_M</span>
</span></span></code></pre></div><p>myEvents.testHandker.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>instance</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;commands.kwik.baseCommand&#34;</span><span style=color:#111>).</span><span style=color:#111>new</span><span style=color:#111>(</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>function</span> <span style=color:#111>(</span><span style=color:#111>params</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>local</span> <span style=color:#111>UI</span>    <span style=color:#f92672>=</span> <span style=color:#111>params.UI</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;commands.myEvents.testhander&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>UI.scene</span><span style=color:#111>:</span><span style=color:#111>dispatchEvent</span><span style=color:#111>({</span>
</span></span><span style=display:flex><span>      <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;myAction&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>      <span style=color:#111>UI</span> <span style=color:#f92672>=</span> <span style=color:#111>UI</span>
</span></span><span style=display:flex><span>    <span style=color:#111>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>instance</span>
</span></span></code></pre></div><p>You can find your custom code are inserted in scenes/{PSD FILENAME}/index.lua. The layers are sorted internally by values of meta weight variables.</p><img src=../img/2022-07-23-20-46-52.png width=600><hr><h3 id=generate_scene_index-tool>generate_scene_index tool</h3><ol><li><p>create .lua for commands or components</p></li><li><p>run the follwoing tool to update scenes/pageX/index.lua to append the new .lua to the index.lua</p><p><strong>/develop/Solar2D/tools/generate_scene_index</strong> is a Solar2D application. You can open the main.lua in Solar2D simulator.</p><p>the table in the index.lua is updated by iterating files in App/bookX/components and bookX/commands</p></li></ol><hr></div><hr><div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3"><small id=/kwik5docs/introduction/>Introduction</small><h1 id=introduction>Introduction</h1><nav id=TableOfContents><ul><li><a href=#modified>Modified</a><ul><li><a href=#uxp>UXP</a></li><li><a href=#folder-structure>Folder structure</a></li><li><a href=#lua>Lua</a></li></ul></li><li><a href=#new-features>New Features</a><ul><li><a href=#uxp-1>UXP</a></li><li><a href=#kwik-editor-in-solar2d>Kwik Editor in Solar2D</a></li><li><a href=#lua-1>Lua</a></li><li><a href=#bookstore>Bookstore</a></li></ul></li></ul></nav><h2 id=modified>Modified</h2><h3 id=uxp>UXP</h3><ul><li><p>Open</p><table><thead><tr><th style=text-align:left>kwik4</th><th style=text-align:left>kwik5</th></tr></thead><tbody><tr><td style=text-align:left>the psd files are under Kwik/{Project Name} folder.</td><td style=text-align:left>Please choose a folder that has the psf files to be published</td></tr></tbody></table></li><li><p>Solar2D Project</p><blockquote><p>this tells where to publish images of a PSD to a solar2D project
Kwik4 was under build4 folder and no choice was available</p></blockquote><ul><li><p>New</p><p>creates a book folder under App folder. A book has scenes(pages). Each scene is genereted from each psd file.</p></li><li><p>Select</p><p>you can select a book where a psd is published as a scene(page).</p><ul><li>App/{bookName}</li></ul></li></ul></li></ul><h3 id=folder-structure>Folder structure</h3><ul><li><p>Book > scene (page) > layer</p><p>names of psd files are used to create a scene lua file for Solar2D composer</p><br><table><thead><tr><th style=text-align:left>kwik4</th><th style=text-align:left>kwik5</th></tr></thead><tbody><tr><td style=text-align:left>pageOne.psd uses &ldquo;page01&rdquo;<br>- assets/images/p1<br>- components/page01<br>- commands/page01<br>- views/page01Scene.lua.</td><td style=text-align:left>pageOne.psd uses &ldquo;pageOne&rdquo;<br>- assets/images/pageOne<br>- components/pageOne<br>- commands/pageOne<br>- scenes/pageOne/index.lua</td></tr></tbody></table></li><li><p>dist folder</p><table><thead><tr><th style=text-align:left>kwik4</th><th style=text-align:left>kwik5</th></tr></thead><tbody><tr><td style=text-align:left>build4<br>- assets/images/p1<br>- components/page01<br>- commands/page01<br>- views/page01Scene.lua.</td><td style=text-align:left>App/{bookName}<br>- assets/images/pageOne<br>- components/pageOne<br>- commands/pageOne<br>- scenes/pageOne/index.lua<br><br>commands/common<br>components/common<br>components/bookstore</td></tr></tbody></table><blockquote><p>bookshelf is renamed to bookstore that is an enhancement of the kwik4&rsquo;s bookshefl imlementation (it was provided with kwikshelf.plugin)</p></blockquote></li></ul><h3 id=lua>Lua</h3><ul><li><p>main.lua</p><p>you can load a book project with the following code.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#34;controller.index&#34;</span><span style=color:#111>).</span><span style=color:#111>bootstrap</span><span style=color:#111>({</span><span style=color:#111>name</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;bookFree&#34;</span><span style=color:#111>,</span> <span style=color:#111>sceneIndex</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#111>})</span>
</span></span></code></pre></div><p>sceneIndex is defined in App/{bookName}/scenes/index.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>scenes</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;page1&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#d88200>&#34;page2&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>scenes</span>
</span></span></code></pre></div></li><li><p>App/{bookName}/scenes/{pageName}/{layerName}.lua</p><p>a component or layer lua file is retrived from composer library of Solar2D.</p><table><thead><tr><th style=text-align:left>kwik4</th><th style=text-align:left>kwik5</th></tr></thead><tbody><tr><td style=text-align:left>UI.layer<br>local bg = UI.layer.bg</td><td style=text-align:left>UI.scene.view<br>local bg = UI.scene.view.bg</td></tr></tbody></table><blockquote><p>kwik4&rsquo;s UI.layer is obsolete.</p></blockquote><p>Kwik5 holds all layers in UI.layers as an array, and also UI.scene.view contains all the layers with it.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>function</span> <span style=color:#75af00>M</span><span style=color:#111>:</span><span style=color:#75af00>create</span><span style=color:#111>(</span><span style=color:#111>UI</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>sceneGroup</span> <span style=color:#f92672>=</span> <span style=color:#111>UI.scene</span><span style=color:#111>.</span><span style=color:#111>view</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>-- layers is a array</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>UI.layers</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>for</span> <span style=color:#111>i</span><span style=color:#f92672>=</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#f92672>#</span><span style=color:#111>layers</span> <span style=color:#00a8c8>do</span>
</span></span><span style=display:flex><span>    <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#111>layers</span><span style=color:#111>[</span><span style=color:#111>i</span><span style=color:#111>].</span><span style=color:#111>name</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>-- sceneGroup is a hash table</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>local</span> <span style=color:#111>bg</span> <span style=color:#f92672>=</span> <span style=color:#111>sceneGroup</span><span style=color:#111>[</span><span style=color:#d88200>&#34;bg&#34;</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>  <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#111>bg.name</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>end</span>
</span></span></code></pre></div></li></ul><hr><h2 id=new-features>New Features</h2><h3 id=uxp-1>UXP</h3><ul><li><p>Validate Names: layer names in Japanese Kana</p><ul><li>symbols are converted to &lsquo;_&rsquo;</li><li>&lsquo;レイヤー 1&rsquo; is converted to &lsquo;reiya_1&rsquo;</li></ul></li><li><p>Layer Groups: publish images of a nested layer group.</p></li></ul><h3 id=kwik-editor-in-solar2d>Kwik Editor in Solar2D</h3><p>animation, button, layer repleacements(spritesheet,video, particles) are editied with Kwik Editor in Solar2D.</p><p>It helpes to change values of components properties easily, or add/attach a component class to a layer visually for designers to do a no-code editing</p><blockquote><p>Kwik5 is aimed to be a low code tool faster to work with .lua code easily and directly. See the next Lua section</p></blockquote><table><thead><tr><th style=text-align:left>kwik4</th><th style=text-align:left>kwik5</th></tr></thead><tbody><tr><td style=text-align:left>1. kwik&rsquo;s component panel saves props to .kwk(XML)<br>2. Publish .lua from .kwk</td><td style=text-align:left>1. UXP Publish code(.lua) as base<br>2. Create/modify .lua for animation, button .. with Kwik editor in Solar2D simulator<br><br>For developers, use a text editor to edit .lua directly</td></tr></tbody></table><h3 id=lua-1>Lua</h3><blockquote><p>Kwik4 had .kwk xml to hold a properties/values of a Kwik project. Kwik5 uses .lua mainly</p></blockquote><ul><li><p>App/{bookName}/scenes/index.lua</p><p>you can add your own(custom) page to the index.lua</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>scenes</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span><span style=color:#d88200>&#34;page1&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#d88200>&#34;page2&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#d88200>&#34;yourPageName&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>scenes</span>
</span></span></code></pre></div></li><li><p>App/{bookName}/scenes/{pageName}/index.lua</p><p>layers form photoshop(images) and other resouces are separated.</p><ul><li><p>you can add your own(custom) layers to the layers table</p><ul><li><p>nested layres are supported</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#111>...</span>
</span></span><span style=display:flex><span>  <span style=color:#111>{</span> <span style=color:#111>title</span> <span style=color:#f92672>=</span> <span style=color:#111>{}},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>customLayeTop</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>      <span style=color:#111>{</span><span style=color:#111>panelOne</span> <span style=color:#f92672>=</span><span style=color:#111>{</span> <span style=color:#111>}},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>{</span><span style=color:#111>panelTwo</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#111>{</span><span style=color:#111>buttonOne</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span> <span style=color:#111>{</span><span style=color:#111>buttonTwo</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>}}</span> <span style=color:#111>}</span>
</span></span><span style=display:flex><span>  <span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></li></ul></li><li><p>you can add your own(custom) components to the components table</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>page</span> <span style=color:#111>sceneName</span> <span style=color:#f92672>=</span> <span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>scene</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#39;controller.scene&#39;</span><span style=color:#111>page</span><span style=color:#111>(</span><span style=color:#111>sceneName</span><span style=color:#111>,</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;page1&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>bg</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>gotoBtn</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>title</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>customLayerName</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>      <span style=color:#111>audios</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>groups</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>timers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>variables</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>pages</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span> <span style=color:#d88200>&#34;yourComponentName&#34;</span>  <span style=color:#111>}</span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>  <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>onInit</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#111>scene</span><span style=color:#111>)</span> <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;onInit&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>scene</span>
</span></span></code></pre></div></li></ul></li><li><p>layer has a class</p><blockquote><p>Kwik4&rsquo;s animation, button, layer replacements(spritesheet,video, particles,,) equal to a class in kwik5</p></blockquote><p>you may add your own custom class to a layer</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#111>...</span>
</span></span><span style=display:flex><span>  <span style=color:#111>{</span> <span style=color:#111>title</span> <span style=color:#f92672>=</span> <span style=color:#111>{},</span> <span style=color:#111>class</span><span style=color:#f92672>=</span><span style=color:#111>{</span><span style=color:#d88200>&#34;animation&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;button&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;yourClass&#34;</span><span style=color:#111>}},</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div></li><li><p>components</p><blockquote><p>Kwik4&rsquo;s audio, group, timer, varaible are treated as components in a scene in Kwik5</p></blockquote><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>      <span style=color:#111>{</span>  <span style=color:#111>bg</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>{</span>  <span style=color:#111>gotoBtn</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>      <span style=color:#111>{</span>  <span style=color:#111>title</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span><span style=color:#111>},</span>
</span></span><span style=display:flex><span><span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>  <span style=color:#111>audios</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>long</span>  <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;longOne&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;longTwo&#34;</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>short</span> <span style=color:#f92672>=</span><span style=color:#111>{</span><span style=color:#d88200>&#34;shortOne&#34;</span><span style=color:#111>,</span><span style=color:#d88200>&#34;shortTwo&#34;</span><span style=color:#111>}</span> <span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>sync</span>  <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;syncOne&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;syncTtwo&#34;</span><span style=color:#111>,</span> <span style=color:#111>en</span><span style=color:#f92672>=</span><span style=color:#111>{</span><span style=color:#d88200>&#34;helloen&#34;</span><span style=color:#111>},</span> <span style=color:#111>jp</span><span style=color:#f92672>=</span><span style=color:#111>{</span><span style=color:#d88200>&#34;hellojp&#34;</span><span style=color:#111>}}</span>
</span></span><span style=display:flex><span>  <span style=color:#111>}</span>
</span></span><span style=display:flex><span>  <span style=color:#111>groups</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;groupOne&#34;</span><span style=color:#111>,</span><span style=color:#d88200>&#34;groupTwo&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>timers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;timerOne&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;timerTwo&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span>  <span style=color:#111>variables</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span><span style=color:#d88200>&#34;varOne&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;varTwo&#34;</span><span style=color:#111>},</span>
</span></span><span style=display:flex><span><span style=color:#111>},</span>
</span></span></code></pre></div></li><li><p>common component examples</p><ul><li>navigation<ul><li>WASD key navigation</li><li>swipes</li><li>thumbnails</li></ul></li><li>bookstore navigation</li></ul></li><li><h4 id=events>Events</h4><p>App/{bookName}/scenes/{pageName}/<strong>index.lua</strong> has events too.</p><p>For example, panelOne.OK event that comes from a button in panelOne. It fires OK event, and actions code in panelOne.OK.lua in App/{bookName}/commnads/{pageName} folder will be exectued.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#111>page</span> <span style=color:#111>sceneName</span> <span style=color:#f92672>=</span> <span style=color:#111>...</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>local</span> <span style=color:#111>scene</span> <span style=color:#f92672>=</span> <span style=color:#111>require</span><span style=color:#111>(</span><span style=color:#d88200>&#39;controller.scene&#39;</span><span style=color:#111>page</span><span style=color:#111>(</span><span style=color:#111>sceneName</span><span style=color:#111>,</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>name</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;page1&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>layers</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>          <span style=color:#111>{</span>  <span style=color:#111>bg</span><span style=color:#f92672>=</span><span style=color:#111>{}</span> <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>...</span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>components</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>...</span>
</span></span><span style=display:flex><span>    <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>events</span> <span style=color:#f92672>=</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>      <span style=color:#d88200>&#34;panelOne.OK&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>      <span style=color:#d88200>&#34;panelOne.Cancel&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>      <span style=color:#d88200>&#34;timerOne&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>      <span style=color:#d88200>&#34;actionOne&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>      <span style=color:#111>},</span>
</span></span><span style=display:flex><span>    <span style=color:#111>onInit</span> <span style=color:#f92672>=</span> <span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#111>scene</span><span style=color:#111>)</span> <span style=color:#111>print</span><span style=color:#111>(</span><span style=color:#d88200>&#34;onInit&#34;</span><span style=color:#111>)</span> <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>return</span> <span style=color:#111>scene</span>
</span></span></code></pre></div></li></ul><h3 id=bookstore>Bookstore</h3><ul><li><input disabled type=checkbox> portrait view for library</li><li>book table view<ul><li><p>each book status: isFree, isPurchased, isDownloadable, isDownloaded</p><ul><li><input disabled type=checkbox> online icon</li></ul><p>See the section of bookstore/components/#Photoshop files table.psd</p></li><li><p><input disabled type=checkbox> restore & download all</p></li></ul></li></ul></div><hr></div></body></html>